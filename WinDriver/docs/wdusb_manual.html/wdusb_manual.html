<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>WinDriver&#8482; USB User's Manual</title><link rel="stylesheet" type="text/css" href="html_theme.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div style="margin-top: 1.25em; margin-bottom: 2.5em;"><div xmlns:fo="http://www.w3.org/1999/XSL/Format" id="j_vendor_logos"><img src="images/logo_jungo_site.png" alt="Jungo Connectivity Ltd."></div></div><div class="book"><div class="titlepage"><div><div><h1 class="title"><a name="idp46069371787568"></a>WinDriver&#8482; USB User's Manual</h1></div><div><div class="author"><h3 class="author"><span class="firstname">Jungo Connectivity Ltd.</span></h3></div></div><div><p class="releaseinfo"><span class="book_releaseinfo">
    Version 12.8.1
  </span></p></div><div><p class="copyright">Copyright ©  2018 Jungo Connectivity Ltd. All Rights Reserved
    </p></div><div><div class="legalnotice"><a name="idp46069368461248"></a><p>
    Information in this document is subject to change without notice. The
    software described in this document is furnished under a license agreement.
    The software may be used, copied or distributed only in accordance with
    that agreement. No part of this publication may be reproduced, stored in a
    retrieval system, or transmitted in any form or any means, electronically
    or mechanically, including photocopying and recording for any purpose
    without the written permission of Jungo Connectivity Ltd.
    </p><p>
    Brand and product names mentioned in this document are trademarks of their
    respective owners and are used here only for identification purposes.
    </p></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="chapter"><a href="#WD_Overview">1. WinDriver Overview</a></span></dt><dd><dl><dt><span class="section"><a href="#wd_intro">1.1. Introduction to WinDriver</a></span></dt><dt><span class="section"><a href="#WD_overview_background">1.2. Background</a></span></dt><dd><dl><dt><span class="section"><a href="#WD_overview_the_challenge">1.2.1. The Challenge</a></span></dt><dt><span class="section"><a href="#WD_overview_the_WD_solution">1.2.2. The WinDriver Solution</a></span></dt></dl></dd><dt><span class="section"><a href="#WD_overview_conclusion">1.3. Conclusion</a></span></dt><dt><span class="section"><a href="#WD_benefits">1.4. WinDriver Benefits</a></span></dt><dt><span class="section"><a href="#WD_arch">1.5. WinDriver Architecture</a></span></dt><dt><span class="section"><a href="#WD_sup_platforms">1.6. What Platforms Does WinDriver Support?</a></span></dt><dt><span class="section"><a href="#WD_eval_limits">1.7. Limitations of the Different Evaluation Versions</a></span></dt><dt><span class="section"><a href="#WD_dev_overview">1.8. How Do I Develop My Driver with WinDriver?</a></span></dt><dd><dl><dt><span class="section"><a href="#WD_dev_winnoce_mac_unix">1.8.1. On Windows and Linux</a></span></dt></dl></dd><dt><span class="section"><a href="#WD_toolkit_include">1.9. What Does the WinDriver Toolkit Include?</a></span></dt><dd><dl><dt><span class="section"><a href="#WD_modules">1.9.1. WinDriver Modules</a></span></dt><dt><span class="section"><a href="#WD_utilities">1.9.2. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">Utilities</span></a></span></dt><dt><span class="section"><a href="#WD_samples">1.9.3. Samples</a></span></dt></dl></dd><dt><span class="section"><a href="#wd_can_distrib">1.10. Can I Distribute the Driver Created with WinDriver?</a></span></dt></dl></dd><dt><span class="chapter"><a href="#understanding_device_drivers">2. Understanding Device Drivers</a></span></dt><dd><dl><dt><span class="section"><a href="#device_driver_overview">2.1. Device Driver Overview</a></span></dt><dt><span class="section"><a href="#drivers_func_classification">2.2. Classification of Drivers According to Functionality</a></span></dt><dd><dl><dt><span class="section"><a href="#mono_drivers">2.2.1. Monolithic Drivers</a></span></dt><dt><span class="section"><a href="#layered_drivers">2.2.2. Layered Drivers</a></span></dt><dt><span class="section"><a href="#miniport_drivers">2.2.3. Miniport Drivers</a></span></dt></dl></dd><dt><span class="section"><a href="#os_classification">2.3. Classification of Drivers According to Operating Systems</a></span></dt><dd><dl><dt><span class="section"><a href="#wdm_drivers_overview">2.3.1. WDM Drivers</a></span></dt><dt><span class="section"><a href="#unix_drivers_overview">2.3.2. Unix Device Drivers</a></span></dt><dt><span class="section"><a href="#linux_drivers_overview">2.3.3. Linux Device Drivers</a></span></dt></dl></dd><dt><span class="section"><a href="#driver_entry_point">2.4. The Entry Point of the Driver</a></span></dt><dt><span class="section"><a href="#hw_driver_assoc">2.5. Associating the Hardware with the Driver</a></span></dt><dt><span class="section"><a href="#communicating_with_drivers">2.6. Communicating with Drivers</a></span></dt></dl></dd><dt><span class="chapter"><a href="#wdusb_overview">3. WinDriver USB Overview</a></span></dt><dd><dl><dt><span class="section"><a href="#USB_intro">3.1. Introduction to USB</a></span></dt><dt><span class="section"><a href="#WD_USB_benefits">3.2. WinDriver USB Benefits</a></span></dt><dt><span class="section"><a href="#USB_components">3.3. USB Components</a></span></dt><dt><span class="section"><a href="#USB_data_flow">3.4. Data Flow in USB Devices</a></span></dt><dt><span class="section"><a href="#USB_data_exchange">3.5. USB Data Exchange</a></span></dt><dt><span class="section"><a href="#USB_data_transfer_types">3.6. USB Data Transfer Types</a></span></dt><dd><dl><dt><span class="section"><a href="#USB_control_trans">3.6.1. Control Transfer</a></span></dt><dt><span class="section"><a href="#USB_isoch_trans">3.6.2. Isochronous Transfer</a></span></dt><dt><span class="section"><a href="#USB_int_trans">3.6.3. Interrupt Transfer</a></span></dt><dt><span class="section"><a href="#USB_bulk_trans">3.6.4. Bulk Transfer</a></span></dt></dl></dd><dt><span class="section"><a href="#USB_cfg">3.7. USB Configuration</a></span></dt><dt><span class="section"><a href="#WD_USB">3.8. WinDriver USB</a></span></dt><dt><span class="section"><a href="#wd_usb_arch">3.9. WinDriver USB Architecture</a></span></dt></dl></dd><dt><span class="chapter"><a href="#wd_install">4. Installing WinDriver</a></span></dt><dd><dl><dt><span class="section"><a href="#sys_req">4.1. System Requirements</a></span></dt><dd><dl><dt><span class="section"><a href="#sys_req_windows">4.1.1. Windows System Requirements</a></span></dt><dt><span class="section"><a href="#sys_req_windows_10iotcore">4.1.2. Windows 10 IoT Core System Requirements</a></span></dt><dt><span class="section"><a href="#sys_req_linux">4.1.3. Linux System Requirements</a></span></dt></dl></dd><dt><span class="section"><a href="#wd_install_process">4.2. WinDriver Installation Process</a></span></dt><dd><dl><dt><span class="section"><a href="#wd_install_windows">4.2.1. Windows WinDriver Installation Instructions</a></span></dt><dt><span class="section"><a href="#wd_install_linux">4.2.2. Linux WinDriver Installation Instructions</a></span></dt><dd><dl><dt><span class="section"><a href="#wd_install_linux_prepare">4.2.2.1. Preparing the System for Installation</a></span></dt><dt><span class="section"><a href="#wd_linux_installation">4.2.2.2. Installation</a></span></dt><dt><span class="section"><a href="#linux_hw_access_restrict">4.2.2.3. Restricting Hardware Access on Linux</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="#wd_install_upgrade">4.3. Upgrading Your Installation</a></span></dt><dt><span class="section"><a href="#wd_install_check">4.4. Checking Your Installation</a></span></dt><dd><dl><dt><span class="section"><a href="#wd_install_check_windows_mac_unix">4.4.1. Windows and Linux Installation Check</a></span></dt></dl></dd><dt><span class="section"><a href="#wd_uninstall">4.5. Uninstalling WinDriver</a></span></dt><dd><dl><dt><span class="section"><a href="#wd_uninstall_windows">4.5.1. Windows WinDriver Uninstall Instructions</a></span></dt><dt><span class="section"><a href="#wd_uninstall_linux">4.5.2. Linux WinDriver Uninstall Instructions</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#driverwizard">5. Using DriverWizard</a></span></dt><dd><dl><dt><span class="section"><a href="#wiz_overview">5.1. An Overview</a></span></dt><dt><span class="section"><a href="#DriverWizard_Walkthrough">5.2. DriverWizard Walkthrough</a></span></dt><dd><dl><dt><span class="section"><a href="#wiz_auto_code_gen">5.2.1. Automatic Code Generation</a></span></dt><dd><dl><dt><span class="section"><a href="#wiz_code_gen">5.2.1.1. Generating the Code</a></span></dt><dt><span class="section"><a href="#wiz_gen_C_code_usb">5.2.1.2. The Generated USB C Code</a></span></dt><dt><span class="section"><a href="#wiz_gen_py_code_usb">5.2.1.3. The Generated USB Python Code</a></span></dt><dt><span class="section"><a href="#wiz_gen_cs_code_usb">5.2.1.4. The Generated USB C#.NET Code</a></span></dt><dt><span class="section"><a href="#wiz_gen_vb_code_usb">5.2.1.5. The Generated USB Visual Basic.NET Code</a></span></dt></dl></dd><dt><span class="section"><a href="#wiz_gen_code_compile">5.2.2. Compiling the Generated Code</a></span></dt><dd><dl><dt><span class="section"><a href="#wiz_win_gen_code_compile">5.2.2.1. Windows Compilation</a></span></dt><dd><dl><dt><span class="section"><a href="#wiz_running_compiled_win10iot">5.2.2.1.1. Running compiled code under Windows 10 IoT Core</a></span></dt></dl></dd><dt><span class="section"><a href="#wiz_unix_gen_code_compile">5.2.2.2. Linux Compilation</a></span></dt></dl></dd></dl></dd></dl></dd><dt><span class="chapter"><a href="#driver_develop">6. Developing a Driver</a></span></dt><dd><dl><dt><span class="section"><a href="#dev_driver_use_wiz">6.1. Using DriverWizard to Build a Device Driver</a></span></dt><dt><span class="section"><a href="#driver_dev_no_wizard">6.2. Writing the Device Driver Without DriverWizard</a></span></dt><dd><dl><dt><span class="section"><a href="#no_wiz_include_req_wd_files">6.2.1. Include the Required WinDriver Files</a></span></dt><dt><span class="section"><a href="#no_wiz_write_your_code">6.2.2. Write Your Code</a></span></dt><dt><span class="section"><a href="#no_wiz_cfg_n_build_code">6.2.3. Configure and Build Your Code</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#debugging_drivers">7. Debugging Drivers</a></span></dt><dd><dl><dt><span class="section"><a href="#dbg_user">7.1. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">User-Mode Debugging</span></a></span></dt><dt><span class="section"><a href="#Debug_Monitor">7.2. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">Debug Monitor</span></a></span></dt><dd><dl><dt><span class="section"><a href="#wddebug_gui">7.2.1. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">The wddebug_gui Utility</span></a></span></dt><dd><dl><dt><span class="section"><a href="#search%20in%20wddebug_gui">7.2.1.1. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">Search in wddebug_gui</span></a></span></dt><dt><span class="section"><a href="#wddebug_gui_kernel_dump">7.2.1.2. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">Opening Windows kernel crash dump with wddebug_gui</span></a></span></dt><dt><span class="section"><a href="#wddebug_gui_renamed_driver">7.2.1.3. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">Running wddebug_gui for a Renamed Driver</span></a></span></dt></dl></dd><dt><span class="section"><a href="#wddebug">7.2.2. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">The wddebug Utility</span></a></span></dt><dd><dl><dt><span class="section"><a href="#wddebug_console">7.2.2.1. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">Console-Mode wddebug Execution</span></a></span></dt><dt><span class="section"><a href="#wddebug_win10iot">7.2.2.2. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">Debugging in Windows 10 IoT Core</span></a></span></dt></dl></dd></dl></dd></dl></dd><dt><span class="chapter"><a href="#USB_Trans">8. USB Transfers</a></span></dt><dd><dl><dt><span class="section"><a href="#usb_trans_overview">8.1. Overview</a></span></dt><dt><span class="section"><a href="#USB_Control_Trans">8.2. USB Control Transfers</a></span></dt><dd><dl><dt><span class="section"><a href="#USB_Control_Trans_Overview">8.2.1. USB Control Transfers Overview</a></span></dt><dd><dl><dt><span class="section"><a href="#usb_ctr_data_exchange">8.2.1.1. Control Data Exchange</a></span></dt><dt><span class="section"><a href="#more_about_ctr_trans">8.2.1.2. More About the Control Transfer</a></span></dt><dt><span class="section"><a href="#the_setup_pkt">8.2.1.3. The Setup Packet</a></span></dt><dt><span class="section"><a href="#setup_pkt_format">8.2.1.4. USB Setup Packet Format</a></span></dt><dt><span class="section"><a href="#usb_standard_dev_req_codes">8.2.1.5. Standard Device Request Codes</a></span></dt><dt><span class="section"><a href="#setup_pkt_example">8.2.1.6. Setup Packet Example</a></span></dt></dl></dd><dt><span class="section"><a href="#WD_usb_ctr_trans">8.2.2. Performing Control Transfers with WinDriver</a></span></dt><dd><dl><dt><span class="section"><a href="#ctr_trans_with_driver_wizard">8.2.2.1. Control Transfers with DriverWizard</a></span></dt><dt><span class="section"><a href="#ctr_trans_with_wd_api">8.2.2.2. Control Transfers with WinDriver API</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="#USB_Data_Trans">8.3. Functional USB Data Transfers</a></span></dt><dd><dl><dt><span class="section"><a href="#USB_Data_Trans_Overview">8.3.1. Functional USB Data Transfers Overview</a></span></dt><dt><span class="section"><a href="#usb_trans_single_blocking">8.3.2. Single-Blocking Transfers</a></span></dt><dd><dl><dt><span class="section"><a href="#WD_usb_single_block_trans">8.3.2.1. Performing Single-Blocking Transfers with WinDriver</a></span></dt></dl></dd><dt><span class="section"><a href="#usb_trans_streaming">8.3.3. Streaming Data Transfers</a></span></dt><dd><dl><dt><span class="section"><a href="#WD_usb_stream_trans">8.3.3.1. Performing Streaming with WinDriver</a></span></dt></dl></dd></dl></dd></dl></dd><dt><span class="chapter"><a href="#Dynamic_Driver_Load">9. Dynamically Loading Your Driver</a></span></dt><dd><dl><dt><span class="section"><a href="#dyn_load_why">9.1. Why Do You Need a Dynamically Loadable Driver?</a></span></dt><dt><span class="section"><a href="#dyn_windows">9.2. Windows Dynamic Driver Loading</a></span></dt><dd><dl><dt><span class="section"><a href="#dyn_windows_wdreg">9.2.1. The wdreg Utility</a></span></dt><dd><dl><dt><span class="section"><a href="#wdreg_WDM">9.2.1.1. Overview</a></span></dt></dl></dd><dt><span class="section"><a href="#dyn_windrvr_inf_load">9.2.2. Dynamically Loading/Unloading windrvr1281.sys INF
  Files</a></span></dt></dl></dd><dt><span class="section"><a href="#wdreg_frontend">9.3. The wdreg_frontend utility</a></span></dt><dt><span class="section"><a href="#dyn_win10iot">9.4. Windows 10 IoT Core Dynamic Driver Loading</a></span></dt><dt><span class="section"><a href="#dyn_linux">9.5. Linux Dynamic Driver Loading</a></span></dt></dl></dd><dt><span class="chapter"><a href="#driver_distribution">10. Distributing Your Driver</a></span></dt><dd><dl><dt><span class="section"><a href="#distr_get_valid_lic">10.1. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">Getting a Valid WinDriver License</span></a></span></dt><dt><span class="section"><a href="#dist_winpnp">10.2. Windows Driver Distribution</a></span></dt><dd><dl><dt><span class="section"><a href="#dist_winpnp_pkg_prepare">10.2.1. Preparing the Distribution Package</a></span></dt><dt><span class="section"><a href="#dist_winpnp_install_on_target">10.2.2. Installing Your Driver on the Target Computer</a></span></dt></dl></dd><dt><span class="section"><a href="#dist_linux">10.3. Linux Driver Distribution</a></span></dt><dd><dl><dt><span class="section"><a href="#dist_linux_pkg_prepare">10.3.1. Preparing the Distribution Package</a></span></dt><dd><dl><dt><span class="section"><a href="#dist_linux_pkg_prepare_kernel_modules">10.3.1.1. Kernel Module Components</a></span></dt><dt><span class="section"><a href="#dist_linux_pkg_prepare_user_hw_ctrl_app_so">10.3.1.2. User-Mode Hardware-Control Application or Shared Object</a></span></dt></dl></dd><dt><span class="section"><a href="#dist_linux_build_install_wd_modules">10.3.2. Building and Installing the WinDriver Driver Module<span xmlns:fo="http://www.w3.org/1999/XSL/Format">s</span> on the Target</a></span></dt><dt><span class="section"><a href="#dist_linux_install_user_hw_ctrl_app_so">10.3.3. Installing the User-Mode Hardware-Control Application or
  Shared Object</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#driver_install_advanced">11. Driver Installation &#8212; Advanced Issues</a></span></dt><dd><dl><dt><span class="section"><a href="#winpnp_inf">11.1. Windows INF Files</a></span></dt><dd><dl><dt><span class="section"><a href="#Why_Create_INF">11.1.1. Why Should I Create an INF File?</a></span></dt><dt><span class="section"><a href="#INF_install_no_driver">11.1.2. How Do I Install an INF File When No Driver Exists?</a></span></dt><dt><span class="section"><a href="#INF_replace_driver">11.1.3. How Do I Replace an Existing Driver Using the INF File?</a></span></dt></dl></dd><dt><span class="section"><a href="#wd_rename_driver">11.2. Renaming the WinDriver Kernel Driver</a></span></dt><dd><dl><dt><span class="section"><a href="#wd_rename_driver_windows">11.2.1. Windows Driver Renaming</a></span></dt><dt><span class="section"><a href="#wd_rename_driver_linux">11.2.2. Linux Driver Renaming</a></span></dt></dl></dd><dt><span class="section"><a href="#driver_sign">11.3. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">Windows Digital Driver Signing and Certification</span></a></span></dt><dd><dl><dt><span class="section"><a href="#driver_sign_n_cert_overview">11.3.1. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">Overview</span></a></span></dt><dd><dl><dt><span class="section"><a href="#authenticode_overview">11.3.1.1. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">Authenticode Driver Signature</span></a></span></dt><dt><span class="section"><a href="#whql_overview">11.3.1.2. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">Windows Certification Program</span></a></span></dt></dl></dd><dt><span class="section"><a href="#driver_sign_wd_drivers">11.3.2. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">Driver Signing and Certification of WinDriver-Based Drivers</span></a></span></dt><dd><dl><dt><span class="section"><a href="#hck_test_notes">11.3.2.1. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">HCK Test Notes</span></a></span></dt></dl></dd></dl></dd></dl></dd><dt><span class="appendix"><a href="#64bit_os_sup">A. 64-&#65279;Bit Operating Systems Support</a></span></dt><dd><dl><dt><span class="section"><a href="#64bit_arch_sup">A.1. Supported 64-&#65279;Bit Architectures</a></span></dt><dt><span class="section"><a href="#32bit_app_on_64bit_arch_win_unix">A.2. Support for 32-&#65279;Bit Applications on 64-&#65279;Bit Windows and Linux
  Platforms</a></span></dt><dt><span class="section"><a href="#64bit_bit_data_types">A.3. 64-&#65279;Bit and 32-&#65279;Bit Data Types</a></span></dt></dl></dd><dt><span class="appendix"><a href="#API_REF">B. WinDriver USB Host API Reference</a></span></dt><dd><dl><dt><span class="section"><a href="#WD_DriverName">B.1. WD_DriverName</a></span></dt><dt><span class="section"><a href="#WDU_Overview">B.2. WinDriver USB (WDU) Library Overview</a></span></dt><dd><dl><dt><span class="section"><a href="#Calling_Sequence_USB">B.2.1. Calling Sequence for WinDriver USB</a></span></dt><dt><span class="section"><a href="#WDU_API_Upgrade">B.2.2. Upgrading from the WD_xxx USB API to the WDU_xxx API</a></span></dt></dl></dd><dt><span class="section"><a href="#usb_user_cbs">B.3. USB User Callback Functions</a></span></dt><dd><dl><dt><span class="section"><a href="#WDU_ATTACH_CALLBACK">B.3.1. WDU_ATTACH_CALLBACK</a></span></dt><dt><span class="section"><a href="#WDU_DETACH_CALLBACK">B.3.2. WDU_DETACH_CALLBACK</a></span></dt><dt><span class="section"><a href="#WDU_POWER_CHANGE_CALLBACK">B.3.3. WDU_POWER_CHANGE_CALLBACK</a></span></dt></dl></dd><dt><span class="section"><a href="#usb_funcs">B.4. USB Functions</a></span></dt><dd><dl><dt><span class="section"><a href="#WDU_Init">B.4.1. WDU_Init</a></span></dt><dt><span class="section"><a href="#WDU_SetInterface">B.4.2. WDU_SetInterface</a></span></dt><dt><span class="section"><a href="#WDU_GetDeviceAddr">B.4.3. WDU_GetDeviceAddr</a></span></dt><dt><span class="section"><a href="#WDU_GetDeviceRegistryProperty">B.4.4. WDU_GetDeviceRegistryProperty</a></span></dt><dt><span class="section"><a href="#WDU_GetDeviceInfo">B.4.5. WDU_GetDeviceInfo</a></span></dt><dt><span class="section"><a href="#WDU_PutDeviceInfo">B.4.6. WDU_PutDeviceInfo</a></span></dt><dt><span class="section"><a href="#WDU_Uninit">B.4.7. WDU_Uninit</a></span></dt><dt><span class="section"><a href="#WDU_single_block_trans_funcs">B.4.8. Single-Blocking Transfer Functions</a></span></dt><dd><dl><dt><span class="section"><a href="#WDU_Transfer">B.4.8.1. WDU_Transfer</a></span></dt><dt><span class="section"><a href="#WDU_HaltTransfer">B.4.8.2. WDU_HaltTransfer</a></span></dt><dt><span class="section"><a href="#WDU_TransferDefaultPipe">B.4.8.3. WDU_TransferDefaultPipe</a></span></dt><dt><span class="section"><a href="#WDU_TransferBulk">B.4.8.4. WDU_TransferBulk</a></span></dt><dt><span class="section"><a href="#WDU_TransferIsoch">B.4.8.5. WDU_TransferIsoch</a></span></dt><dt><span class="section"><a href="#WDU_TransferInterrupt">B.4.8.6. WDU_TransferInterrupt</a></span></dt></dl></dd><dt><span class="section"><a href="#WDU_streaming_trans_funcs">B.4.9. Streaming Data Transfer Functions</a></span></dt><dd><dl><dt><span class="section"><a href="#WDU_StreamOpen">B.4.9.1. WDU_StreamOpen</a></span></dt><dt><span class="section"><a href="#WDU_StreamStart">B.4.9.2. WDU_StreamStart</a></span></dt><dt><span class="section"><a href="#WDU_StreamRead">B.4.9.3. WDU_StreamRead</a></span></dt><dt><span class="section"><a href="#WDU_StreamWrite">B.4.9.4. WDU_StreamWrite</a></span></dt><dt><span class="section"><a href="#WDU_StreamFlush">B.4.9.5. WDU_StreamFlush</a></span></dt><dt><span class="section"><a href="#WDU_StreamGetStatus">B.4.9.6. WDU_StreamGetStatus</a></span></dt><dt><span class="section"><a href="#WDU_StreamStop">B.4.9.7. WDU_StreamStop</a></span></dt><dt><span class="section"><a href="#WDU_StreamClose">B.4.9.8. WDU_StreamClose</a></span></dt></dl></dd><dt><span class="section"><a href="#WDU_ResetPipe">B.4.10. WDU_ResetPipe</a></span></dt><dt><span class="section"><a href="#WDU_ResetDevice">B.4.11. WDU_ResetDevice</a></span></dt><dt><span class="section"><a href="#WDU_SelectiveSuspend">B.4.12. WDU_SelectiveSuspend</a></span></dt><dt><span class="section"><a href="#WDU_Wakeup">B.4.13. WDU_Wakeup</a></span></dt><dt><span class="section"><a href="#WDU_GetLangIDs">B.4.14. WDU_GetLangIDs</a></span></dt><dt><span class="section"><a href="#WDU_GetStringDesc">B.4.15. WDU_GetStringDesc</a></span></dt></dl></dd><dt><span class="section"><a href="#usb_data_types">B.5. USB Data Types</a></span></dt><dd><dl><dt><span class="section"><a href="#WD_DEVICE_REGISTRY_PROPERTY">B.5.1. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">WD_DEVICE_REGISTRY_PROPERTY Enumeration</span></a></span></dt><dt><span class="section"><a href="#sect_usb_structs">B.5.2. USB Structures</a></span></dt><dd><dl><dt><span class="section"><a href="#WDU_MATCH_TABLE">B.5.2.1. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">WDU_MATCH_TABLE Structure</span></a></span></dt><dt><span class="section"><a href="#WDU_EVENT_TABLE">B.5.2.2. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">WDU_EVENT_TABLE Structure</span></a></span></dt><dt><span class="section"><a href="#WDU_DEVICE">B.5.2.3. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">WDU_DEVICE Structure</span></a></span></dt><dt><span class="section"><a href="#WDU_CONFIGURATION">B.5.2.4. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">WDU_CONFIGURATION Structure</span></a></span></dt><dt><span class="section"><a href="#WDU_INTERFACE">B.5.2.5. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">WDU_INTERFACE Structure</span></a></span></dt><dt><span class="section"><a href="#WDU_ALTERNATE_SETTING">B.5.2.6. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">WDU_ALTERNATE_SETTING Structure</span></a></span></dt><dt><span class="section"><a href="#WDU_DEVICE_DESCRIPTOR">B.5.2.7. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">WDU_DEVICE_DESCRIPTOR Structure</span></a></span></dt><dt><span class="section"><a href="#WDU_CONFIGURATION_DESCRIPTOR">B.5.2.8. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">WDU_CONFIGURATION_DESCRIPTOR Structure</span></a></span></dt><dt><span class="section"><a href="#WDU_INTERFACE_DESCRIPTOR">B.5.2.9. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">WDU_INTERFACE_DESCRIPTOR Structure</span></a></span></dt><dt><span class="section"><a href="#WDU_ENDPOINT_DESCRIPTOR">B.5.2.10. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">WDU_ENDPOINT_DESCRIPTOR Structure</span></a></span></dt><dt><span class="section"><a href="#WDU_PIPE_INFO">B.5.2.11. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">WDU_PIPE_INFO Structure</span></a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="#wd_gen_funcs">B.6. General WD_xxx Functions</a></span></dt><dd><dl><dt><span class="section"><a href="#Calling_Sequence_WD_General">B.6.1. Calling Sequence WinDriver &#8212; General Use</a></span></dt><dt><span class="section"><a href="#WD_Open">B.6.2. WD_Open()</a></span></dt><dt><span class="section"><a href="#WD_Version">B.6.3. WD_Version()</a></span></dt><dt><span class="section"><a href="#WD_Close">B.6.4. WD_Close()</a></span></dt><dt><span class="section"><a href="#WD_Debug">B.6.5. WD_Debug()</a></span></dt><dt><span class="section"><a href="#WD_DebugAdd">B.6.6. WD_DebugAdd()</a></span></dt><dt><span class="section"><a href="#WD_DebugDump">B.6.7. WD_DebugDump()</a></span></dt><dt><span class="section"><a href="#WD_Sleep">B.6.8. WD_Sleep()</a></span></dt><dt><span class="section"><a href="#WD_License">B.6.9. WD_License()</a></span></dt></dl></dd><dt><span class="section"><a href="#Function_Reference_Utils">B.7. User-Mode Utility Functions</a></span></dt><dd><dl><dt><span class="section"><a href="#Stat2Str">B.7.1. Stat2Str</a></span></dt><dt><span class="section"><a href="#get_os_type">B.7.2. get_os_type</a></span></dt><dt><span class="section"><a href="#check_secureBoot_enabled">B.7.3. check_secureBoot_enabled</a></span></dt><dt><span class="section"><a href="#ThreadStart">B.7.4. ThreadStart</a></span></dt><dt><span class="section"><a href="#ThreadWait">B.7.5. ThreadWait</a></span></dt><dt><span class="section"><a href="#OsEventCreate">B.7.6. OsEventCreate</a></span></dt><dt><span class="section"><a href="#OsEventClose">B.7.7. OsEventClose</a></span></dt><dt><span class="section"><a href="#OsEventWait">B.7.8. OsEventWait</a></span></dt><dt><span class="section"><a href="#OsEventSignal">B.7.9. OsEventSignal</a></span></dt><dt><span class="section"><a href="#OsEventReset">B.7.10. OsEventReset</a></span></dt><dt><span class="section"><a href="#OsMutexCreate">B.7.11. OsMutexCreate</a></span></dt><dt><span class="section"><a href="#OsMutexClose">B.7.12. OsMutexClose</a></span></dt><dt><span class="section"><a href="#OsMutexLock">B.7.13. OsMutexLock</a></span></dt><dt><span class="section"><a href="#OsMutexUnlock">B.7.14. OsMutexUnlock</a></span></dt><dt><span class="section"><a href="#PrintDbgMessage">B.7.15. PrintDbgMessage</a></span></dt><dt><span class="section"><a href="#WD_LogStart">B.7.16. WD_LogStart</a></span></dt><dt><span class="section"><a href="#WD_LogStop">B.7.17. WD_LogStop</a></span></dt><dt><span class="section"><a href="#WD_LogAdd">B.7.18. WD_LogAdd</a></span></dt></dl></dd><dt><span class="section"><a href="#Status_Strings">B.8. WinDriver Status Codes</a></span></dt><dd><dl><dt><span class="section"><a href="#wd_status_codes_intro">B.8.1. Introduction</a></span></dt><dt><span class="section"><a href="#wd_status_codes">B.8.2. Status Codes Returned by WinDriver</a></span></dt><dt><span class="section"><a href="#usbd_status_codes">B.8.3. Status Codes Returned by USBD</a></span></dt></dl></dd></dl></dd><dt><span class="appendix"><a href="#troubleshooting_n_support">C. Troubleshooting and Support</a></span></dt><dt><span class="appendix"><a href="#Appendix_Limitations">D. Evaluation Version Limitations</a></span></dt><dd><dl><dt><span class="section"><a href="#winpnp_eval_limits">D.1. Windows WinDriver Evaluation Limitations</a></span></dt><dt><span class="section"><a href="#linux_eval_limits">D.2. Linux WinDriver Evaluation Limitations</a></span></dt></dl></dd><dt><span class="appendix"><a href="#purchasing_wd">E. Purchasing WinDriver</a></span></dt><dt><span class="appendix"><a href="#Distrib_Legal">F. Distributing Your Driver &#8212; Legal Issues</a></span></dt><dt><span class="appendix"><a href="#additional_doc">G. Additional Documentation</a></span></dt></dl></div><div class="list-of-figures"><p><b>List of Figures</b></p><dl><dt>1.1. <a href="#wdusb_arch">WinDriver Architecture</a></dt><dt>2.1. <a href="#Monolithic">Monolithic Drivers</a></dt><dt>2.2. <a href="#Layered">Layered Drivers</a></dt><dt>2.3. <a href="#Miniport">Miniport Drivers</a></dt><dt>3.1. <a href="#USBENDPOINT">USB Endpoints</a></dt><dt>3.2. <a href="#wiz_usb_select_dev_ifc__overview_example">USB Pipes</a></dt><dt>3.3. <a href="#device_descriptors">Device Descriptors</a></dt><dt>3.4. <a href="#wdusb_arch_detailed">WinDriver USB Architecture</a></dt><dt>5.1. <a href="#wiz_start">Create a New Driver Project</a></dt><dt>5.2. <a href="#figure_wiz_select_device">Select Your Device</a></dt><dt>5.3. <a href="#wiz_usb_inf_info">DriverWizard INF File Information</a></dt><dt>5.4. <a href="#wiz_usb_inf_info_multi_ifc_ifc0">DriverWizard               Multi-Interface INF File Information &#8212; Specific Interface</a></dt><dt>5.5. <a href="#wiz_usb_inf_info_multi_ifc_comp">DriverWizard               Multi-Interface INF File Information &#8212; Composite Device</a></dt><dt>5.6. <a href="#wiz_usb_select_dev_ifc">Select Device Interface</a></dt><dt>5.7. <a href="#wiz_usb_rwpipe_ctr_custom_req">USB Control Transfers</a></dt><dt>5.8. <a href="#wiz_usb_pipe_in">Listen to Pipe</a></dt><dt>5.9. <a href="#wiz_usb_pipe_out_write">Write to Pipe</a></dt><dt>5.10. <a href="#wiz_usb_gen_code">Code Generation Options</a></dt><dt>7.1. <a href="#dbgm_log">Start Debug Monitor</a></dt><dt>7.2. <a href="#dbgm_dbg_opts">Debug Options</a></dt><dt>7.3. <a href="#dbgm_find">Search in wddebug_gui</a></dt><dt>8.1. <a href="#wiz_usb_data_exchange">USB Data Exchange</a></dt><dt>8.2. <a href="#usb_read_write">USB Read and Write</a></dt><dt>8.3. <a href="#wiz_usb_rwpipe_ctr_custom_req__usb_trans">Custom Request</a></dt><dt>8.4. <a href="#wiz_usb_rwpipe_ctr_req_list">Request List</a></dt><dt>8.5. <a href="#wiz_usb_ctr_req_GetDescDev_log">USB Request Log</a></dt><dt>9.1. <a href="#frontend_icon">The wdreg_frontend icon</a></dt><dt>9.2. <a href="#copy_driver_file">The dialog box wdreg_frontend will open if driver file is not located in the         Windows system directory</a></dt><dt>9.3. <a href="#load_driver">wdreg_frontend after successfully loading a sys file</a></dt><dt>9.4. <a href="#digital_sign_fail">Error message given by Windows when trying to install an unsigned driver</a></dt><dt>9.5. <a href="#driver_install_success">wdreg_frontend upon successfully installing a sys driver</a></dt><dt>B.1. <a href="#wd_usb_calling_sequence">WinDriver USB Calling Sequence</a></dt><dt>B.2. <a href="#wd_usb_structures">WinDriver USB Structures</a></dt><dt>B.3. <a href="#wd_general_calling_sequence_usb">WinDriver-API Calling Sequence</a></dt></dl></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="WD_Overview"></a>Chapter 1. WinDriver Overview</h1></div></div></div><p>
In this chapter you will explore the uses of WinDriver, and learn the basic steps
of creating your driver.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
This manual outlines WinDriver's support for <span xmlns:fo="http://www.w3.org/1999/XSL/Format">USB</span> devices.<br><span xmlns:fo="http://www.w3.org/1999/XSL/Format">
  WinDriver also supports development for PCI/ISA/EISA/CompactPCI/PCI Express devices. For
  detailed information regarding WinDriver's support for these buses, please
  refer to the WinDriver product page on our web site (<span style="white-space:nowrap"><a class="ulink" href="https://www.jungo.com/st/products/windriver/" target="_top">https://www.jungo.com/st/products/windriver/</a></span>) and to the
  <span class="jprintfilename"><strong>WinDriver PCI Manual</strong></span></span>,
which is available online at <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><a class="ulink" href="https://www.jungo.com/st/support/windriver/" target="_top">https://www.jungo.com/st/support/windriver/</a></span>.
</td></tr></table></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="wd_intro"></a>1.1. Introduction to WinDriver</h2></div></div></div><p>
WinDriver is a development toolkit that dramatically simplifies the difficult task
of creating device drivers and hardware-access applications. WinDriver includes a
wizard and code generation features that automatically detect your hardware and
generate the driver to access it from your application. The driver and
application you develop using WinDriver are source code compatible across all
supported operating systems<a class="xref" href="#WD_sup_platforms" title="1.6. What Platforms Does WinDriver Support?"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [1.6]</fo:inline></a>. The driver is binary
compatible across Windows 10/Server 2016/8.1/Server 2012 R2/8/Server 2012/7/Server 2008 R2/Server 2008.
</p><p>
WinDriver provides a complete solution for creating high-performance drivers.
</p><p>
Don't let the size of this manual fool you. WinDriver makes developing device
drivers an easy task that takes hours instead of months. Most of this manual
deals with the features that WinDriver offers to the advanced user. However,
most developers will find that reading this chapter and glancing
through the DriverWizard and function-reference chapters is all they need to
successfully write their driver.
</p><p>
WinDriver supports development for all <span xmlns:fo="http://www.w3.org/1999/XSL/Format">USB</span> chipsets.
  
</p><p>
Visit Jungo's web site at <a class="ulink" href="https://www.jungo.com" target="_top">https://www.jungo.com</a> for the latest news about WinDriver and
other driver development tools that Jungo offers.
</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_overview_background"></a>1.2. Background</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WD_overview_the_challenge"></a>1.2.1. The Challenge</h3></div></div></div><p>
In protected operating systems such as Windows and Linux, a programmer
cannot access hardware directly from the application level (user mode), where
development work is usually done. Hardware can only be accessed from within the
operating system itself (kernel mode or Ring-0), utilizing software modules
called device drivers. In order to access a custom hardware device from the
application level, a programmer must do the following:

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    Learn the internals of the operating system he is working on.
  </li><li class="listitem" style="list-style-type: disc">
    Learn how to write a device driver.
  </li><li class="listitem" style="list-style-type: disc">
    Learn new tools for developing/debugging in kernel mode (WDK, ETK,
    DDI/DKI).
  </li><li class="listitem" style="list-style-type: disc">
    Write the kernel-mode device driver that does the basic hardware
    input/output.
  </li><li class="listitem" style="list-style-type: disc">
    Write the application in user mode that accesses the hardware
    through the device driver written in kernel mode.
  </li><li class="listitem" style="list-style-type: disc">
    Repeat the first four steps for each new operating system on which
    the code should run.
  </li></ul></div><p>
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WD_overview_the_WD_solution"></a>1.2.2. The WinDriver Solution</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    <span class="b"><strong>Easy Development</strong></span> &#8212; WinDriver enables <span xmlns:fo="http://www.w3.org/1999/XSL/Format">Windows, and Linux</span> programmers to
    create <span xmlns:fo="http://www.w3.org/1999/XSL/Format">USB</span> based device drivers in an extremely short time. WinDriver
    allows you to create your driver in the familiar user-mode environment,
    using MS Visual Studio, C&#65279;+&#65279;+, GCC, Windows GCC, or any other appropriate compiler or development
    environment. You do not need to have any device-driver knowledge, nor do
    you have to be familiar with operating system internals, kernel
    programming, the WDK, ETK or DDI/DKI.
    </li><li class="listitem" style="list-style-type: disc">
    <span class="b"><strong>Cross Platform</strong></span> &#8212; The driver created with WinDriver will run on
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format">Windows 10/Server 2016/8.1/Server 2012 R2/8/Server 2012/7/Server 2008 R2/Server 2008, Windows 10 IoT/Embedded Windows 8.1/8/7, and Linux</span>. In other words &#8212; write it once, run it on many
    platforms.
    </li><li class="listitem" style="list-style-type: disc">
    <span class="b"><strong>Friendly Wizards</strong></span> &#8212; DriverWizard (included) is a graphical
    diagnostics tool that lets you view 
    the device's resources and test the communication with the hardware with
    just a few mouse clicks, before writing a single line of code. Once the
    device is operating to your satisfaction, DriverWizard creates the skeletal
    driver source code, giving access-functions to all the resources on the
    hardware.
    </li><li class="listitem" style="list-style-type: disc">
    <span class="b"><strong>Kernel-Mode Performance</strong></span> &#8212; WinDriver's API is optimized for
    performance.
    
    </li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_overview_conclusion"></a>1.3. Conclusion</h2></div></div></div><p>
Using WinDriver, a developer need only do the following to create an
application that accesses the custom hardware:

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    Start DriverWizard and detect the hardware and its resources.
  </li><li class="listitem" style="list-style-type: disc">
    Automatically generate the device-driver code from within DriverWizard, or
    use one of the WinDriver samples as the basis for the application.
      </li><li class="listitem" style="list-style-type: disc">
    Modify the user-mode application, as needed, using the generated/sample
    functions, to implement the desired functionality for your application.
  </li></ul></div><p>
</p><p>
Your hardware-access application will run on all the supported platforms<a class="xref" href="#WD_sup_platforms" title="1.6. What Platforms Does WinDriver Support?"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [1.6]</fo:inline></a> &#8212; just recompile the code for the target
platform. The code is binary-compatible across Windows 10/Server 2016/8.1/Server 2012 R2/8/Server 2012/7/Server 2008 R2/Server 2008 platforms;
there is no need to rebuild the code when porting it across binary-compatible
platforms.
</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_benefits"></a>1.4. WinDriver Benefits</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    Easy user-mode driver development.
  </li><li class="listitem" style="list-style-type: disc">
    Friendly DriverWizard allows hardware diagnostics without writing a single
    line of code.
  </li><li class="listitem" style="list-style-type: disc">
    Automatically generates the driver code for the project in
    C<span xmlns:fo="http://www.w3.org/1999/XSL/Format">, Visual Basic .NET,</span> or C&#65279;#.
    </li><li class="listitem" style="list-style-type: disc">
    Supports any <span xmlns:fo="http://www.w3.org/1999/XSL/Format">USB</span> device, regardless of manufacturer.
  </li><li class="listitem" style="list-style-type: disc">
    Applications are binary compatible across Windows 10/Server 2016/8.1/Server 2012 R2/8/Server 2012/7/Server 2008 R2/Server 2008.
    </li><li class="listitem" style="list-style-type: disc">
    Applications are source code compatible across all supported operating
    systems &#8212; <span xmlns:fo="http://www.w3.org/1999/XSL/Format">Windows 10/Server 2016/8.1/Server 2012 R2/8/Server 2012/7/Server 2008 R2/Server 2008, Windows 10 IoT/Embedded Windows 8.1/8/7, and Linux</span>.
    </li><li class="listitem" style="list-style-type: disc">
    Can be used with common development environments, including MS Visual Studio, C&#65279;+&#65279;+, GCC, Windows GCC,
    or any other appropriate compiler/environment.
    
    </li><li class="listitem" style="list-style-type: disc">
    No WDK, ETK, DDI or any system-level programming knowledge required.
  </li><li class="listitem" style="list-style-type: disc">
    Supports multiple CPUs.
    </li><li class="listitem" style="list-style-type: disc">
    Includes dynamic driver loader.
  </li><li class="listitem" style="list-style-type: disc">
    Comprehensive documentation and help files.
  </li><li class="listitem" style="list-style-type: disc">
    Detailed examples in C<span xmlns:fo="http://www.w3.org/1999/XSL/Format">, Visual Basic .NET,</span> or C&#65279;#.
  </li><li class="listitem" style="list-style-type: disc">
    WinDriver Windows drivers are compliant with Microsoft's Windows Certification Program
    </li><li class="listitem" style="list-style-type: disc">
    Two months of free technical support.
  </li><li class="listitem" style="list-style-type: disc">
    No run-time fees or royalties.
  </li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_arch"></a>1.5. WinDriver Architecture</h2></div></div></div><p>
</p><div class="figure"><a name="wdusb_arch"></a><p class="title"><b>Figure 1.1. WinDriver Architecture</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/wdusb_arch.png" alt="WinDriver Architecture"></div></div></div><p><br class="figure-break">
</p><p>
For hardware access, your application calls one of the WinDriver user-mode
functions. The user-mode function calls the WinDriver kernel, which accesses
the hardware for you through the native calls of the operating system.
</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_sup_platforms"></a>1.6. What Platforms Does WinDriver Support?</h2></div></div></div><p>
WinDriver supports the following operating systems:

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    Windows 10/Server 2016/8.1/Server 2012 R2/8/Server 2012/7/Server 2008 R2/Server 2008 and Windows 10 IoT/Embedded Windows 8.1/8/7 &#8212; henceforth collectively:
    <span class="b"><strong>Windows</strong></span></li><li class="listitem" style="list-style-type: disc">
    Linux
  </li></ul></div><p>
</p><p>
The same source code will run on all supported platforms &#8212; simply
recompile it for the target platform. The source code is binary compatible
across Windows 10/Server 2016/8.1/Server 2012 R2/8/Server 2012/7/Server 2008 R2/Server 2008;
WinDriver executables can be ported among the binary-compatible platforms without
recompilation.
</p><p>
Even if your code is meant only for one of the supported operating systems,
using WinDriver will give you the flexibility to move your driver to another
operating system in the future without needing to change your code.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
  OS-specific support is provided only for operating systems with official
  vendor support.
  </td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_eval_limits"></a>1.7. Limitations of the Different Evaluation Versions</h2></div></div></div><p>
All the evaluation versions of
<span xmlns:fo="http://www.w3.org/1999/XSL/Format">the WinDriver USB Host toolkit</span>

are full featured. No functions are limited or crippled in any way. The
evaluation version of WinDriver varies from the registered version in the
following ways:

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    Each time WinDriver is activated, an <em class="guilabel">Unregistered</em>
    message appears.
  </li><li class="listitem" style="list-style-type: disc">
    When using DriverWizard, a dialogue box with a message stating that an
    evaluation version is being run appears on every interaction with the
    hardware.
  </li><li class="listitem" style="list-style-type: disc">
    In the Linux the driver will remain operational for 60 minutes, after
    which time it must be restarted.
  </li><li class="listitem" style="list-style-type: disc">
    The Windows evaluation version expires 30 days from the date of
    installation.
  </li></ul></div><p>
</p><p>
For more details please refer to <a class="xref" href="#Appendix_Limitations" title="Appendix D. Evaluation Version Limitations"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Appendix D</fo:inline></a>.
</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_dev_overview"></a>1.8. How Do I Develop My Driver with WinDriver?</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WD_dev_winnoce_mac_unix"></a>1.8.1. On Windows and Linux</h3></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
    Start DriverWizard and use it to diagnose your hardware &#8212; see details
    in <a class="xref" href="#driverwizard" title="Chapter 5. Using DriverWizard"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Chapter 5</fo:inline></a>.
  </li><li class="listitem">
    Let DriverWizard generate skeletal code for your driver, or use one of the
    WinDriver samples as the basis for your driver application.
      </li><li class="listitem">
    Modify the generated/sample code to suit your application's needs.
  </li><li class="listitem">
    Run and debug your driver.
  </li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
The code generated by DriverWizard is a diagnostics program that contains
functions that perform data transfers on the device's pipes, send requests to
the control pipe, change the active alternate setting, reset pipes, and more.
</td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_toolkit_include"></a>1.9. What Does the WinDriver Toolkit Include?</h2></div></div></div>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    Two months of basic technical support (via support center)
  </li><li class="listitem" style="list-style-type: disc">
    WinDriver modules
  </li><li class="listitem" style="list-style-type: disc">
     Utilities
  </li><li class="listitem" style="list-style-type: disc">
    Samples
  </li></ul></div>
<div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WD_modules"></a>1.9.1. WinDriver Modules</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    WinDriver (<span class="jdirectory"><strong>WinDriver/include</strong></span>) &#8212; the general
    purpose hardware access toolkit. The main files here are

    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
        <span class="jprintfilename"><strong>windrvr.h</strong></span>: Declarations and
        definitions of WinDriver's basic API.
        </li><li class="listitem">
        <span class="jprintfilename"><strong>wdu_lib.h</strong></span>: Declarations and
        definitions of the WinDriver USB (WDU) library, which provides convenient
        wrapper USB APIs.
        
        </li><li class="listitem">
        <span class="jprintfilename"><strong>windrvr_int_thread.h</strong></span>: Declarations of
        convenient wrapper functions to simplify interrupt handling.
        
        </li><li class="listitem">
        <span class="jprintfilename"><strong>windrvr_events.h</strong></span>: Declarations of APIs
        for handling Plug&#65279;-&#65279;and&#65279;-&#65279;Play and power management events.
        </li><li class="listitem">
        <span class="jprintfilename"><strong>utils.h</strong></span>: Declarations of general
        utility functions.
        </li><li class="listitem">
        <span class="jprintfilename"><strong>status_strings.h</strong></span>: Declarations of API
        for converting WinDriver status codes to descriptive error strings.
        </li></ul></div></li><li class="listitem" style="list-style-type: disc">
    DriverWizard (<span class="jprintfilename"><strong>WinDriver/wizard/wdwizard</strong></span>) &#8212; a graphical
    application that diagnoses your hardware and enables you to easily generate
    code for your driver (refer to <a class="xref" href="#driverwizard" title="Chapter 5. Using DriverWizard"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Chapter 5</fo:inline></a> for
    details).
    </li><li class="listitem" style="list-style-type: disc">
    Debug Monitor &#8212; a debugging tool that collects information about your
    driver as it runs. This tool is available both as a fully graphical
    application &#8212; <span class="jprintfilename"><strong>WinDriver/util/wddebug_gui</strong></span>
    &#8212; and as a console-mode application &#8212;
    <span class="jprintfilename"><strong>WinDriver/util/wddebug</strong></span>.<br>
    For details regarding the Debug Monitor, refer to
    <a class="xref" href="#Debug_Monitor" title="7.2. Debug Monitor"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 7.2</fo:inline></a>.
    </li><li class="listitem" style="list-style-type: disc">
    WinDriver distribution package (<span class="jdirectory"><strong>WinDriver&#65279;/&#65279;redist</strong></span>) &#8212; the files you
    include in the driver distribution to customers.
    </li><li class="listitem" style="list-style-type: disc">
    This manual &#8212; the full WinDriver manual (this document), in different
    formats, can be found under the <span class="jdirectory"><strong>WinDriver/docs</strong></span>
    directory.
    </li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WD_utilities"></a>1.9.2. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">Utilities</span></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    <span class="jprintfilename"><strong>usb_diag.exe</strong></span>
    (<span class="jdirectory"><strong>WinDriver/util/usb_diag.exe</strong></span>) &#8212; enables the
    user to view the resources of connected USB devices and communicate with
    the devices &#8212; transfer data to/from the device, set the active
    alternate setting, reset pipes, etc.<br>
    On Windows the program identifies all devices that have been registered to
    work with WinDriver using an INF file. On the other supported operating
    systems the program identifies all USB devices connected to the target
    platform.
    </li><li class="listitem" style="list-style-type: disc">
    <span class="jprintfilename"><strong>pci_dump.exe</strong></span>
    (<span class="jdirectory"><strong>WinDriver/util/pci_dump.exe</strong></span>) &#8212; used to obtain
    a dump of the PCI configuration registers of the installed PCI cards.
    </li><li class="listitem" style="list-style-type: disc">
    <span class="jprintfilename"><strong>pci_scan.exe</strong></span>
    (<span class="jdirectory"><strong>WinDriver/util/pci_scan.exe</strong></span>) &#8212; used to obtain
    a list of the PCI cards installed and the resources allocated for each
    card.
    </li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WD_samples"></a>1.9.3. Samples</h3></div></div></div>
<p>
WinDriver includes a variety of samples that demonstrate how to use WinDriver's API
to communicate with your device and perform various driver tasks.

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    C samples: found under the <span class="jdirectory"><strong>WinDriver/samples</strong></span>
    directory.<br>
    These samples also include the source code for the utilities listed
    above<a class="xref" href="#WD_utilities" title="1.9.2. Utilities"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [1.9.2]</fo:inline></a>.
  </li><li class="listitem" style="list-style-type: disc">
    Python samples: found under the
    <span class="jdirectory"><strong>WinDriver/samples/python</strong></span> directory.<br>
    These samples also include the source code for the utilities listed
    above<a class="xref" href="#WD_utilities" title="1.9.2. Utilities"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [1.9.2]</fo:inline></a>.
  </li><li class="listitem" style="list-style-type: disc">
    .NET C&#65279;#
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format">and Visual Basic .NET</span>
    samples (Windows): found under the
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>WinDriver\csharp.net</strong></span></span><span xmlns:fo="http://www.w3.org/1999/XSL/Format">
      and <span style="white-space:nowrap"><span class="jdirectory"><strong>WinDriver\vb.net</strong></span></span>
      directories (respectively).
   </span></li></ul></div><p>
</p>
</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="wd_can_distrib"></a>1.10. Can I Distribute the Driver Created with WinDriver?</h2></div></div></div><p>
Yes. WinDriver is purchased as a development toolkit, and any device driver
created using WinDriver may be distributed, royalties free, in as many
copies as you wish. See the license agreement at
(<span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>WinDriver/docs/</strong></span><span class="jprintfilename"><strong>wd_license.pdf</strong></span></span>) for more details.
</p></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="understanding_device_drivers"></a>Chapter 2. Understanding Device Drivers</h1></div></div></div><p>
This chapter provides you with a general introduction to device drivers and
takes you through the structural elements of a device driver.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
Using WinDriver, you do not need to familiarize yourself with the internal
workings of driver development. As explained in
<a class="xref" href="#WD_Overview" title="Chapter 1. WinDriver Overview"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Chapter 1</fo:inline></a> of the manual, WinDriver enables you to
communicate with your hardware and develop a driver for your device from the
user mode, using only WinDriver's simple APIs, without any need for driver or
kernel development knowledge.
</td></tr></table></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="device_driver_overview"></a>2.1. Device Driver Overview</h2></div></div></div><p>
Device drivers are the software segments that provides an interface between
the operating system and the specific hardware devices &#8212; such as
terminals, disks, tape drives, video cards, and network media. The device
driver brings the device into and out of service, sets hardware parameters in
the device, transmits data from the kernel to the device, receives data from
the device and passes it back to the kernel, and handles device errors.
</p><p>
A driver acts like a translator between the device and programs that use the
device. Each device has its own set of specialized commands that only its
driver knows. In contrast, most programs access devices by using generic
commands. The driver, therefore, accepts generic commands from a program and
then translates them into specialized commands for the device.
</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="drivers_func_classification"></a>2.2. Classification of Drivers According to Functionality</h2></div></div></div><p>
There are numerous driver types, differing in their functionality. This
subsection briefly describes three of the most common driver types.
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mono_drivers"></a>2.2.1. Monolithic Drivers</h3></div></div></div><p>
Monolithic drivers are device drivers that embody all the functionality needed
to support a hardware device. A monolithic driver is accessed by one or more
user applications, and directly drives a hardware device. The driver
communicates with the application through I/&#65279;O control commands (IOCTLs) and
drives the hardware using calls to the different WDK, ETK, DDI/DKI functions.
</p><div class="figure"><a name="Monolithic"></a><p class="title"><b>Figure 2.1. Monolithic Drivers</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/Monolithic.png" height="" alt="Monolithic Drivers"></div></div></div><p><br class="figure-break">
</p><p>
Monolithic drivers are supported in all operating systems including all
Windows platforms and all Unix platforms.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="layered_drivers"></a>2.2.2. Layered Drivers</h3></div></div></div><p>
Layered drivers are device drivers that are part of a stack of device drivers
that together process an I/&#65279;O request. An example of a layered driver is a
driver that intercepts calls to the disk and encrypts/decrypts all data being
transferred to/from the disk. In this example, a driver would be hooked on to
the top of the existing driver and would only do the encryption/decryption.
</p><p>
Layered drivers are sometimes also known as filter drivers, and are supported
in all operating systems including all Windows platforms and all Unix
platforms.

</p><div class="figure"><a name="Layered"></a><p class="title"><b>Figure 2.2. Layered Drivers</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/Layered.png" height="" alt="Layered Drivers"></div></div></div><p><br class="figure-break">
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="miniport_drivers"></a>2.2.3. Miniport Drivers</h3></div></div></div><p>
A Miniport driver is an add-on to a class driver that supports miniport
drivers. It is used so the miniport driver does not have to implement all of
the functions required of a driver for that class. The class driver provides
the basic class functionality for the miniport driver. <br>
A class driver is a driver that supports a group of devices of common
functionality, such as all HID devices or all network devices.
</p><p>
Miniport drivers are also called miniclass drivers or minidrivers, and are
supported in the Windows 7 and higher operating systems.

</p><div class="figure"><a name="Miniport"></a><p class="title"><b>Figure 2.3. Miniport Drivers</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/Miniport.png" height="" alt="Miniport Drivers"></div></div></div><p><br class="figure-break">
</p><p>
The Windows 7 and higher operating systems provide several driver classes (called
ports) that handle the common functionality of their class. It is then up to
the user to add only the functionality that has to do with the inner workings
of the specific hardware.  The NDIS miniport driver is one example of such a
driver. The NDIS miniport framework is used to create network drivers that hook up to Windows's communication stacks, and are therefore accessible to common communication calls used by applications. The Windows kernel provides drivers for the various communication stacks and other code that is common to communication cards. Due to the NDIS framework, the network card developer does not have to write all of this code, only the code that is specific to the network card he is developing.
</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="os_classification"></a>2.3. Classification of Drivers According to Operating Systems</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="wdm_drivers_overview"></a>2.3.1. WDM Drivers</h3></div></div></div><p>
Windows Driver Model (WDM) drivers are kernel-mode drivers within the Windows operating
systems. WDM works by channeling some of the work of the device driver into
portions of the code that are integrated into the operating system. These
portions of code handle all of the low&#65279;-&#65279;level buffer management, including
DMA and Plug&#65279;-&#65279;and&#65279;-&#65279;Play (Pnp) device enumeration.<br>
WDM drivers are PnP drivers that support power management protocols, and
include monolithic drivers, layered drivers and miniport drivers.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="unix_drivers_overview"></a>2.3.2. Unix Device Drivers</h3></div></div></div><p>
In the classic Unix driver model, devices belong to one of three categories:
character (char) devices, block devices and network devices. Drivers that
implement these devices are correspondingly known as char drivers, block
drivers or network drivers. Under Unix, drivers are code units linked into the
kernel that run in privileged kernel mode. Generally, driver code runs on
behalf of a user-mode application. Access to Unix drivers from user-mode
applications is provided via the file system. In other words, devices appear
to the applications as special device files that can be opened.
</p><p>
Unix device drivers are either layered or monolithic drivers. A monolithic
driver can be perceived as a one-layer layered driver.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="linux_drivers_overview"></a>2.3.3. Linux Device Drivers</h3></div></div></div><p>
Linux device drivers are based on the classic Unix device driver model<a class="xref" href="#unix_drivers_overview" title="2.3.2. Unix Device Drivers"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [2.3.2]</fo:inline></a>. In addition, Linux introduces some new
characteristics.
</p><p>
Under Linux, a block device can be accessed like a character device, as in
Unix, but also has a block-oriented interface that is invisible to the user or
application.
</p><p>
Traditionally, under Unix, device drivers are linked with the kernel, and the
system is brought down and restarted after installing a new driver. Linux
introduces the concept of a dynamically loadable driver called a module. Linux
modules can be loaded or removed dynamically without requiring the system to
be shut down. A Linux driver can be written so that it is statically linked or
written in a modular form that allows it to be dynamically loaded. This makes
Linux memory usage very efficient because modules can be written to probe for
their own hardware and unload themselves if they cannot find the hardware they
are looking for.
</p><p>
Like Unix device drivers, Linux device drivers are either layered or
monolithic drivers.
</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="driver_entry_point"></a>2.4. The Entry Point of the Driver</h2></div></div></div><p>
Every device driver must have one main entry point, like the
<code class="jfunc">main</code><span class="jfunc">()</span> function in a C console application. This entry point is
called <code class="jfunc">DriverEntry</code><span class="jfunc">()</span> in Windows and <code class="jfunc">init_module</code><span class="jfunc">()</span> in
Linux. When the operating system loads the device driver, this driver entry
procedure is called.
</p><p>
There is some global initialization that every driver needs to perform only
once when it is loaded for the first time. This global initialization is the
responsibility of the
<code class="jfunc">DriverEntry</code><span class="jfunc">()</span>/<code class="jfunc">init_module</code><span class="jfunc">()</span> routine. The entry
function also registers which driver callbacks will be called by the operating
system. These driver callbacks are operating system requests for services from
the driver. In Windows, these callbacks are called <em class="it">dispatch routines</em>,
and in Linux they are called <em class="it">file operations</em>. Each registered callback
is called by the operating system as a result of some criteria, such as
disconnection of hardware, for example.
</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="hw_driver_assoc"></a>2.5. Associating the Hardware with the Driver</h2></div></div></div><p>
Operating systems differ in the ways they associate a device with a specific
driver.
</p><p>
In Windows, the hardware-driver association is performed via an INF file,
which registers the device to work with the driver. This association is
performed before the <code class="jfunc">DriverEntry</code><span class="jfunc">()</span> routine is called. The
operating system recognizes the device, checks its database to identify which
INF file is associated with the device, and according to the INF file, calls
the driver's entry point.
</p><p>
In Linux, the hardware-driver association is defined in the driver's
<code class="jfunc">init_module</code><span class="jfunc">()</span> routine. This routine includes a callback that
indicates which hardware the driver is designated to handle. The operating
system calls the driver's entry point, based on the definition in the code.
</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="communicating_with_drivers"></a>2.6. Communicating with Drivers</h2></div></div></div><p>
Communication between a user-mode application and the driver that drives the
hardware, is implemented differently for each operating system, using the
custom OS Application Programming Interfaces (APIs).
</p><p>
On Windows, and Linux, the application can use the OS
file-access API to open a handle to the driver (e.g., using the Windows
<code class="jfunc">CreateFile</code><span class="jfunc">()</span> function or using the Linux <code class="jfunc">open</code><span class="jfunc">()</span>
function), and then read and write from/to the device by passing the handle to
the relevant OS file-access functions (e.g., the Windows
<code class="jfunc">ReadFile</code><span class="jfunc">()</span> and <code class="jfunc">WriteFile</code><span class="jfunc">()</span> functions, or the Linux
<code class="jfunc">read</code><span class="jfunc">()</span> and <code class="jfunc">write</code><span class="jfunc">()</span> functions).
</p><p>
The application sends requests to the driver via I/&#65279;O control (IOCTL) calls,
using the custom OS APIs provided for this purpose (e.g., the Windows
<code class="jfunc">DeviceIoControl</code><span class="jfunc">()</span> function, or the Linux <code class="jfunc">ioctl</code><span class="jfunc">()</span> 
function).
<br>
The data passed between the driver and the application via the IOCTL calls is
encapsulated using custom OS mechanisms. For example, on Windows the data is
passed via an I/&#65279;O Request Packet (IRP) structure, and is encapsulated by the
I/&#65279;O Manager.
</p></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="wdusb_overview"></a>Chapter 3. WinDriver USB Overview</h1></div></div></div><p>
This chapter explores the basic characteristics of the Universal Serial Bus (USB) and
introduces WinDriver USB's features and architecture.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
The references to the WinDriver USB toolkit in this chapter relate to
the standard WinDriver USB toolkit for development of USB host drivers.
</td></tr></table></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="USB_intro"></a>3.1. Introduction to USB</h2></div></div></div><p>
USB (Universal Serial Bus) is an industry standard extension to the PC architecture for
attaching peripherals to the computer. It was originally developed in 1995 by
leading PC and telecommunication industry companies, such as Intel, Compaq,
Microsoft and NEC. USB was developed to meet several needs, among them the
needs for an inexpensive and widespread connectivity solution for peripherals
in general and for computer telephony integration in particular, an easy-to-use
and flexible method of reconfiguring the PC, and a solution for adding a large
number of external peripherals. The USB standard meets these needs.
</p><p>
The USB specification allows for the connection of a maximum of 127 peripheral
devices (including hubs) to the system, either on the same port or on
different ports.
</p><p>
USB also supports Plug&#65279;-&#65279;and&#65279;-&#65279;Play installation and hot swapping. The <span class="b"><strong>USB 1.1</strong></span>
standard supports both isochronous and asynchronous data transfers and has dual
speed data transfer: 1.5 Mb/&#65279;s (megabits per second) for <span class="b"><strong>low-speed</strong></span>
USB devices and 12 Mb/&#65279;s for <span class="b"><strong>full-speed</strong></span> USB devices (much faster
than the original serial port). Cables connecting the device to the PC can be
up to five meters (16.4 feet) long. USB includes built-in power distribution
for low power devices and can provide limited power (up to 500 mA of current)
to devices attached on the bus.
</p><p>
The <span class="b"><strong>USB 2.0</strong></span> standard supports a signalling rate of 480 Mb/&#65279;s, known
as <span class="b"><strong>'high-speed'</strong></span>, which is 40 times faster than the USB 1.1 full-speed
transfer rate.<br>
USB 2.0 is fully forward- and backward-compatible with USB 1.1 and uses
existing cables and connectors.<br>
USB 2.0 supports connections with PC peripherals that provide expanded
functionality and require wider bandwidth. In addition, it can handle a larger
number of peripherals simultaneously.<br>
USB 2.0 enhances the user's experience of many applications, including
interactive gaming, broadband Internet access, desktop and Web publishing,
Internet services and conferencing.
</p><p>
Because of its benefits (described also in <a class="xref" href="#WD_USB_benefits" title="3.2. WinDriver USB Benefits"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 3.2</fo:inline></a>
below), USB is currently enjoying broad market acceptance.
</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_USB_benefits"></a>3.2. WinDriver USB Benefits</h2></div></div></div><p>
This section describes the main benefits of the USB standard and the WinDriver USB
toolkit, which supports this standard:

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    External connection, maximizing ease of use
  </li><li class="listitem" style="list-style-type: disc">
    Self identifying peripherals supporting automatic mapping of function to
    driver and configuration
  </li><li class="listitem" style="list-style-type: disc">
    Dynamically attachable and re-configurable peripherals
  </li><li class="listitem" style="list-style-type: disc">
    Suitable for device bandwidths ranging from a few Kb/&#65279;s to hundreds of
    Mb/&#65279;s
  </li><li class="listitem" style="list-style-type: disc">
    Supports isochronous as well as asynchronous transfer types over the same
    set of wires
  </li><li class="listitem" style="list-style-type: disc">
    Supports simultaneous operation of many devices (multiple connections)
  </li><li class="listitem" style="list-style-type: disc">
    Supports a data transfer rate of up to 480 Mb/&#65279;s (high-speed) for USB
    2.0 (for the operating systems that officially support this standard) and
    up to 12 Mb/&#65279;s (full-speed) for USB 1.1
  </li><li class="listitem" style="list-style-type: disc">
     Guaranteed bandwidth and low latencies; appropriate for telephony, audio,
     etc. (isochronous transfer may use almost the entire bus bandwidth)
   </li><li class="listitem" style="list-style-type: disc">
     Flexibility: supports a wide range of packet sizes and a wide range of
     data transfer rates
  </li><li class="listitem" style="list-style-type: disc">
    Robustness: built-in error handling mechanism and dynamic insertion and
    removal of devices with no delay observed by the user
  </li><li class="listitem" style="list-style-type: disc">
    Synergy with PC industry; Uses commodity technologies
  </li><li class="listitem" style="list-style-type: disc">
    Optimized for integration in peripheral and host hardware
  </li><li class="listitem" style="list-style-type: disc">
    Low-cost implementation, therefore suitable for development of low-cost
    peripherals
  </li><li class="listitem" style="list-style-type: disc">
    Low-cost cables and connectors
  </li><li class="listitem" style="list-style-type: disc">
    Built-in power management and distribution
  </li><li class="listitem" style="list-style-type: disc">
    Specific library support for custom USB HID devices
  </li></ul></div><p>
</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="USB_components"></a>3.3. USB Components</h2></div></div></div><p>
The Universal Serial Bus (USB) consists of the following primary components:

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><span class="b"><strong>USB Host</strong></span>: The USB host platform is where the USB host controller is
    installed and where the client software/device driver runs. The <em class="it">USB
      Host Controller</em> is the interface between the host and the USB
    peripherals. The host is responsible for detecting the insertion and
    removal of USB devices, managing the control and data flow between the host
    and the devices, providing power to attached devices and more.
  </li><li class="listitem" style="list-style-type: disc"><span class="b"><strong>USB Hub</strong></span>: A USB device that allows multiple USB devices to attach to
    a single USB port on a USB host. Hubs on the back plane of the hosts are
    called <em class="it">root hubs</em>. Other hubs are called <em class="it">external hubs</em>.
  </li><li class="listitem" style="list-style-type: disc"><span class="b"><strong>USB Function</strong></span>: A USB device that can transmit or receive data or
    control information over the bus and that provides a function. A function
    is typically implemented as a separate peripheral device that plugs into a
    port on a hub using a cable. However, it is also possible to create a
    <em class="it">compound device</em>, which is a physical package that implements
    multiple functions and an embedded hub with a single USB cable. A compound
    device appears to the host as a hub with one or more non-removable USB
    devices, which may have ports to support the connection of external
    devices.
  </li></ul></div><p>
</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="USB_data_flow"></a>3.4. Data Flow in USB Devices</h2></div></div></div><p>
During the operation of a USB device, the host can initiate a flow of data
between the client software and the device.
</p><p>
Data can be transferred between the host and only one device at a time
(<em class="it">peer to peer communication</em>). However, two hosts cannot communicate
directly, nor can two USB devices (with the exception of On-The-Go (OTG)
devices, where one device acts as the master (host) and the other as the
slave.)
</p><p>
The data on the USB bus is transferred via pipes that run between software
memory buffers on the host and endpoints on the device.
</p><p>
Data flow on the USB bus is half-duplex, i.e., data can be transmitted only in
one direction at a given time.
</p><p>
An <span class="b"><strong>endpoint</strong></span> is a uniquely identifiable entity on a USB device, which
is the source or terminus of the data that flows from or to the device. Each
USB device, logical or physical, has a collection of independent endpoints.
The three USB speeds (low, full and high) all support one bi-directional
control endpoint (endpoint zero) and 15 unidirectional endpoints. Each
unidirectional endpoint can be used for either inbound or outbound transfers,
so theoretically there are 30 supported endpoints.<br>

Each endpoint has the following attributes: bus access frequency,
bandwidth requirement, endpoint number, error handling mechanism, maximum
packet size that can be transmitted or received, transfer type and direction
(into or out of the device).

</p><div class="figure"><a name="USBENDPOINT"></a><p class="title"><b>Figure 3.1. USB Endpoints</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/USBENDPOINT.png" height="" alt="USB Endpoints"></div></div></div><p><br class="figure-break">
</p><p>
A <span class="b"><strong>pipe</strong></span> is a logical component that represents an association between an
endpoint on the USB device and software on the host. Data is moved to and from
a device through a pipe. A pipe can be either a stream pipe or a message pipe,
depending on the type of data transfer used in the pipe. <em class="it">Stream pipes</em>
handle interrupt, bulk and isochronous transfers, while <em class="it">message pipes</em>
support the control transfer type. The different USB transfer types are
discussed below<a class="xref" href="#USB_data_transfer_types" title="3.6. USB Data Transfer Types"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [3.6]</fo:inline></a>.
</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="USB_data_exchange"></a>3.5. USB Data Exchange</h2></div></div></div><p>
The USB standard supports two kinds of data exchange between a host and a
device: functional data exchange and control exchange.

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><span class="b"><strong>Functional Data Exchange</strong></span> is <span xmlns:fo="http://www.w3.org/1999/XSL/Format">
    used to move data to and from the device. There are three types of USB data
    transfers: Bulk, Interrupt and Isochronous
   </span>.
  </li><li class="listitem" style="list-style-type: disc"><span class="b"><strong>Control Exchange</strong></span> is <span xmlns:fo="http://www.w3.org/1999/XSL/Format">used to determine device identification and
    configuration requirements, and to configure a device; it can also be used
    for other device-specific purposes, including control of other pipes on the
    device.<br> Control exchange takes place via a control pipe &#8212; the
    default <em class="it">pipe 0</em>, which always exists. The control transfer consists
    of a <em class="it">setup stage</em> (in which a setup packet is sent from the host to
    the device), an optional <em class="it">data stage</em> and a <em class="it">status
    stage</em>.</span></li></ul></div><p>
</p><p>
<a class="xref" href="#wiz_usb_select_dev_ifc__overview_example" title="Figure 3.2. USB Pipes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Figure 3.2</fo:inline></a> below depicts a USB device
with one bi-directional control pipe (endpoint) and two functional data
transfer pipes (endpoints), as identified by WinDriver's DriverWizard utility
(discussed in <a class="xref" href="#driverwizard" title="Chapter 5. Using DriverWizard"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Chapter 5</fo:inline></a>).

</p><div class="figure"><a name="wiz_usb_select_dev_ifc__overview_example"></a><p class="title"><b>Figure 3.2. USB Pipes</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/wiz_usb_select_dev_ifc.png" height="" alt="USB Pipes"></div></div></div><p><br class="figure-break">
</p><p>
More information on how to implement the control transfer by sending setup
packets can be found in <a class="xref" href="#USB_Control_Trans" title="8.2. USB Control Transfers"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 8.2</fo:inline></a>.
</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="USB_data_transfer_types"></a>3.6. USB Data Transfer Types</h2></div></div></div><p>
The USB device (function) communicates with the host by transferring data
through a pipe between a memory buffer on the host and an endpoint on the
device. USB supports four different transfer types. A type is selected for a
specific endpoint according to the requirements of the device and the
software. The transfer type of a specific endpoint is determined in the
endpoint descriptor.
</p><p>
The USB specification provides for the following data transfer types:
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="USB_control_trans"></a>3.6.1. Control Transfer</h3></div></div></div><p>
Control Transfer is mainly intended to support configuration, command and
status operations between the software on the host and the device.
</p><p>
This transfer type is used for low-, full- and high-speed devices.
</p><p>
Each USB device has at least one control pipe (default pipe), which provides
access to the configuration, status and control information.
</p><p>
Control transfer is bursty, non-periodic communication.
</p><p>
The control pipe is bi-directional &#8212; i.e., data can flow in both
directions.
</p><p>
Control transfer has a robust error detection, recovery and retransmission
mechanism and retries are made without the involvement of the driver.
</p><p>
The maximum packet size for control endpoints can be only 8 bytes for
low-speed devices; 8, 16, 32, or 64 bytes for full-speed devices; and only 64
bytes for high-speed devices.
</p><p>
For more in-depth information regarding USB control transfers and their
implementation, refer to <a class="xref" href="#USB_Control_Trans" title="8.2. USB Control Transfers"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 8.2</fo:inline></a> of the manual.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="USB_isoch_trans"></a>3.6.2. Isochronous Transfer</h3></div></div></div><p>
Isochronous Transfer is most commonly used for time-dependent information,
such as multimedia streams and telephony.
</p><p>
This transfer type can be used by full-speed and high-speed devices, but not
by low-speed devices.
</p><p>
Isochronous transfer is periodic and continuous.
</p><p>
The isochronous pipe is unidirectional, i.e., a certain endpoint can either
transmit or receive information. Bi-directional isochronous communication
requires two isochronous pipes, one in each direction.
</p><p>
USB guarantees the isochronous transfer access to the USB bandwidth (i.e., it
reserves the required amount of bytes of the USB frame) with bounded latency,
and guarantees the data transfer rate through the pipe, unless there is less
data transmitted.
</p><p>
Since timeliness is more important than correctness in this type of transfer,
no retries are made in case of error in the data transfer. However, the data
receiver can determine that an error occurred on the bus.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="USB_int_trans"></a>3.6.3. Interrupt Transfer</h3></div></div></div><p>
Interrupt Transfer is intended for devices that send and receive small amounts
of data infrequently or in an asynchronous time frame.
</p><p>
This transfer type can be used for low-, full- and high-speed devices.
</p><p>
Interrupt transfer type guarantees a maximum service period and that delivery
will be re-attempted in the next period if there is an error on the bus.
</p><p>
The interrupt pipe, like the isochronous pipe, is unidirectional and
periodical.
</p><p>
The maximum packet size for interrupt endpoints can be 8 bytes or less for
low-speed devices; 64 bytes or less for full-speed devices; and 1,024 bytes or
less for high-speed devices.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="USB_bulk_trans"></a>3.6.4. Bulk Transfer</h3></div></div></div>
<p>
Bulk Transfer is typically used for devices that transfer large amounts of
non-time sensitive data, and that can use any available bandwidth, such as
printers and scanners.
</p>

<p>
This transfer type can be used by full-speed and high-speed devices, but not
by low-speed devices.
</p>

<p>
Bulk transfer is non-periodic, large packet, bursty communication.
</p>

<p>
Bulk transfer allows access to the bus on an "as-available" basis, guarantees
the data transfer but not the latency, and provides an error check mechanism
with retries attempts. If part of the USB bandwidth is not being used for
other transfers, the system will use it for bulk transfer.
</p>

<p>
Like the other stream pipes (isochronous and interrupt), the bulk pipe is also
unidirectional, so bi-directional transfers require two endpoints.
</p>

<p>
The maximum packet size for bulk endpoints can be 8, 16, 32, or 64 bytes for
full-speed devices, and 512 bytes for high-speed devices.
</p>
</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="USB_cfg"></a>3.7. USB Configuration</h2></div></div></div><p>
Before the USB function (or functions, in a compound device) can be operated,
the device must be configured. The host does the configuring by acquiring the
configuration information from the USB device. USB devices report their
attributes by descriptors. A <span class="b"><strong>descriptor</strong></span> is the defined structure and
format in which the data is transferred. A complete description of the USB
descriptors can be found in Chapter 9 of the USB Specification (see
<a class="ulink" href="http://www.usb.org" target="_top">http://www.usb.org</a> for the full specification).
</p><p>
It is best to view the USB descriptors as a hierarchical structure with four
levels:<br>
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    The <em class="it">Device</em> level<br></li><li class="listitem" style="list-style-type: disc">
    The <em class="it">Configuration</em> level<br></li><li class="listitem" style="list-style-type: disc">
    The <em class="it">Interface</em> level (this level may include an optional<br>
    sub-level called <em class="it">Alternate Setting</em>)<br></li><li class="listitem" style="list-style-type: disc">
    The <em class="it">Endpoint</em> level<br></li></ul></div><p>
</p><p>
There is only one device descriptor for each USB device. Each device has one
or more configurations, each configuration has one or more interfaces, and
each interface has zero or more endpoints, as demonstrated in
<a class="xref" href="#device_descriptors" title="Figure 3.3. Device Descriptors"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Figure 3.3</fo:inline></a> below.
</p><div class="figure"><a name="device_descriptors"></a><p class="title"><b>Figure 3.3. Device Descriptors</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/device_descriptors.png" height="" alt="Device Descriptors"></div></div></div><br class="figure-break"><p>
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><span class="b"><strong>Device Level</strong></span>: The device descriptor includes general information
    about the USB device, i.e., global information for all of the device
    configurations. The device descriptor identifies, among other things, the
    device class (HID device, hub, locator device, etc.), subclass, protocol
    code, vendor ID, device ID and more. Each USB device has one device
    descriptor.
  </li><li class="listitem" style="list-style-type: disc"><span class="b"><strong>Configuration Level</strong></span>: A USB device has one or more configuration
    descriptors. Each descriptor identifies the number of interfaces grouped in
    the configuration and the power attributes of the configuration (such as
    self-powered, remote wakeup, maximum power consumption and more). Only one
    configuration can be loaded at a given time. For example, an ISDN adapter
    might have two different configurations, one that presents it with a single
    interface of 128 Kb/&#65279;s and a second that presents it with two
    interfaces of 64 Kb/&#65279;s each.
  </li><li class="listitem" style="list-style-type: disc"><p>
    <span class="b"><strong>Interface Level</strong></span>: The interface is a related set of endpoints that
    present a specific functionality or feature of the device. Each interface
    may operate independently. The interface descriptor describes the number of
    the interface, the number of endpoints used by this interface and the
    interface-specific class, subclass and protocol values when the interface
    operates independently.
    </p><p>
    In addition, an interface may have <span class="b"><strong>alternate settings</strong></span>. The alternate
    settings allow the endpoints or their characteristics to be varied after
    the device is configured.
    </p></li><li class="listitem" style="list-style-type: disc"><span class="b"><strong>Endpoint Level</strong></span>: The lowest level is the endpoint descriptor, which
    provides the host with information regarding the endpoint's data transfer
    type and maximum packet size. For isochronous endpoints, the maximum packet
    size is used to reserve the required bus time for the data transfer &#8212;
    i.e., the bandwidth. Other endpoint attributes are its bus access
    frequency, endpoint number, error handling mechanism and direction. The
    same endpoint can have different properties (and consequently different
    uses) in different alternate settings.
  </li></ul></div><p>
</p><p>
Seems complicated? Not at all! WinDriver automates the USB configuration process.
The included DriverWizard utility<a class="xref" href="#driverwizard" title="Chapter 5. Using DriverWizard"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [5]</fo:inline></a> and USB diagnostics
application scan the USB bus, detect all USB devices and their configurations,
interfaces, alternate settings and endpoints, and enable you to pick the
desired configuration before starting driver development.
</p><p>
WinDriver identifies the endpoint transfer type as determined in the endpoint
descriptor. The driver created with WinDriver contains all configuration
information acquired at this early stage.
</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_USB"></a>3.8. WinDriver USB</h2></div></div></div><p>
WinDriver USB enables developers to quickly develop high-performance drivers
for USB-based devices without having to learn the USB specifications and
operating system internals, or use the operating system development kits. For
example, Windows drivers can be developed without using the Windows Driver Kit (WDK) or
learning the Windows Driver Model (WDM).
</p><p>
The driver code developed with WinDriver USB is binary compatible across the
supported Windows platforms &#8212; Windows 10/Server 2016/8.1/Server 2012 R2/8/Server 2012/7/Server 2008 R2/Server 2008 &#8212; and source code
compatible across all supported operating systems &#8212; Windows 10/Server 2016/8.1/Server 2012 R2/8/Server 2012/7/Server 2008 R2/Server 2008, Windows 10 IoT/Embedded Windows 8.1/8/7, and Linux. For
an up-to-date list of supported operating systems, visit Jungo's web site
&#8212; <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><a class="ulink" href="https://www.jungo.com" target="_top">https://www.jungo.com</a></span>.
</p><p>
WinDriver USB is a generic tool kit that supports all USB devices from all
vendors and with all types of configurations.
</p><p>
WinDriver USB encapsulates the USB specification and architecture, letting you
focus on your application logic. WinDriver USB features the graphical DriverWizard
utility<a class="xref" href="#driverwizard" title="Chapter 5. Using DriverWizard"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [5]</fo:inline></a>, which enables you to easily detect your
hardware, view its configuration information, and test it, before writing a
single line of code: DriverWizard first lets you choose the desired
configuration, interface and alternate setting combination, using a friendly
graphical user interface. After detecting and configuring your USB device, you
can proceed to test the communication with the device &#8212; perform data
transfers on the pipes, send control requests, reset the pipes, etc. &#8212; in
order to ensure that all your hardware resources function as expected.
</p><p>
After your hardware is diagnosed, you can use DriverWizard to automatically
generate your device driver source code in C<span xmlns:fo="http://www.w3.org/1999/XSL/Format">, Visual Basic .NET,</span> or C&#65279;#. WinDriver USB
provides user-mode APIs, which you can call from within your application in
order to implement the communication with your device. The WinDriver USB API
includes USB-unique operations such as reset of a pipe or a device. The
generated DriverWizard code implements a diagnostics application, which
demonstrates how to use WinDriver's USB API to drive your specific device.  In
order to use the application you just need to compile and run it. You can
jump-start your development cycle by using this application as your skeletal
driver and then modifying the code, as needed, to implement the desired driver
functionality for your specific device.
</p><p>
DriverWizard also automates the creation of an INF file that registers your
device to work with WinDriver, which is an essential step in order to correctly
identify and handle USB devices using WinDriver. For an explanation on why you
need to create an INF file for your USB device, refer to
<a class="xref" href="#Why_Create_INF" title="11.1.1. Why Should I Create an INF File?"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 11.1.1</fo:inline></a> of the manual. For detailed information on
creation of INF files with DriverWizard, refer to
<a class="xref" href="#DriverWizard_Walkthrough" title="5.2. DriverWizard Walkthrough"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 5.2</fo:inline></a> (see specifically
<a class="xref" href="#step_dw_inf_gen_install"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Step 3</fo:inline></a>).
</p><p>
With WinDriver USB, all development is done in the user mode, using familiar
development and debugging tools and your favorite compiler or development
environment (such as MS Visual Studio, C&#65279;+&#65279;+, GCC, Windows GCC).
</p><p>
For more information regarding implementation of USB transfers with WinDriver,
refer to <a class="xref" href="#USB_Trans" title="Chapter 8. USB Transfers"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Chapter 8</fo:inline></a> of the manual.
</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="wd_usb_arch"></a>3.9. WinDriver USB Architecture</h2></div></div></div><p>
To access your hardware, your application calls the WinDriver kernel
module using functions from the WinDriver USB API. The high&#65279;-&#65279;level functions
utilize the low&#65279;-&#65279;level functions, which use IOCTLs to enable communication
between the WinDriver kernel module and your user-mode application. The
WinDriver kernel module accesses your USB device resources through the native
operating system calls.
</p><p>
There are two layers responsible for abstracting the USB device to the USB
device driver. The upper layer is the <span class="b"><strong>USB Driver (USBD)</strong></span> layer, which
includes the USB Hub Driver and the USB Core Driver. The lower level is the
<span class="b"><strong>Host Controller Driver (HCD)</strong></span> layer. The division of duties between
the HCD and USBD layers is not defined and is operating system dependent. Both
the HCD and USBD are software interfaces and components of the operating
system, where the HCD layer represents a lower level of abstraction.
</p><p>
The <span class="b"><strong>HCD</strong></span> is the software layer that provides an abstraction of the host
controller hardware, while the <span class="b"><strong>USBD</strong></span> provides an abstraction of the
USB device and the data transfer between the host software and the function of
the USB device.
</p><p>
The <span class="b"><strong>USBD</strong></span> communicates with its clients (the specific device driver,
for example) through the USB Driver Interface (<span class="b"><strong>USBDI</strong></span>). At the lower
level, the Core Driver and USB Hub Driver implement the hardware access and
data transfer by communicating with the HCD using the Host Controller Driver
Interface (<span class="b"><strong>HCDI</strong></span>).
</p><p>
The USB Hub Driver is responsible for identifying the addition and removal of
devices from a particular hub. When the Hub Driver receives a signal that a
device was attached or detached, it uses additional host software and the USB
Core Driver to recognize and configure the device. The software implementing
the configuration can include the hub driver, the device driver, and other
software.
</p><p>
WinDriver USB abstracts the configuration procedure and hardware access
described above for the developer. With WinDriver's USB API, developers can
perform all the hardware-related operations without having to master the
lower-level implementation for supporting these operations.

</p><div class="figure"><a name="wdusb_arch_detailed"></a><p class="title"><b>Figure 3.4. WinDriver USB Architecture</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/wdusb_arch_detailed.png" height="" alt="WinDriver USB Architecture"></div></div></div><p><br class="figure-break">
</p></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="wd_install"></a>Chapter 4. Installing WinDriver</h1></div></div></div><p>
This chapter takes you through the process of installing WinDriver on your
development platform, and shows you how to verify that your WinDriver is properly
installed. The last section discusses the uninstall procedure. To find out how
to install the driver you create on target platforms, refer to
<a class="xref" href="#driver_distribution" title="Chapter 10. Distributing Your Driver"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Chapter 10</fo:inline></a>.
</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sys_req"></a>4.1. System Requirements</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sys_req_windows"></a>4.1.1. Windows System Requirements</h3></div></div></div>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    Any x86 32-&#65279;bit or 64-&#65279;bit (x64: AMD64 or Intel EM64T) processor
  </li><li class="listitem" style="list-style-type: disc">
    Any compiler or development environment supporting C or .NET
  </li></ul></div>
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sys_req_windows_10iotcore"></a>4.1.2. Windows 10 IoT Core System Requirements</h3></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
WinDriver supports driver development for the Windows 10 IoT Core operating
system.
Please note that Windows 10 IoT Enterprise is a full version of Windows 10, so
the regular WinDriver for Windows desktop / server can be used for those OSes.
</td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
WinDriver must be installed on a development computer running a desktop version
of Windows, in order to use DriverWizard.
</li><li class="listitem" style="list-style-type: disc">
A network connection allowing an SSH session with the target computer.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sys_req_linux"></a>4.1.3. Linux System Requirements</h3></div></div></div>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    Any of the following processor architectures, with a 2.6.x or higher
    Linux kernel:
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
        32-&#65279;bit x86
      </li><li class="listitem">
        64-&#65279;bit x86 AMD64 or Intel EM64T (<span class="b"><strong>x86_64</strong></span>)
      </li></ul></div>
    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
    Jungo strives to support new Linux kernel versions as close as
    possible to their release.<br>
    To find out the latest supported kernel version, refer to the WinDriver
    release notes (found online at <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><a class="ulink" href="https://www.jungo.com/st/support/windriver/wdver/" target="_top">https://www.jungo.com/st/support/windriver/wdver/</a></span>).
    </td></tr></table></div></li><li class="listitem" style="list-style-type: disc">
    A GCC compiler
    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
    The version of the GCC compiler should match the compiler version used for
    building the running Linux kernel.
    </td></tr></table></div>
    </li><li class="listitem" style="list-style-type: disc">
    Any 32-&#65279;bit or 64-&#65279;bit development environment (depending on your target
    configuration) supporting C for user mode
  </li><li class="listitem" style="list-style-type: disc">
    On your development PC: <span class="jprintfilename"><strong>glibc2.14.x (or newer)
        </strong></span></li><li class="listitem" style="list-style-type: disc">
    The following libraries are required for running GUI WinDriver application
    (e.g., DriverWizard<a class="xref" href="#driverwizard" title="Chapter 5. Using DriverWizard"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [5]</fo:inline></a>; Debug Monitor 
    <a class="xref" href="#Debug_Monitor" title="7.2. Debug Monitor"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [7.2]</fo:inline></a>):<br>
    - <span class="jprintfilename"><strong>libstdc++.so.6</strong></span><br>
    - <span class="jprintfilename"><strong>libpng12.so.0</strong></span><br>
    - <span class="jprintfilename"><strong>libQtGui.so.4</strong></span><br>
    - <span class="jprintfilename"><strong>libQtCore.so.4</strong></span><br>
    - <span class="jprintfilename"><strong>libQtNetwork.so.4</strong></span>
    </li></ul></div>
</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="wd_install_process"></a>4.2. WinDriver Installation Process</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="wd_install_windows"></a>4.2.1. Windows WinDriver Installation Instructions</h3></div></div></div>

  <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
  Driver installation on Windows requires administrator privileges.
  </td></tr></table></div>


<div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
    Run the WinDriver installation &#8212;
    <span class="jprintfilename"><strong>WD1281.EXE</strong></span> &#8212; and follow
    the installation instructions.
  </li><li class="listitem">
    At the end of the installation, you may be prompted to reboot your
    computer.
  </li></ol></div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><a name="wd_install_windows_notes_wd_basedir_note"></a>
    The WinDriver installation defines a <strong class="japib"><code>WD_BASEDIR</code></strong> environment
    variable, which is set to point to the location of your WinDriver directory,
    as selected during the installation. This variable is used during the
    DriverWizard<a class="xref" href="#driverwizard" title="Chapter 5. Using DriverWizard"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [5]</fo:inline></a> code generation &#8212; it determines
    the default directory for saving your generated code and is used in the
    include paths of the generated project/make files.
    
  </li><li class="listitem" style="list-style-type: disc">
    If the installation fails with an
  <strong class="japib"><code>ERROR_FILE_NOT_FOUND</code></strong> error, inspect the Windows registry to
  see if the <strong class="japib"><code>RunOnce</code></strong> key exists in
  <strong class="japib"><code>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion</code></strong>.
  This registry key is required by Windows Plug&#65279;-&#65279;and&#65279;-&#65279;Play in order to properly install
  drivers using INF files. If the <strong class="japib"><code>RunOnce</code></strong> key is missing, create
  it; then try installing the INF file again.
  </li></ul></div></td></tr></table></div><p>

  </p><p>
  <span class="b"><strong>The following steps are for registered users only:</strong></span>
  </p><p>
  </p><p>
  To register your copy of WinDriver with the license you received from
  Jungo, follow these steps:
  </p><p>

</p><div class="orderedlist"><ol class="orderedlist" start="3" type="1"><li class="listitem">
    Start DriverWizard: <span class="jmenupath"><strong>Start | Programs | WinDriver |
  DriverWizard</strong></span>.
  </li><li class="listitem">
    Select the <span class="jmenuitem"><strong>Register WinDriver</strong></span> option from the
    <span class="jmenuitem"><strong>File</strong></span> menu, and insert the license string you
    received from Jungo.
    </li><li class="listitem">
    Click the <span class="jmenuitem"><strong>Activate License</strong></span> button.
  </li><li class="listitem">
    To register source code that you developed during the evaluation period,
    refer to the documentation of<span xmlns:fo="http://www.w3.org/1999/XSL/Format"> <span style=""><span style=""><code class="japi">WDU_Init</code><span class="japi">()</span></span><a class="xref" href="#WDU_Init" title="B.4.1. WDU_Init"><fo:inline> [B.4.1]</fo:inline></a></span>.</span>
    </li></ol></div><p>
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="wd_install_linux"></a>4.2.2. Linux WinDriver Installation Instructions</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="wd_install_linux_prepare"></a>4.2.2.1. Preparing the System for Installation</h4></div></div></div><p>
In Linux, kernel modules must be compiled with the same header files that the
kernel itself was compiled with. Since WinDriver installs kernel modules, it
must compile with the header files of the Linux kernel during the installation
process.
</p><p>
Therefore, before you install WinDriver for Linux, verify that the Linux
source code and the file <span class="jprintfilename"><strong>version.h</strong></span> are
installed on your machine:
</p><p>
<span class="b"><strong>Install the Linux kernel source code:</strong></span>

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    If you have yet to install Linux, install it, including the kernel source
    code, by following the instructions for your Linux distribution.
    </li><li class="listitem" style="list-style-type: disc">
    If Linux is already installed on your machine, check whether the Linux
    source code was installed. You can do this by looking for 'linux' in the
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>/usr/src</strong></span></span> directory. If the
    source code is not installed, either install it, or reinstall Linux with
    the source code, by following the instructions for your Linux distribution.
    </li></ul></div><p>
</p><p>
<span class="b"><strong>Install version.h</strong></span>:

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    The file <span class="jprintfilename"><strong>version.h</strong></span> is created when you
    first compile the Linux kernel source code. Some distributions provide a
    compiled kernel without the file
    <span class="jprintfilename"><strong>version.h</strong></span>. Look under
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>/usr/src/linux/include/linux</strong></span></span>
    to see whether you have this file. If you do not, follow these steps:
    <div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
        Become super user:<br>
        <strong class="jcmd"><code>$ su</code></strong>
          
        </li><li class="listitem">
        Change directory to the Linux source directory:<br>
        <strong class="jcmd"><code># cd /usr/src/linux</code></strong>
        </li><li class="listitem">
        Type:<br>
        <strong class="jcmd"><code># make xconfig</code></strong>
        </li><li class="listitem">
        Save the configuration by choosing
        <span class="jmenuitem"><strong>Save and Exit</strong></span>.
        </li><li class="listitem">
        Type:<br>
        <strong class="jcmd"><code># make dep</code></strong>
        </li><li class="listitem">
    Exit super user mode:<br>
    <strong class="jcmd"><code># exit</code></strong>
    </li></ol></div></li></ul></div><p>
</p><p>
To run GUI WinDriver applications (e.g., DriverWizard<a class="xref" href="#driverwizard" title="Chapter 5. Using DriverWizard"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [5]</fo:inline></a>;
Debug Monitor<a class="xref" href="#Debug_Monitor" title="7.2. Debug Monitor"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [7.2]</fo:inline></a>) you must also have version
6.0 of the <span class="jprintfilename"><strong>libstdc++</strong></span> library &#8212;
<span class="jprintfilename"><strong>libstdc++.so.6</strong></span> &#8212; and version 12.0 of
the <span class="jprintfilename"><strong>libpng</strong></span> library &#8212; <span class="jprintfilename"><strong>libpng12.so.0</strong></span>. If you do
not have these files, install the relevant packages for your Linux distribution
(e.g.,
<span class="jprintfilename"><strong>libstdc++6</strong></span>
and
<span class="jprintfilename"><strong>libpng12-0</strong></span>).
Also required is the <span class="b"><strong>libqtgui4</strong></span> package.
</p><p>
Before proceeding with the installation, you must also make sure that you have
a <em class="it">linux</em> symbolic link. If you do not, create one by typing<br>
<strong class="jcmd"><code>/usr/src$ ln -s &lt;target kernel&gt; linux</code></strong><br>

For example, for the Linux 3.0 kernel type<br>
<strong class="jcmd"><code>/usr/src$ ln -s linux-3.0/ linux</code></strong>

</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="wd_linux_installation"></a>4.2.2.2. Installation</h4></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
    On your development Linux machine, change directory to your preferred
    installation directory, for example to your home directory:<br>
    <strong class="jcmd"><code>$ cd ~</code></strong>

    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
    The path to the installation directory must not contain any spaces.
    </td></tr></table></div>
    </li><li class="listitem"><p>
    Extract the WinDriver distribution file &#8212; <span class="jprintfilename"><strong>WD1281LN.tgz</strong></span> or <span class="jprintfilename"><strong>WD1281LNx86_64.tgz</strong></span>
    &#8212;<br>
    <strong class="jcmd"><code>$
      tar xvzf &lt;file location&gt;/WD1281LN[x86_64].tgz</code></strong>
    </p><p>
    For example, to extract <span class="jprintfilename"><strong>WD1281LN.tgz</strong></span> run this command:
    <br>
      <strong class="jcmd"><code>$ tar xvzf ~/WD1281LN.tgz</code></strong>
    </p></li><li class="listitem">
    Change directory to your WinDriver <span class="jdirectory"><strong>redist</strong></span> directory (the tar
    automatically creates a <span class="jdirectory"><strong>WinDriver</strong></span> directory):<br>
    <strong class="jcmd"><code>$ cd &lt;WinDriver directory path&gt;/redist</code></strong>
    </li><li class="listitem">
    Install WinDriver:

    <div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
        <strong class="jcmd"><code>&lt;WinDriver directory&gt;/redist</code></strong><strong class="jcmd"><code>$ </code></strong><span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><strong class="jcmd"><code>./configure</code></strong></span>
        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
      The configuration script creates a makefile based on the running kernel.
      You may select to use another installed kernel source, by executing the
      script with the
      <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><strong class="japib"><code>--with-kernel-source=&lt;path&gt;</code></strong></span>
      option, where <strong class="japib"><code>&lt;path&gt;</code></strong> is the full path to the kernel
      source directory &#8212; e.g.,
      <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>/usr/src/linux</strong></span></span>.<br></li><li class="listitem" style="list-style-type: disc">
      If the Linux kernel version is 2.6.26 or
  higher, the configuration script generates makefiles that use
  <span class="jprintfilename"><strong>kbuild</strong></span> to compile the kernel modules. You
  can force the use of <span class="jprintfilename"><strong>kbuild</strong></span> on earlier
  versions of Linux, by executing the configuration script with the
  <strong class="japib"><code>--enable-kbuild</code></strong> flag.
    </li></ul></div></td></tr></table></div><div class="info" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/info.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
  For a full list of the configuration script options, use the
  <strong class="jcmd"><code>--help</code></strong> option:<br><strong class="jcmd"><code>./configure --help</code></strong></td></tr></table></div></li><li class="listitem">
        <strong class="jcmd"><code>&lt;WinDriver directory&gt;/redist$ make</code></strong>
        </li><li class="listitem">
        Become super user:<br>
        <strong class="jcmd"><code>&lt;WinDriver directory&gt;/redist$ su</code></strong>
        
        </li><li class="listitem">
        Install the driver: <br>
        <strong class="jcmd"><code>&lt;WinDriver directory&gt;/redist# make install</code></strong>
        </li></ol></div></li><li class="listitem">
    Create a symbolic link so that you can easily launch the DriverWizard
    GUI:<br>
    <strong class="jcmd"><code>$ ln -s <span class="jprintfilename"><strong>&lt;path to WinDriver&gt;/wizard/wdwizard</strong></span> /usr/bin/wdwizard</code></strong>
    </li><li class="listitem">
    Change the read and execute permissions on the file <span class="jprintfilename"><strong>wdwizard</strong></span> so that
    ordinary users can access this program.
    </li><li class="listitem">
    Change the user and group IDs and give read/write permissions to the device
    file
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>/dev/windrvr1281</strong></span></span>,
    depending on how you wish to allow users to access hardware through the
    device. Due to security reasons, by default the device file is created with
    permissions only for the root user. Change the permissions by modifying
    your <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jprintfilename"><strong>/etc/udev/permissions.d/50-udev.permissions</strong></span></span>
    file. For example, add the following line to provide read and write
    permissions:<br>
    <code class="code">windrvr1281:root:root:0666</code><br>
    </li><li class="listitem"><a name="wd_linux_installation_step_wd_basedir"></a>
    Define a new <strong class="japib"><code>WD_BASEDIR</code></strong> environment variable and set it to
    point to the location of your WinDriver directory, as selected during the
    installation. This variable is used in the make and source files of the
    WinDriver samples and generated DriverWizard<a class="xref" href="#driverwizard" title="Chapter 5. Using DriverWizard"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [5]</fo:inline></a> code, and
    is also used to determine the default directory for saving your generated
    DriverWizard projects. If you do not define this variable you will be
    instructed to do so when attempting to build the sample/generated code
    using the WinDriver makefiles.
    </li><li class="listitem">
    Exit super user mode:<br>
    <strong class="jcmd"><code># exit</code></strong>
    </li><li class="listitem">
    You can now start using WinDriver to access your hardware and generate your
    driver code!
    </li></ol></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="scripts/images/tip.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">

  Use the <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jprintfilename"><strong>WinDriver/util/wdreg</strong></span></span> script to load the
  WinDriver kernel module<a class="xref" href="#dyn_linux" title="9.5. Linux Dynamic Driver Loading"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [9.5]</fo:inline></a>.<br></td></tr></table></div><p>

  </p><p>
  <span class="b"><strong>The following steps are for registered users only:</strong></span>
  </p><p>
  </p><p>
  To register your copy of WinDriver with the license you received from
  Jungo, follow these steps:
  </p><p>

</p><div class="orderedlist"><ol class="orderedlist" start="11" type="1"><li class="listitem" value="12">
    Start DriverWizard:<br>
    <strong class="jcmd"><code>$ <span class="jprintfilename"><strong>&lt;path to WinDriver&gt;/wizard/wdwizard</strong></span></code></strong>
    </li><li class="listitem">
    Select the <span class="jmenuitem"><strong>Register WinDriver</strong></span> option from the
    <span class="jmenuitem"><strong>File</strong></span> menu, and insert the license string you
    received from Jungo.
    </li><li class="listitem">
    Click the <span class="jmenuitem"><strong>Activate License</strong></span> button.
  </li><li class="listitem">
    To register source code that you developed during the evaluation period,
    refer to the documentation of<span xmlns:fo="http://www.w3.org/1999/XSL/Format"> <span style=""><span style=""><code class="japi">WDU_Init</code><span class="japi">()</span></span><a class="xref" href="#WDU_Init" title="B.4.1. WDU_Init"><fo:inline> [B.4.1]</fo:inline></a></span>.</span>
    </li></ol></div><p>
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="linux_hw_access_restrict"></a>4.2.2.3. Restricting Hardware Access on Linux</h4></div></div></div><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="scripts/images/caution.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
Since <span class="jdirectory"><strong>/dev/windrvr1281</strong></span> gives direct
hardware access to user programs, it may compromise kernel stability on
multi-user Linux systems. Please restrict access to DriverWizard and the device
file <span class="jdirectory"><strong>/dev/windrvr1281</strong></span> to trusted
users.
</p><p>
For security reasons the WinDriver installation script does not automatically
perform the steps of changing the permissions on
<span class="jdirectory"><strong>/dev/windrvr1281</strong></span> and the DriverWizard
application (<span class="jprintfilename"><strong>wdwizard</strong></span>).
</p></td></tr></table></div></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="wd_install_upgrade"></a>4.3. Upgrading Your Installation</h2></div></div></div><p>
To upgrade to a new version of WinDriver, follow the installation steps for your
target operating system, as outlined in the previous section<a class="xref" href="#wd_install_process" title="4.2. WinDriver Installation Process"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [4.2]</fo:inline></a>. You can either choose to overwrite the existing
installation or install to a separate directory.
</p><p>
After the installation, start DriverWizard and enter the new license string, if
you have received one. This completes the minimal upgrade steps.
</p><p>
To upgrade your source code &#8212;
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    Pass the new license string as a parameter to<span xmlns:fo="http://www.w3.org/1999/XSL/Format">
      <span style=""><span style=""><code class="japi">WDU_Init</code><span class="japi">()</span></span><a class="xref" href="#WDU_Init" title="B.4.1. WDU_Init"><fo:inline> [B.4.1]</fo:inline></a></span> (or to <code class="jfunc">WD_License</code><span class="jfunc">()</span>, when using the
      old <code class="jfunc">WD_UsbXXX</code><span class="jfunc">()</span> APIs).</span>
    </li><li class="listitem" style="list-style-type: disc">
    Verify that the call to <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_DriverName</code><span class="japi">()</span></span><a class="xref" href="#WD_DriverName" title="B.1. WD_DriverName"><fo:inline> [B.1]</fo:inline></a></span> in your driver code (if
    exists) uses the name of the new driver module &#8212;
    <span class="jprintfilename"><strong>windrvr1281</strong></span> or your renamed version of this driver<a class="xref" href="#wd_rename_driver" title="11.2. Renaming the WinDriver Kernel Driver"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [11.2]</fo:inline></a>.<br>
    If you use the generated DriverWizard code or one of the samples from the
    new WinDriver version, the code will already use the default driver name from
    the new version. Also, if your code is based on generated/sample code from
    an earlier version of WinDriver, rebuilding the code with
    <span class="jprintfilename"><strong>windrvr.h</strong></span> from the new version is
    sufficient to update the code to use the new default driver-module name
    (due to the use of the <code class="japi">WD_DEFAULT_DRIVER_NAME_BASE</code> definition).
    <br>
    If you elect to rename the WinDriver driver module<a class="xref" href="#wd_rename_driver" title="11.2. Renaming the WinDriver Kernel Driver"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [11.2]</fo:inline></a>,
    ensure that your code calls <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_DriverName</code><span class="japi">()</span></span><a class="xref" href="#WD_DriverName" title="B.1. WD_DriverName"><fo:inline> [B.1]</fo:inline></a></span> with your custom
    driver name. If you rename the driver from the new version to a name
    already used in your old project, you do not need to modify your code.
  </li></ul></div><p>
</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="wd_install_check"></a>4.4. Checking Your Installation</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="wd_install_check_windows_mac_unix"></a>4.4.1. Windows and Linux Installation Check</h3></div></div></div>
<div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
    
  Start DriverWizard &#8212; <span class="jprintfilename"><strong>&lt;path to WinDriver&gt;/wizard/wdwizard</strong></span>. On Windows you can also run DriverWizard from the
    <span class="jmenuitem"><strong>Start</strong></span> menu: <span class="jmenupath"><strong>Start | Programs | WinDriver |
  DriverWizard</strong></span>.
  </li><li class="listitem">
    If you are a registered user, make sure that your WinDriver license is
    registered (refer to <a class="xref" href="#wd_install_process" title="4.2. WinDriver Installation Process"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 4.2</fo:inline></a>, which
    explains how to install WinDriver and register your license).<br>
    If you are an evaluation version user, you do not need to register a
    license.
  </li></ol></div>
</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="wd_uninstall"></a>4.5. Uninstalling WinDriver</h2></div></div></div><p>
This section will help you to uninstall either the evaluation or registered
version of WinDriver.
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="wd_uninstall_windows"></a>4.5.1. Windows WinDriver Uninstall Instructions</h3></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    You can select to use the graphical
    <span class="jprintfilename"><strong>wdreg_gui.exe</strong></span> utility instead of
    <span class="jprintfilename"><strong>wdreg.exe</strong></span>.
  </li><li class="listitem" style="list-style-type: disc"><span class="jprintfilename"><strong>wdreg.exe</strong></span> and
    <span class="jprintfilename"><strong>wdreg_gui.exe</strong></span> are found in the
    <span class="jdirectory"><strong>WinDriver\util</strong></span> directory (see
    <a class="xref" href="#Dynamic_Driver_Load" title="Chapter 9. Dynamically Loading Your Driver"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Chapter 9</fo:inline></a> for details regarding these
    utilities).
  </li></ul></div></td></tr></table></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
    Close any open WinDriver applications, including DriverWizard, the Debug
    Monitor, and user-specific applications.
  </li><li class="listitem">
    Uninstall all Plug&#65279;-&#65279;and&#65279;-&#65279;Play devices (USB/PCI) that have been registered with 
    WinDriver via an INF file:<br>
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
        Uninstall the device using the <span class="jprintfilename"><strong>wdreg</strong></span>
        utility:<br><strong class="jcmd"><code>wdreg -inf &lt;path to the INF file&gt; uninstall</code></strong></li><li class="listitem" style="list-style-type: disc">
        Verify that no INF files that register your device(s) with WinDriver's
        kernel module (<span class="jprintfilename"><strong>windrvr1281.sys</strong></span>) are found in the
        <span class="jdirectory"><strong>%windir%\&#65279;inf</strong></span> directory.
      </li></ul></div>
    </li><li class="listitem">
    Uninstall WinDriver:
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
        <span class="b"><strong>On the development PC</strong></span>, on which you installed the WinDriver
        toolkit:<br>
        Run <span class="jmenuitem"><strong>Start | WinDriver | Uninstall</strong></span> , <span class="b"><strong>OR</strong></span> run
        the <span class="jprintfilename"><strong>uninstall.exe</strong></span> utility from the
        <span class="jdirectory"><strong>WinDriver</strong></span> installation directory.
        </p><p>
        The uninstall will stop and unload the WinDriver kernel module
        (<span class="jprintfilename"><strong>windrvr1281.sys</strong></span>); delete the copy of the <span class="jprintfilename"><strong>windrvr1281.inf</strong></span> file
        from the <span class="jdirectory"><strong>%windir%\&#65279;inf</strong></span> directory; delete
        WinDriver from Windows' <span class="jmenuitem"><strong>Start</strong></span> menu; delete the
        <span class="jdirectory"><strong>WinDriver</strong></span> installation directory (except for
        files that you added to this directory); and delete the shortcut icons
        to the DriverWizard and Debug Monitor utilities from the Desktop.
        </p></li><li class="listitem" style="list-style-type: disc"><p>
        <span class="b"><strong>On a target PC</strong></span>, on which you installed the WinDriver kernel module
        (<span class="jprintfilename"><strong>windrvr1281.sys</strong></span>), but not the entire WinDriver toolkit:<br>
        Use the <span class="jprintfilename"><strong>wdreg</strong></span> utility to stop and
        unload the driver:<br>
        <strong class="jcmd"><code>wdreg -inf &lt;path to windrvr1281.inf&gt; uninstall</code></strong>
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
        When running this command, <span class="jprintfilename"><strong>windrvr1281.sys</strong></span> should reside in the
        same directory as <span class="jprintfilename"><strong>windrvr1281.inf</strong></span>.
        </td></tr></table></div><p>
        (On the development PC, the relevant
        <span class="jprintfilename"><strong>wdreg</strong></span> uninstall command is executed
        for you by the uninstall utility).
        </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
          If you attempt to uninstall WinDriver while there are open handles to
          the WinDriver service (<span class="jprintfilename"><strong>windrvr1281.sys</strong></span> or your renamed driver<a class="xref" href="#wd_rename_driver" title="11.2. Renaming the WinDriver Kernel Driver"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [11.2]</fo:inline></a>, or there are connected and enabled Plug&#65279;-&#65279;and&#65279;-&#65279;Play
          devices that are registered to work with this service,
          <span class="jprintfilename"><strong>wdreg</strong></span> will fail to uninstall the
          driver. This ensures that you do not uninstall the driver while it is
          being used.
          </li><li class="listitem" style="list-style-type: disc">
          You can check if the WinDriver kernel module is loaded by running the
          Debug Monitor utility
          (<span class="jdirectory"><strong>WinDriver\util\wddebug_gui.exe</strong></span>)<a class="xref" href="#Debug_Monitor" title="7.2. Debug Monitor"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [7.2]</fo:inline></a>. When the driver is loaded, the Debug Monitor
          log displays driver and OS information; otherwise, it displays a
          relevant error message. On the development PC, the uninstall command
          will delete the Debug Monitor executables; to use this utility after
          the uninstallation, create a copy of
          <span class="jprintfilename"><strong>wddebug_gui.exe</strong></span> before performing
          the uninstall procedure.
        </li></ul></div></td></tr></table></div></li><li class="listitem">
    If <span class="jprintfilename"><strong>windrvr1281.sys</strong></span> was successfully unloaded, erase the following
    files (if they exist):<br>
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><span class="jdirectory"><strong>%windir%\&#65279;system32\&#65279;drivers\</strong></span><span class="jprintfilename"><strong>windrvr1281.sys</strong></span></li><li class="listitem" style="list-style-type: disc"><span class="jdirectory"><strong>%windir%&#65279;\inf\&#65279;</strong></span><span class="jprintfilename"><strong>windrvr1281.inf</strong></span></li><li class="listitem" style="list-style-type: disc"><span class="jprintfilename"><strong>%windir%\&#65279;system32\&#65279;wdapi1281.dll</strong></span></li><li class="listitem" style="list-style-type: disc"><span class="jprintfilename"><strong>%windir%\&#65279;sysWOW64\&#65279;wdapi1281.dll</strong></span>
        (Windows x64)<br></li></ul></div>
    </li><li class="listitem">
    Reboot the computer.
  </li></ol></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="wd_uninstall_linux"></a>4.5.2. Linux WinDriver Uninstall Instructions</h3></div></div></div>

<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
  The following commands must be executed with root privileges.
  </td></tr></table></div>


<div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
    Verify that the WinDriver <span xmlns:fo="http://www.w3.org/1999/XSL/Format">driver module<span>s</span>
  are</span> not being used by another program:

    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
        View the list of modules and the programs using each of them:<br>
        <strong class="jcmd"><code># /sbin/lsmod</code></strong>
        </li><li class="listitem" style="list-style-type: disc">
        Identify any applications and modules that are using the WinDriver
        driver module<span xmlns:fo="http://www.w3.org/1999/XSL/Format">s</span>. (By default, WinDriver module names begin with
        <span class="jprintfilename"><strong>windrvr1281</strong></span>).
        </li><li class="listitem" style="list-style-type: disc">
        Close any applications that are using the WinDriver driver module<span xmlns:fo="http://www.w3.org/1999/XSL/Format">s</span>.
      </li></ul></div></li><li class="listitem">
    Run the following command to unload the WinDriver driver module<span xmlns:fo="http://www.w3.org/1999/XSL/Format">s</span>:<br>
    <strong class="jcmd"><code># /sbin/modprobe -r windrvr1281</code></strong>
    
    </li><li class="listitem">
    Remove the file <span class="jprintfilename"><strong>.windriver.rc</strong></span> from the
    <span class="jdirectory"><strong>/etc</strong></span> directory:<br>
    <strong class="jcmd"><code># rm -f /etc/.windriver.rc</code></strong>
    </li><li class="listitem">
    Remove the file <span class="jprintfilename"><strong>.windriver.rc</strong></span> from
    <span class="jdirectory"><strong>$HOME</strong></span>:<br>
    <strong class="jcmd"><code># rm -f $HOME/.windriver.rc</code></strong>
    </li><li class="listitem">
    If you created a symbolic link to DriverWizard, remove the link using the
    command<br>
    <strong class="jcmd"><code># rm -f /usr/bin/wdwizard</code></strong>
    </li><li class="listitem">
    Remove the WinDriver installation directory using the command<br>
    <strong class="jcmd"><code># rm -rf &lt;path to the WinDriver directory&gt;</code></strong><br>
    (for example: <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><strong class="jcmd"><code># rm -rf ~/WinDriver</code></strong></span>).
    </li><li class="listitem">
    Remove the WinDriver shared object file, if it exists:<br>
    <span class="jprintfilename"><strong>/usr/lib/libwdapi1281.so</strong></span>
    (32-&#65279;bit x86) /<br>
    <span class="jprintfilename"><strong>/usr/lib64/libwdapi1281.so</strong></span>
    (64-&#65279;bit x86).
    </li></ol></div>
</div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="driverwizard"></a>Chapter 5. Using DriverWizard</h1></div></div></div><p>
This chapter describes the WinDriver DriverWizard utility and its hardware
diagnostics and driver code generation capabilities.
</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="wiz_overview"></a>5.1. An Overview</h2></div></div></div><p>

DriverWizard (included in the WinDriver toolkit) is a graphical user interface (GUI) tool that is
targeted at two major phases in the hardware and driver development:

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    <span class="b"><strong>Hardware diagnostics</strong></span> &#8212; DriverWizard enables you to write and
    read hardware resources before writing a single line of code. After the
    hardware has been built,<span xmlns:fo="http://www.w3.org/1999/XSL/Format">
      attach your device to a USB port on your machine, view its configuration
      and pipes information, and verify the hardware's functionality by
      transferring data on the pipes, sending standard requests on the control
      pipe, and resetting the pipes.
    </span>
    </li><li class="listitem" style="list-style-type: disc">
    <span class="b"><strong>Code generation</strong></span> &#8212; Once you have verified that the device is
    operating to your satisfaction, use DriverWizard generate skeletal driver
    source code with functions to view and access your hardware's resources.
    </li></ul></div><p>
</p><p>
On Windows, DriverWizard can also be used to generate an INF file<a class="xref" href="#winpnp_inf" title="11.1. Windows INF Files"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [11.1]</fo:inline></a> for your hardware.
</p><p>
The code generated by DriverWizard is composed of the following elements:

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    <span class="b"><strong>Library functions</strong></span> for accessing each element of your device's
    resources (memory ranges, I/&#65279;O ranges, registers and interrupts).
    </li><li class="listitem" style="list-style-type: disc">
    <span class="b"><strong>A 32-&#65279;bit diagnostics program</strong></span> in console mode with which you can
    diagnose your device. This application utilizes the special library
    functions described above. Use this diagnostics program as your skeletal
    device driver.
    </li><li class="listitem" style="list-style-type: disc">
    <span class="b"><strong>A project solution</strong></span> that you can use to automatically load all of the
    project information and files into your development environment.<br>
    For Linux, DriverWizard generates the required makefile.
    </li></ul></div><p>
</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="DriverWizard_Walkthrough"></a>5.2. DriverWizard Walkthrough</h2></div></div></div><p>
To use DriverWizard, follow these steps:


</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
    <span class="b"><strong>Attach your hardware to the computer:</strong></span> <br>
    Attach your device to a USB port on your computer.
    </li><li class="listitem"><a name="step_dw_wiz_run_n_dev_select"></a><span class="b"><strong>Run DriverWizard and select your device:</strong></span><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
        
  Start DriverWizard &#8212; <span class="jprintfilename"><strong>&lt;path to WinDriver&gt;/wizard/wdwizard</strong></span>. On Windows you can also run DriverWizard from the
    <span class="jmenuitem"><strong>Start</strong></span> menu: <span class="jmenupath"><strong>Start | Programs | WinDriver |
  DriverWizard</strong></span>.
        <div class="info" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/info.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
        On Windows 7 and higher you must run DriverWizard as administrator.
        </td></tr></table></div></li><li class="listitem">
        Click <span class="jmenuitem"><strong>New host driver project</strong></span> to start a new
        project.
        <div class="figure"><a name="wiz_start"></a><p class="title"><b>Figure 5.1. Create a New Driver Project</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/wiz_start.png" height="" alt="Create a New Driver Project"></div></div></div><br class="figure-break"></li><li class="listitem"><p>
        Select your <span xmlns:fo="http://www.w3.org/1999/XSL/Format">device</span>
        from the list of devices detected by DriverWizard.

        </p><div class="figure"><a name="figure_wiz_select_device"></a><p class="title"><b>Figure 5.2. Select Your Device</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/wiz_usb_select_device.png" height="" alt="Select Your Device"></div></div></div><p><br class="figure-break">
        
        </p></li></ol></div></li><li class="listitem"><p><a name="step_dw_inf_gen_install"></a>
    
    <span class="b"><strong>Generate and install an INF file for your device [Windows]</strong></span>:<br>
    On the supported <span class="b"><strong>Windows</strong></span> operating systems, the driver for Plug&#65279;-&#65279;and&#65279;-&#65279;Play
    devices (such as <span xmlns:fo="http://www.w3.org/1999/XSL/Format">USB</span>) is installed by installing an INF file for
    the device. DriverWizard enables you to generate an INF file that registers
    your device to work with WinDriver (i.e., with the <span class="jprintfilename"><strong>windrvr1281.sys</strong></span>
    driver). The INF file generated by DriverWizard should later be distributed
    to your Windows customers, and installed on their PCs.
    
    <br>
    
    The INF file that you generate in this step is also designed to enable
    DriverWizard to diagnose 
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format">Plug&#65279;-&#65279;and&#65279;-&#65279;Play devices </span>on Windows.
    Additional information concerning the need for an INF file is provided in
    <a class="xref" href="#Why_Create_INF" title="11.1.1. Why Should I Create an INF File?"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 11.1.1</fo:inline></a>.
    
    </p><p>
    <span class="b"><strong>If you don't need to generate and install an INF file,
      skip this step.</strong></span>
    </p><p>
    To generate and install the INF file with DriverWizard, do the following:

    </p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
        In the <a class="link" href="#figure_wiz_select_device" title="Figure 5.2. Select Your Device"><span class="jmenuitem"><strong>Select
          Your Device</strong></span></a> screen
        (see <a class="xref" href="#step_dw_wiz_run_n_dev_select"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Step 2</fo:inline></a>), click the
        <span class="jmenuitem"><strong>Generate .INF file</strong></span> button or click
        <span class="jmenuitem"><strong>Next</strong></span>.
        </li><li class="listitem">
        DriverWizard will display information detected for your device &#8212;
        Vendor ID,
        
        <span xmlns:fo="http://www.w3.org/1999/XSL/Format">Product</span>
        ID, Device Class, manufacturer name and device name &#8212; and allow
        you to modify this information
        <div class="figure"><a name="wiz_usb_inf_info"></a><p class="title"><b>Figure 5.3. DriverWizard INF File Information</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/wiz_usb_inf_info.png" height="" alt="DriverWizard INF File Information"></div></div></div><br class="figure-break"></li><li class="listitem">
        For multiple-interface USB devices, you can select to generate an INF
        file either for the composite device or for a specific interface.
        <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
            When selecting to generate an INF file for a specific interface of
            a multi-interface USB device the INF information dialogue will
            indicate for which interface the INF file is generated.
            <div class="figure"><a name="wiz_usb_inf_info_multi_ifc_ifc0"></a><p class="title"><b>Figure 5.4. DriverWizard               Multi-Interface INF File Information &#8212; Specific Interface</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/wiz_usb_inf_info_multi_ifc_ifc0.png" height="" alt="DriverWizard Multi-Interface INF File Information &#8212; Specific Interface"></div></div></div><br class="figure-break"></li><li class="listitem" style="list-style-type: disc">
            When selecting to generate an INF file for a composite device of a
            multi-interface USB device, the INF information dialogue provides
            you with the option to either generate an INF file for the root
            device itself, or generate an INF file for specific interfaces,
            which you can select from the dialogue.<br>
            Selecting to generate an INF file for the root device will enable
            you to handle multiple active interfaces simultaneously.
            <div class="figure"><a name="wiz_usb_inf_info_multi_ifc_comp"></a><p class="title"><b>Figure 5.5. DriverWizard               Multi-Interface INF File Information &#8212; Composite Device</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/wiz_usb_inf_info_multi_ifc_comp.png" height="" alt="DriverWizard Multi-Interface INF File Information &#8212; Composite Device"></div></div></div><br class="figure-break"></li></ul></div></li><li class="listitem"><p>
        When you are done, click <span class="jmenuitem"><strong>Next</strong></span> and choose the
        directory in which you wish to store the generated INF file.
        DriverWizard will then automatically generate the INF file for you.
        </p><p>
        
        You can choose to automatically install the INF file by checking the
        <span class="jmenuitem"><strong>Automatically Install the INF file</strong></span> option in the
        DriverWizard's INF generation dialogue.<br>
        
        
        If the automatic INF file installation fails, DriverWizard will notify
        you and provide manual installation instructions (refer also the manual
        INF file installation instructions in <a class="xref" href="#winpnp_inf" title="11.1. Windows INF Files"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 11.1</fo:inline></a>).
        
        </p></li><li class="listitem">
        When the INF file installation completes, select and open your device
        from the list in the <span class="jmenuitem"><strong>Select Your Device</strong></span> screen.
        </li></ol></div><p>
    </p></li><li class="listitem"><p>
    <span class="b"><strong>Uninstall the INF file of your device [Windows]:</strong></span><br>
    On Windows, you can use DriverWizard to uninstall a previously installed
     device INF
    file. This will unregister the device from its current driver and delete
    the copy of the INF file in the Windows INF directory.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
    In order for WinDriver to correctly identify the resouces of a
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format">USB</span>
    device and communicate with it &#8212; including for the purpose of the
    DriverWizard device diagnostics outlined in the next step &#8212; the
    deivce must be registered to work with WinDriver via an INF file (see
    <a class="xref" href="#step_dw_inf_gen_install"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Step 3</fo:inline></a>).
    </td></tr></table></div><p>
    <span class="b"><strong>If you do not wish to uninstall an INF file, skip this step.</strong></span>
    </p><p>
    To uninstall the INF file, do the following:
    </p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
        In the <a class="link" href="#figure_wiz_select_device" title="Figure 5.2. Select Your Device"><span class="jmenuitem"><strong>Select
          Your Device</strong></span></a> screen
        (see <a class="xref" href="#step_dw_wiz_run_n_dev_select"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Step 2</fo:inline></a>), click the
        <span class="jmenuitem"><strong>Uninstall .INF file</strong></span> button.
      </li><li class="listitem">
        Select the INF file to be removed.
      </li></ol></div><p>
    </p></li><li class="listitem"><p>
    <span class="b"><strong>Select the desired alternate setting:</strong></span>

    </p><div class="figure"><a name="wiz_usb_select_dev_ifc"></a><p class="title"><b>Figure 5.6. Select Device Interface</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/wiz_usb_select_dev_ifc.png" height="" alt="Select Device Interface"></div></div></div><p><br class="figure-break">
    </p><p>
    DriverWizard detects all the device's supported alternate settings and
    displays them, as demonstrated in <a class="xref" href="#wiz_usb_select_dev_ifc" title="Figure 5.6. Select Device Interface"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Figure 5.6</fo:inline></a>
    below.<br>
    Select the desired <span class="jmenupath"><strong>alternate setting</strong></span> from the
    displayed list.
    </p><p>
    DriverWizard will display the pipes information for the selected alternate
    setting.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
    For USB devices with only one alternate setting configured, DriverWizard
    automatically selects the detected alternate setting and therefore the
    <span class="jmenuitem"><strong>Select Device Interface</strong></span> dialogue will not be
    displayed.
    </td></tr></table></div></li><li class="listitem"><a name="step_dw_dev_diagnose_usb"></a>
    <span class="b"><strong>Diagnose your device:</strong></span><br>
    Before writing your device driver, it is important to make sure your
    hardware is working as expected. Use DriverWizard to diagnose your
    hardware. All of your activity will be logged in the DriverWizard log so
    that you may later analyze your tests:
    <div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
        Test your USB device's pipes: DriverWizard shows the pipes detected for
        the selected alternate setting. To perform USB data transfers on the
        pipes, follow these steps:
        <div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
            Select the desired pipe.
          </li><li class="listitem"><p>
            For a control pipe (a bidirectional pipe), click <span class="jmenuitem"><strong>Read /
            Write</strong></span>. A new dialogue will appear, allowing you to
            select a standard USB request or define a custom request, as
            demonstrated in <a class="xref" href="#wiz_usb_rwpipe_ctr_custom_req" title="Figure 5.7. USB Control Transfers"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Figure 5.7</fo:inline></a>.
            </p><div class="figure"><a name="wiz_usb_rwpipe_ctr_custom_req"></a><p class="title"><b>Figure 5.7. USB Control Transfers</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/wiz_usb_rwpipe_ctr_custom_req.png" height="" alt="USB Control Transfers"></div></div></div><br class="figure-break"><p>
            When you select one of the available standard USB requests, the
            setup packet information for the selected request is automatically
            filled and the request description is displayed in the
            <span class="jmenuitem"><strong>Request Description</strong></span> box.
            </p><p>
            For a custom request, you are required to enter the setup packet
            information and write data (if exists) yourself. The size of the
            setup packet should be eight bytes and it should be defined using
            little endian byte ordering. The setup packet information should
            conform to the USB specification parameters
            (<code class="japi">bmRequestType</code>, <code class="japi">bRequest</code>,
            <code class="japi">wValue</code>, <code class="japi">wIndex</code>, <code class="japi">wLength</code>).
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
            More detailed information on the standard USB requests, on how to
            implement the control transfer and how to send setup packets can be
            found in <a class="xref" href="#USB_Control_Trans" title="8.2. USB Control Transfers"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 8.2</fo:inline></a>.
            </td></tr></table></div></li><li class="listitem"><p>
            For an input pipe (moves data from device to host) click
            <span class="jmenuitem"><strong>Listen to Pipe</strong></span>. To successfully accomplish
            this operation with devices other than HID, you need to first
            verify that the device sends data to the host. If no data is sent
            after listening for a short period of time, DriverWizard will
            notify you that the <span class="jmenuitem"><strong>Transfer Failed</strong></span>.
            </p><p>
            To stop reading, click <span class="jmenuitem"><strong>Stop Listen to Pipe</strong></span>.
            </p><div class="figure"><a name="wiz_usb_pipe_in"></a><p class="title"><b>Figure 5.8. Listen to Pipe</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/wiz_usb_pipe_in.png" alt="Listen to Pipe"></div></div></div><br class="figure-break"></li><li class="listitem">
            For an output pipe (moves data from host to device), click
            <span class="jmenuitem"><strong>Write to Pipe</strong></span>. A new dialogue box will
            appear asking you to enter the data to write. The DriverWizard log
            will contain the result of the operation.
            <div class="figure"><a name="wiz_usb_pipe_out_write"></a><p class="title"><b>Figure 5.9. Write to Pipe</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/wiz_usb_pipe_out_write.png" alt="Write to Pipe"></div></div></div><br class="figure-break"></li><li class="listitem">
            You can reset input and output pipes by pressing the
            <span class="jmenuitem"><strong>Reset Pipe</strong></span> button for the selected pipe.
            </li></ol></div></li></ol></div></li><li class="listitem"><a name="step_dw_code_gen"></a><span class="b"><strong>Generate the skeletal driver code:</strong></span><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><a name="step_dw_code_gen_code"></a>
        Select to generate code either via the
        <span class="jmenuitem"><strong>Generate Code</strong></span> toolbar icon or from the
        <span class="jmenuitem"><strong>Project | Generate Code</strong></span> menu.
        </li><li class="listitem"><a name="step_dw_code_gen_select_code_gen_opt"></a>
        In the <span class="jmenuitem"><strong>Select Code Generation Options</strong></span> dialogue
        box that will appear, 
        choose the code language and development environment(s) for the
        generated code and select <span class="jmenuitem"><strong>Next</strong></span> to generate the
        code.
        <div class="figure"><a name="wiz_usb_gen_code"></a><p class="title"><b>Figure 5.10. Code Generation Options</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/wiz_usb_gen_code.png" height="" alt="Code Generation Options"></div></div></div><br class="figure-break"></li><li class="listitem">
        Save your project (if required) and click <span class="jmenuitem"><strong>OK</strong></span> to
        open your development environment with the generated driver.
        </li><li class="listitem">
        Close DriverWizard to avoid device overlap errors.
      </li></ol></div></li><li class="listitem"><p><a name="step_dw_code_build"></a>
    <span class="b"><strong>Compile and run the generated code:</strong></span>

    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
        Use this code as a starting point for your device driver. Modify
        where needed to perform your driver's specific functionality.
        </li><li class="listitem" style="list-style-type: disc">
        The source code DriverWizard creates can be compiled with any 32-&#65279;bit
        compiler, and will run on all supported platforms without
        modification.
        </li></ul></div><p>
    </p><p>
    For detailed compilation instructions, refer to
    <a class="xref" href="#wiz_gen_code_compile" title="5.2.2. Compiling the Generated Code"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 5.2.2</fo:inline></a>.
    </p></li></ol></div><p>





</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="wiz_auto_code_gen"></a>5.2.1. Automatic Code Generation</h3></div></div></div><p>
After you have finished diagnosing your device and have ensured that it runs
according to your specifications, you are ready to write your driver.
</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="wiz_code_gen"></a>5.2.1.1. Generating the Code</h4></div></div></div><p>
Generate code by selecting this option either via DriverWizard's
<span class="jmenuitem"><strong>Generate Code</strong></span> toolbar icon or from the wizard's
<span class="jmenuitem"><strong>Project | Generate Code </strong></span> menu (see
<a class="xref" href="#DriverWizard_Walkthrough" title="5.2. DriverWizard Walkthrough"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 5.2</fo:inline></a>, <a class="xref" href="#step_dw_code_gen"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Step 7</fo:inline></a>). DriverWizard will generate the source
code for your driver.
  
The files are saved in a directory DriverWizard creates for every development
environment and operating system selected in the code generation dialogue.
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="wiz_gen_C_code_usb"></a>5.2.1.2. The Generated USB C Code</h4></div></div></div><p>
In the source code directory you now have a new
<span class="jprintfilename"><strong>xxx_diag.c</strong></span> source file (where
<span class="jprintfilename"><strong>xxx</strong></span> is the name you selected for your
DriverWizard project). This file implements a diagnostic USB application, which
demonstrates how to use WinDriver's USB API to locate and communicate with your
USB device(s), including detection of Plug&#65279;-&#65279;and&#65279;-&#65279;Play events (device insertion/removal,
etc.), performing read/write transfers on the pipes, resetting the pipes and
changing the device's active alternate setting.<br>
The generated application supports handling of multiple identical USB devices.
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="wiz_gen_py_code_usb"></a>5.2.1.3. The Generated USB Python Code</h4></div></div></div><p>
In the source code directory you now have a new
<span class="jprintfilename"><strong>xxx_diag.py</strong></span> source file (where
<span class="jprintfilename"><strong>xxx</strong></span> is the name you selected for your
DriverWizard project). This file implements a diagnostic USB application, which
demonstrates how to use WinDriver's USB API to locate and communicate with your
USB device(s), including detection of Plug&#65279;-&#65279;and&#65279;-&#65279;Play events (device insertion/removal,
etc.), performing read/write transfers on the pipes, resetting the pipes and
changing the device's active alternate setting.<br>
The generated application supports handling of multiple identical USB devices.
</p>
The <span class="jdirectory"><strong>wdlib</strong></span> subdirectory
includes shared Python code files that implement the WinDriver API structs,
import the WinDriver user API DLL file, define variables, and implement user
I/O functions required for the user application to run.
</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="wiz_gen_cs_code_usb"></a>5.2.1.4. The Generated USB C#.NET Code</h4></div></div></div><p>
In the source code directory you now have a Visual Studio solution with 2
projects in it:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><span class="jdirectory"><strong>diag</strong></span>:
Implements a diagnostic USB application, which
demonstrates how to use WinDriver's USB API to locate and communicate with your
USB device(s), including detection of Plug&#65279;-&#65279;and&#65279;-&#65279;Play events (device insertion/removal,
etc.), performing read/write transfers on the pipes, resetting the pipes and
changing the device's active alternate setting.<br>
The generated application supports handling of multiple identical USB devices.

</li><li class="listitem"><span class="jdirectory"><strong>lib</strong></span>:
Implements a DLL library that is used by the <span class="jdirectory"><strong>diag</strong></span>
project in order to access WinDriver's APIs.

</li></ol></div><p>
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="wiz_gen_vb_code_usb"></a>5.2.1.5. The Generated USB Visual Basic.NET Code</h4></div></div></div><p>
In the source code directory you now have a Visual Studio solution with 2
projects in it:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><span class="jdirectory"><strong>diag</strong></span>:
Implements a diagnostic USB application, which
demonstrates how to use WinDriver's USB API to locate and communicate with your
USB device(s), including detection of Plug&#65279;-&#65279;and&#65279;-&#65279;Play events (device insertion/removal,
etc.), performing read/write transfers on the pipes, resetting the pipes and
changing the device's active alternate setting.<br>
The generated application supports handling of multiple identical USB devices.
</li><li class="listitem"><span class="jdirectory"><strong>lib</strong></span>:
Implements a DLL library (in C#.NET) that is used by the
<span class="jdirectory"><strong>diag</strong></span> project in order to access WinDriver's APIs.
</li></ol></div><p>
</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="wiz_gen_code_compile"></a>5.2.2. Compiling the Generated Code</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="wiz_win_gen_code_compile"></a>5.2.2.1. Windows Compilation</h4></div></div></div><p>
As explained above, on Windows you can select to generate project, solution,
and make files for the supported compilers and development environments &#8212;
MS Visual Studio, Windows GCC (MinGW/Cygwin).<br>
For integrated development environments (IDEs), such as MS Visual Studio, you can also
select to automatically invoke your selected IDE from the wizard. You can then
proceed to immediately build and run the code from your selected IDE.
</p><p>
You can also build the generated code using any other compiler or development
environment that supports the selected code language and target OS. Simply
create a new project or make file for your selected compiler/environment,
include the generated source files, and run the code.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    For Windows, the generated compiler/environment files are located under an
    <span class="jdirectory"><strong>x86</strong></span> directory &#8212; for 32-&#65279;bit projects
    &#8212; or an <span class="jdirectory"><strong>amd64</strong></span> directory &#8212; for 64-&#65279;bit
    projects.
  </li></ul></div></td></tr></table></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="wiz_running_compiled_win10iot"></a>5.2.2.1.1. Running compiled code under Windows 10 IoT Core</h5></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
Since Windows 10 IoT Core currently does not support WinForms applications, the
DriverWizard generated code in C#/Visual Basic (which use these libraries) will
not run on this environment. However, you can import
<span class="jprintfilename"><strong>wdapi_dotnet1281.dll</strong></span> and use it in
a console mode C#/VB.Net Application you develop.
</td></tr></table></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
Copy <span class="jprintfilename"><strong>wdapi1281.dll</strong></span> from
<span class="jprintfilename"><strong>WinDriver\redist</strong></span>. Make sure you are using the
suitable version for your platform (x86/x64/ARM).
</li><li class="listitem">
Compile your code on the development computer. Make sure you compile it to suit
your target platform.
</li><li class="listitem">
Copy your compiled binary to your Windows 10 IoT Core target computer and run
it using SSH.
</li></ol></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="wiz_unix_gen_code_compile"></a>5.2.2.2. Linux Compilation</h4></div></div></div>
<p>
Use the makefile that was created for you by DriverWizard in order to build
the generated code using your favorite compiler, preferably GCC.
</p>


</div></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="driver_develop"></a>Chapter 6. Developing a Driver</h1></div></div></div><p>
This chapter takes you through the WinDriver driver development cycle.
</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dev_driver_use_wiz"></a>6.1. Using DriverWizard to Build a Device Driver</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    Use DriverWizard to diagnose your device and verify that it operates as
    expected:<span xmlns:fo="http://www.w3.org/1999/XSL/Format">
      View the device's configuration information, transfer data on its pipes,
      send standard requests to the control pipe, and reset the pipes.
    </span>
    </li><li class="listitem" style="list-style-type: disc">
    Use DriverWizard to generate skeletal code for your device in
    C<span xmlns:fo="http://www.w3.org/1999/XSL/Format">, Visual Basic .NET,</span> or C&#65279;#. For more information about DriverWizard, refer to
    <a class="xref" href="#driverwizard" title="Chapter 5. Using DriverWizard"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Chapter 5</fo:inline></a>.
    </li><li class="listitem" style="list-style-type: disc">
    Use any C or .NET compiler or development environment (depending on the
    code you created) to build the skeletal driver you need.<br>
    WinDriver provides specific support for the following environments and
    compilers: MS Visual Studio, C&#65279;+&#65279;+, GCC, Windows GCC
    </li></ul></div><p>
That is all you need to do in order to create your user-mode driver.<br>

For a detailed description of WinDriver's <span xmlns:fo="http://www.w3.org/1999/XSL/Format">USB</span> API, refer to
<a class="xref" href="#API_REF" title="Appendix B. WinDriver USB Host API Reference"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Appendix B</fo:inline></a>.<br>

<span xmlns:fo="http://www.w3.org/1999/XSL/Format">
For more information regarding implementation of USB transfers with WinDriver,
refer to <a class="xref" href="#USB_Trans" title="Chapter 8. USB Transfers"><fo:inline>Chapter 8</fo:inline></a>.
</span>




</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="driver_dev_no_wizard"></a>6.2. Writing the Device Driver Without DriverWizard</h2></div></div></div><p>
There may be times when you choose to write your driver directly, without
using DriverWizard. In such cases, either follow the steps outlined in this
section to create a new driver project, or select a WinDriver sample that most
closely resembles your target driver and modify it to suit your specific
requirements.
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="no_wiz_include_req_wd_files"></a>6.2.1. Include the Required WinDriver Files</h3></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
    Include the relevant WinDriver header files in your driver project.<br>
    All header files are found under the
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>WinDriver/include</strong></span></span> directory.
    </p><p>
    All WinDriver projects require the <span class="jprintfilename"><strong>windrvr.h</strong></span>
    header file.<br>
   <span xmlns:fo="http://www.w3.org/1999/XSL/Format">
    When using the <code class="japi">WDU_xxx</code> WinDriver USB API<a class="xref" href="#WDU_Overview" title="B.2. WinDriver USB (WDU) Library Overview"><fo:inline> [B.2]</fo:inline></a>,
    include the <span class="jprintfilename"><strong>wdu_lib.h</strong></span> header file; (this
    file already includes <span class="jprintfilename"><strong>windrvr.h</strong></span>).<br>
   </span>
   
    </p><p>
    Include any other header file that provides APIs that you wish to use from
    your code (e.g., files from the
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>WinDriver/samples/shared</strong></span></span>
    directory, which provide convenient diagnostics functions.)
    </p></li><li class="listitem">
    Include the relevant header files from your source code:
   <span xmlns:fo="http://www.w3.org/1999/XSL/Format">
    For example, to use the USB API from the
    <span class="jprintfilename"><strong>wdu_lib.h</strong></span> header file, add the following
    line to the code:
    <pre class="screen">#include "wdu_lib.h"</pre>
   </span></li><li class="listitem">
    Link your code with the WDAPI library (Windows) / shared object 
    (Linux):<br><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
        For Windows:
        <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jprintfilename"><strong>WinDriver\lib\&lt;CPU&gt;\wdapi1281.lib</strong></span></span>,
        where the <span class="jdirectory"><strong>&lt;CPU&gt;</strong></span> directory is either
        <span class="jdirectory"><strong>x86</strong></span> (32-&#65279;bit binaries for x86 platforms),
        <span class="jdirectory"><strong>amd64</strong></span> (64-&#65279;bit binaries for x64 platforms),
        or <span class="jdirectory"><strong>amd64\x86</strong></span> (32-&#65279;bit binaries for x64
        platforms<a class="xref" href="#32bit_app_on_64bit_arch_win_unix" title="A.2. Support for 32-&#65279;Bit Applications on 64-&#65279;Bit Windows and Linux Platforms"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A.2]</fo:inline></a></li><li class="listitem" style="list-style-type: disc">
        For Linux: From the
        <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>WinDriver/lib</strong></span></span> directory
        &#8212; <span class="jprintfilename"><strong>libwdapi1281.so</strong></span> or
        <span class="jprintfilename"><strong>libwdapi1281_32.so</strong></span> (for
        32-&#65279;bit applications targeted at 64-&#65279;bit platforms)<br>
        Note: When using
        <span class="jprintfilename"><strong>libwdapi1281_32.so</strong></span>, first
        create a copy of this file in a different directory and rename it to
        <span class="jprintfilename"><strong>libwdapi1281.so</strong></span>, then link
        your code with the renamed file<a class="xref" href="#32bit_app_on_64bit_arch_win_unix" title="A.2. Support for 32-&#65279;Bit Applications on 64-&#65279;Bit Windows and Linux Platforms"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A.2]</fo:inline></a>.
      </li></ul></div><p>
    You can also include the library's source files in your project instead of
    linking the project with the library. The C source files are located under
    the <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>WinDriver/src/wdapi</strong></span></span>
    directory.
    
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
    When linking your project with the WDAPI library/shared object, you will need to
    distribute this binary with your driver.<br>
    For Windows, get <span class="jprintfilename"><strong>wdapi1281.dll</strong></span>
    / <span class="jprintfilename"><strong>wdapi1281_32.dll</strong></span> (for
    32-&#65279;bit applications targeted at 64-&#65279;bit platforms) from the
    <span class="jdirectory"><strong>WinDriver&#65279;\&#65279;redist</strong></span> directory.<br>
    For Linux, get
    <span class="jprintfilename"><strong>libwdapi1281.so</strong></span> /
    <span class="jprintfilename"><strong>libwdapi1281_32.so</strong></span>
    (for 32-&#65279;bit applications targeted at 64-&#65279;bit platforms) from the
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>WinDriver/lib</strong></span></span> directory.
    </td></tr></table></div><p>
    Note: On Windows and Linux, when using the DLL/shared object file
    for 32-&#65279;bit applications on 64-&#65279;bit platforms
    (<span class="jprintfilename"><strong>wdapi1281_32.dll</strong></span> /
    <span class="jprintfilename"><strong>libwdapi1281_32.so</strong></span>), rename
    the copy of the file in the distribution package, by removing the
    <span class="jprintfilename"><strong>_32</strong></span> portion<a class="xref" href="#32bit_app_on_64bit_arch_win_unix" title="A.2. Support for 32-&#65279;Bit Applications on 64-&#65279;Bit Windows and Linux Platforms"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A.2]</fo:inline></a>.<br>
    For detailed distribution instructions, refer to
    <a class="xref" href="#driver_distribution" title="Chapter 10. Distributing Your Driver"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Chapter 10</fo:inline></a>.
    </p></li><li class="listitem">
    Add any other WinDriver source files that implement API that you which to use
    in your code (e.g., files from the
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>WinDriver/samples/shared</strong></span></span>
    directory.)
  </li></ol></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="no_wiz_write_your_code"></a>6.2.2. Write Your Code</h3></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
    Call <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WDU_Init</code><span class="japi">()</span></span><a class="xref" href="#WDU_Init" title="B.4.1. WDU_Init"><fo:inline> [B.4.1]</fo:inline></a></span> at the beginning of your program to initialize
    WinDriver for your USB device, and wait for the device-attach callback. The
    relevant device information will be provided in the attach callback.
  </li><li class="listitem">
    Once the attach callback is received, you can start using one of the
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WDU_Transfer</code><span class="japi">()</span></span><a class="xref" href="#WDU_Transfer" title="B.4.8.1. WDU_Transfer"><fo:inline> [B.4.8.1]</fo:inline></a></span> functions family to send and receive data.
  </li><li class="listitem">
    To finish, call <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WDU_Uninit</code><span class="japi">()</span></span><a class="xref" href="#WDU_Uninit" title="B.4.7. WDU_Uninit"><fo:inline> [B.4.7]</fo:inline></a></span> to unregister from the device.
  </li></ol></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="no_wiz_cfg_n_build_code"></a>6.2.3. Configure and Build Your Code</h3></div></div></div><p>
After including the required files and writing your code, make sure that the
required build flags and environment variables are set, then build your code.
</p><div class="info" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/info.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
When developing a driver for a 64-&#65279;bit platform<a class="xref" href="#64bit_os_sup" title="Appendix A. 64-&#65279;Bit Operating Systems Support"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>, your
project or makefile must include the <strong class="japib"><code>KERNEL_64BIT</code></strong> preprocessor
definition. In the makefiles, the definition is
  added using the <code class="japi">-D</code> flag: <code class="japi">-&#65279;DKERNEL_64BIT</code>.
(The sample and
  wizard-generated Linux and Windows GCC makefiles and the Windows MS Visual Studio
  projects, in the 64-&#65279;bit WinDriver toolkit, already include this definition.)
</td></tr></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
Before building your code, verify that the <code class="japi">WD_BASEDIR</code> environment
variable is set to the location of the of the WinDriver installation directory.
<br>
On Windows and Linux you can define the <code class="japi">WD_BASEDIR</code>
environment variable globally &#8212; as explained in
<a class="xref" href="#wd_install" title="Chapter 4. Installing WinDriver"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Chapter 4</fo:inline></a>: For Windows &#8212; refer to the
<a class="xref" href="#wd_install_windows_notes_wd_basedir_note"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Windows WD_BASEDIR note</fo:inline></a> in
<a class="xref" href="#wd_install_windows" title="4.2.1. Windows WinDriver Installation Instructions"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 4.2.1</fo:inline></a>; for Linux: refer to
<a class="xref" href="#wd_linux_installation" title="4.2.2.2. Installation"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 4.2.2.2</fo:inline></a>,
<a class="xref" href="#wd_linux_installation_step_wd_basedir"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Step 8</fo:inline></a>.
</td></tr></table></div></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="debugging_drivers"></a>Chapter 7. Debugging Drivers</h1></div></div></div><p>
The following sections describe how to debug your hardware-access application
code.
</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dbg_user"></a>7.1. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">User-Mode Debugging</span></h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    Since WinDriver is accessed from the user mode, we recommend that you first
    debug your code using your standard debugging software.
  </li><li class="listitem" style="list-style-type: disc">
    The Debug Monitor utility<a class="xref" href="#Debug_Monitor" title="7.2. Debug Monitor"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [7.2]</fo:inline></a> logs debug messages from
    WinDriver's kernel-mode and user-mode APIs. You can also use WinDriver APIs to
    send your own debug messages to the Debug Monitor log.
  </li><li class="listitem" style="list-style-type: disc">
    Use DriverWizard to validate your device's USB configuration and test the
    communication with the device.
  </li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Debug_Monitor"></a>7.2. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">Debug Monitor</span></h2></div></div></div><p>
Debug Monitor is a powerful graphical- and console-mode tool for monitoring all
activities handled by the WinDriver kernel.<br>
You can use this tool to monitor how each command sent to the kernel is
executed.
</p><p>
In addition, WinDriver enables you to print your own debug messages to the
Debug Monitor, using the <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_DebugAdd</code><span class="japi">()</span></span><span> function</span><a class="xref" href="#WD_DebugAdd" title="B.6.6. WD_DebugAdd()"><fo:inline> [B.6.6]</fo:inline></a></span>

or the high&#65279;-&#65279;level <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">PrintDbgMessage</code><span class="japi">()</span></span><span> function</span><a class="xref" href="#PrintDbgMessage" title="B.7.15. PrintDbgMessage"><fo:inline> [B.7.15]</fo:inline></a></span>.
</p><p>
The Debug Monitor comes in two versions:<br>
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><span class="jprintfilename"><strong>wddebug_gui</strong></span><a class="xref" href="#wddebug_gui" title="7.2.1. The wddebug_gui Utility"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [7.2.1]</fo:inline></a> &#8212;
    a GUI version for Windows and Linux.
  </li><li class="listitem" style="list-style-type: disc"><span class="jprintfilename"><strong>wddebug</strong></span><a class="xref" href="#wddebug" title="7.2.2. The wddebug Utility"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [7.2.2]</fo:inline></a> &#8212; a
    console-mode version for <span xmlns:fo="http://www.w3.org/1999/XSL/Format">Windows, and Linux</span>.
  </li></ul></div><p>
</p><p>
Both Debug Monitor versions are provided in the
<span class="jdirectory"><strong>WinDriver/util</strong></span> directory
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="wddebug_gui"></a>7.2.1. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">The wddebug_gui Utility</span></h3></div></div></div><p>
<span class="jprintfilename"><strong>wddebug_gui</strong></span> is a fully graphical (GUI) version
of the Debug Monitor utility for Windows and Linux.

</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
    Run the Debug Monitor using either of the following methods:
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
        Run <span class="jprintfilename"><strong>WinDriver/util/wddebug_gui</strong></span></li><li class="listitem" style="list-style-type: disc">
        Run the Debug Monitor from DriverWizard's <span class="jmenuitem"><strong>Tools</strong></span>
        menu.
      </li><li class="listitem" style="list-style-type: disc">
        On Windows, run
        <span class="jmenupath"><strong>Start | Programs | WinDriver | Debug Monitor</strong></span>.
      </li></ul></div><div class="figure"><a name="dbgm_log"></a><p class="title"><b>Figure 7.1. Start Debug Monitor</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/dbgm_log.png" height="" alt="Start Debug Monitor"></div></div></div><br class="figure-break"></li><li class="listitem"><a name="step_wddebug_gui_opts"></a>
    Set the Debug Monitor's status, trace level and debug sections information
    from the <span class="jmenuitem"><strong>Debug Options</strong></span> dialogue, which is activated
    either from the Debug Monitor's <span class="jmenupath"><strong>View | Debug Options</strong></span>
    menu or the <span class="jmenuitem"><strong>Debug Options</strong></span> toolbar button.
    <div class="figure"><a name="dbgm_dbg_opts"></a><p class="title"><b>Figure 7.2. Debug Options</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/dbgm_dbg_opts.png" height="" alt="Debug Options"></div></div></div><br class="figure-break"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><span class="jmenuitem"><strong>Status</strong></span> &#8212; Set trace on or off.
      </li><li class="listitem" style="list-style-type: disc">
        <span class="jmenuitem"><strong>Section</strong></span> &#8212; Choose what part of the WinDriver
        API you would like to monitor.

        <p>
        USB developers should select the <span class="jmenuitem"><strong>USB</strong></span> section.
        </p>
        
        <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="scripts/images/tip.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
        Choose carefully those sections that you would like to monitor.
        Checking more options than necessary could result in an overflow of
        information, making it harder for you to locate your problem.
        </td></tr></table></div></li><li class="listitem" style="list-style-type: disc">
        <span class="jmenuitem"><strong>Level</strong></span> &#8212; Choose the level of messages you
        want to see for the resources defined.
        <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
            <span class="b"><strong>Error</strong></span> is the lowest trace level, resulting in minimum output
            to the screen.
            </li><li class="listitem">
            <span class="b"><strong>Trace</strong></span> is the highest trace level, displaying every operation
            the WinDriver kernel performs.
            </li></ul></div></li><li class="listitem" style="list-style-type: disc">
        <span class="jmenuitem"><strong>Send debug messages to the operating system kernel
          debugger</strong></span> &#8212;
        <p>
        Select this option to send the debug messages received from the WinDriver
        kernel module to an external kernel debugger, in addition to the
        Debug Monitor.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><span class="b"><strong>On Windows 7 and higher</strong></span>, the first time that you enable this option you
 will need to restart the PC.
 </td></tr></table></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="scripts/images/tip.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
        A free Windows kernel debugger, WinDbg, is distributed with the
        Windows Driver Kit (WDK) and is part of the Debugging Tools for Windows package,
        distributed via the Microsoft web site.
        </td></tr></table></div></li><li class="listitem" style="list-style-type: disc">
        <span class="jmenuitem"><strong>Driver Name</strong></span> &#8212;
        <p>
        This field displays the name of the driver currently being debugged. Changing it
        allows you to debug a renamed WinDriver driver.
        </p></li></ul></div></li><li class="listitem">
    Once you have defined what you want to trace and on what level, click
    <span class="jmenuitem"><strong>OK</strong></span> to close the
    <span class="jmenuitem"><strong>Debug Options</strong></span> window.
    </li><li class="listitem">
    Optionally make additional configurations via the Debug Monitor menus and
    toolbar.
    <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="scripts/images/tip.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
    When debugging OS crashes or hangs, it's useful to auto-save the
    Debug Monitor log, via the <span class="jmenuitem"><strong>File &#8211;&gt;
      <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap">Toggle Auto-Save</span></strong></span> menu option
    (available also via a toolbar icon), in addition to sending the debug
    messages to the OS kernel debugger
    (see <a class="xref" href="#step_wddebug_gui_opts"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Step 2</fo:inline></a>).
    </td></tr></table></div></li><li class="listitem">
    Run your application (step-by-step or in one run).

    <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="scripts/images/tip.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
    You can use the <span class="jmenuitem"><strong>Edit &#8211;&gt;
      <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap">Add Custom Message...</span></strong></span> menu option
    (available also via a toolbar icon) to add custom messages to the log.
    This is especially useful for clearly marking different execution sections
    in the log.
    </td></tr></table></div></li><li class="listitem">
    Watch the Debug Monitor log (or the kernel debugger log, if enabled) for
    errors or any unexpected messages.
    </li></ol></div><p>
</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="search%20in%20wddebug_gui"></a>7.2.1.1. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">Search in wddebug_gui</span></h4></div></div></div><p>
    <span class="jprintfilename"><strong>wddebug_gui</strong></span> allows to find expressions in the Debug output in 4 ways:
    </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"> Starting to type an expression with the keyboard immediately searches for it in the Debug output.</li><li class="listitem"> Pressing <span class="jmenuitem"><strong>CTRL+F</strong></span> displays the Find field in the toolbar</li><li class="listitem"> Clicking the <span class="jmenuitem"><strong>Find</strong></span> icon in the toolbar. </li><li class="listitem"> Going to <span class="jmenuitem"><strong>Edit-&gt;Find...</strong></span></li></ol></div><p>

    If an expression is found it is marked.
    It is possible to browse between occurences of an expression using <span class="jmenuitem"><strong>Prev (F2)</strong></span> and <span class="jmenuitem"><strong>Next (F3)</strong></span>.
</p><div class="figure"><a name="dbgm_find"></a><p class="title"><b>Figure 7.3. Search in wddebug_gui</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/dbgm_find.png" height="" alt="Search in wddebug_gui"></div></div></div><br class="figure-break"></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="wddebug_gui_kernel_dump"></a>7.2.1.2. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">Opening Windows kernel crash dump with wddebug_gui</span></h4></div></div></div><p>
      In driver development, it is not uncommon to experience kernel crashes that lead to the Blue Screen of Death (BSOD). In order to assist developers in debugging and solving these crashes, WinDriver allows saving its kernel debug messages in the memory dump that Windows automatically creates when the system crashes. These crash dumps can later be opened in <span class="jprintfilename"><strong>wddebug_gui</strong></span> after the system was restarted.
    </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
        Make sure <span class="b"><strong>Send debug messages to the operating system kernel debugger</strong></span> is checked in the <span class="b"><strong>Options</strong></span> window before reproducing the crash.
    </li><li class="listitem">
        Load up the WinDriver symbols by going to <span class="b"><strong>File-&gt;Symbol File Path...</strong></span> and loading your driver's symbols <span class="jprintfilename"><strong>MyDriver.pdb</strong></span>(the file name for the default driver is <span class="jprintfilename"><strong>lib/windrvr1281.pdb</strong></span>). Do not skip this step, otherwise the kernel dump might not be comprehensible.
    </li><li class="listitem">
        Load the kernel crash dump (.dmp) file by going to <span class="b"><strong>File-&gt;Process Kernel Dump...</strong></span>. <span class="jprintfilename"><strong>wddebug_gui</strong></span> will display the output from the crash dump.
    </li></ol></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="wddebug_gui_renamed_driver"></a>7.2.1.3. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">Running wddebug_gui for a Renamed Driver</span></h4></div></div></div><p>
By default, <span class="jprintfilename"><strong>wddebug_gui</strong></span> logs messages from the
default WinDriver kernel module &#8212; <span class="jprintfilename"><strong>windrvr1281.sys/.dll/.o/.ko</strong></span>. However, you can
also use <span class="jprintfilename"><strong>wddebug_gui</strong></span> to log debug messages
from a renamed version of this driver<a class="xref" href="#wd_rename_driver" title="11.2. Renaming the WinDriver Kernel Driver"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [11.2]</fo:inline></a>, in two ways:

</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">From within <span class="jprintfilename"><strong>wddebug_gui</strong></span>, By going to <span class="jmenuitem"><strong>View-&gt;Debug Options</strong></span> and changing the value of the "Driver name" field to
        your own renamed driver's name.
    </li><li class="listitem">By running <span class="jprintfilename"><strong>wddebug_gui</strong></span> from the command line with the
<strong class="jcmd"><code>driver_name</code></strong> argument:
<strong class="jcmd"><code>wddebug_gui &lt;driver_name&gt;</code></strong>.
    </li></ol></div><p>
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
The driver name should be set to the name of the driver file without the file's
extension; e.g., <span class="jprintfilename"><strong>windrvr1281</strong></span>, not <span class="jprintfilename"><strong>windrvr1281.sys</strong></span> (on Windows)
or <span class="jprintfilename"><strong>windrvr1281.o</strong></span> (on Linux).
</td></tr></table></div><p>
For example, if you have renamed the default <span class="jprintfilename"><strong>windrvr1281.sys</strong></span> driver on
Windows to <span class="jprintfilename"><strong>my_driver.sys</strong></span>, you can log messages
from your driver by running the Debug Monitor using the following command:
<strong class="jcmd"><code>wddebug_gui my_driver</code></strong>
</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="wddebug"></a>7.2.2. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">The wddebug Utility</span></h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="wddebug_console"></a>7.2.2.1. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">Console-Mode wddebug Execution</span></h4></div></div></div><p>
The <span class="jprintfilename"><strong>wddebug</strong></span> version of the Debug Monitor
utility can be executed as a console-mode application on all supported
operating systems: <span xmlns:fo="http://www.w3.org/1999/XSL/Format">Windows, and Linux</span>. To use the console-mode Debug Monitor
version, run
<span class="jprintfilename"><strong>WinDriver/util/wddebug</strong></span> in the manner explained
below.
</p>
<h4><a name="idp46069372558864"></a></h4><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.5em"><span class="bridgehead">wddebug console-mode usage</span></div>

<p>
</p><pre class="screen">wddebug [&lt;driver_name&gt;] [&lt;command&gt;] [&lt;level&gt;] [&lt;sections&gt;]</pre><p>
</p>

<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
The <span class="jprintfilename"><strong>wddebug</strong></span> arguments must be provided in the
order in which they appear in the usage statement above.
</td></tr></table></div>
<p>
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p><a name="wddebug_arg_driver_name"></a>
    <strong class="jcmd"><code>&lt;driver_name&gt;</code></strong> &#8212; The name of the driver to which to
    apply the command.
    </p><p>
    The driver name should be set to the name of the WinDriver kernel module
    &#8212; <span class="jprintfilename"><strong>windrvr1281</strong></span> (default), or a renamed version of this driver (refer
    to the explanation in <a class="xref" href="#wd_rename_driver" title="11.2. Renaming the WinDriver Kernel Driver"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 11.2</fo:inline></a>).
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
    The driver name should be set to the name of the driver file without the
    file's extension; e.g., <span class="jprintfilename"><strong>windrvr1281</strong></span>, <em class="it">not </em><span class="jprintfilename"><strong>windrvr1281.sys</strong></span> (on Windows) or
    <span class="jprintfilename"><strong>windrvr1281.o</strong></span> (on Linux).
    </td></tr></table></div></li><li class="listitem" style="list-style-type: disc"><strong class="jcmd"><code>&lt;command&gt;</code></strong> &#8212; The Debug Monitor command to execute:

    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
        Activation commands:

        <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><a name="wddebug_cmd_on"></a><strong class="jcmd"><code>on</code></strong> &#8212; Turn the Debug Monitor on.
          </li><li class="listitem"><a name="wddebug_cmd_off"></a><strong class="jcmd"><code>off</code></strong> &#8212; Turn the Debug Monitor off.
          </li><li class="listitem"><a name="wddebug_cmd_dbg_on"></a><strong class="jcmd"><code>dbg_on</code></strong> &#8212; Redirect the debug messages from the
            Debug Monitor to a kernel debugger and turn the Debug Monitor on
            (if it was not already turned on).
            
 <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><span class="b"><strong>On Windows 7 and higher</strong></span>, the first time that you enable this option you
 will need to restart the PC.
 </td></tr></table></div></li><li class="listitem"><a name="wddebug_cmd_dbg_off"></a><strong class="jcmd"><code>dbg_off</code></strong>  &#8212; Stop redirecting debug messages from
            the Debug Monitor to a kernel debugger.
            </li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
        The <strong class="jcmd"><code><a class="xref" href="#wddebug_cmd_on"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">on</fo:inline></a></code></strong> and
        <strong class="jcmd"><code><a class="xref" href="#wddebug_cmd_dbg_on"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">dbg_on</fo:inline></a></code></strong> commands can be used
        together with the <strong class="jcmd"><code><a class="xref" href="#wddebug_arg_level"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">&lt;level&gt;</fo:inline></a></code></strong> and
        <strong class="jcmd"><code><a class="xref" href="#wddebug_arg_sections"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">&lt;sections&gt;</fo:inline></a></code></strong> arguments.
        </td></tr></table></div></li><li class="listitem"><a name="wddebug_cmd_dump"></a><strong class="jcmd"><code>dump</code></strong> &#8212; Continuously send ("dump") debug information
        to the command prompt, until the user selects to stop (by following the
        instructions displayed in the command prompt).
        </li><li class="listitem"><a name="wddebug_cmd_status"></a><strong class="jcmd"><code>status</code></strong> &#8212; Display information regarding the running
        driver (<strong class="jcmd"><code>&lt;driver_name&gt;</code></strong>), the current Debug Monitor
        status &#8212; including the active debug level and sections (when the
        Debug Monitor is on) &#8212; and the size of the debug-messages buffer.
      </li><li class="listitem"><a name="wddebug_cmd_clock_on"></a><strong class="jcmd"><code>clock_on</code></strong> &#8212; Add a timestamp to each debug message.
        The timestamps are relative to the driver-load time, or to the time of
        the last <strong class="jcmd"><code><a class="xref" href="#wddebug_cmd_clock_reset"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">clock_reset</fo:inline></a></code></strong> command.
      </li><li class="listitem"><a name="wddebug_cmd_clock_off"></a><strong class="jcmd"><code>clock_off</code></strong> &#8212; Do not add timestamps to the debug
        messages.
      </li><li class="listitem"><a name="wddebug_cmd_clock_reset"></a><strong class="jcmd"><code>clock_reset</code></strong> &#8212; Reset the debug-messages timestamps
        clock.
      </li><li class="listitem"><a name="wddebug_cmd_sect_info_on"></a><strong class="jcmd"><code>sect_info_on</code></strong> &#8212; Add section(s) information to each
        debug message.
      </li><li class="listitem"><a name="wddebug_cmd_sect_info_off"></a><strong class="jcmd"><code>sect_info_off</code></strong> &#8212; Do not add section(s) information to
        the debug messages.
      </li><li class="listitem"><a name="wddebug_cmd_help"></a><strong class="jcmd"><code>help</code></strong> &#8212; Display usage instructions.
      </li><li class="listitem">
        No arguments (including no commands) &#8212; This is equivalent to running
        '<strong class="jcmd"><code>wddebug <a class="xref" href="#wddebug_cmd_help"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">help</fo:inline></a></code></strong>'.
      </li></ul></div></li></ul></div><p>

</p><p>
The following arguments are applicable only with the
<strong class="jcmd"><code><a class="xref" href="#wddebug_cmd_on"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">on</fo:inline></a></code></strong> or
<strong class="jcmd"><code><a class="xref" href="#wddebug_cmd_dbg_on"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">dbg_on</fo:inline></a></code></strong> commands:
</p><p>

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><a name="wddebug_arg_level"></a><strong class="jcmd"><code>&lt;level&gt;</code></strong> &#8212; The debug trace level to set &#8212;
    one of the following flags: <strong class="japib"><code>ERROR</code></strong>, <strong class="japib"><code>WARN</code></strong>,
    <strong class="japib"><code>INFO</code></strong>, or <strong class="japib"><code>TRACE</code></strong> (default).<br><code class="japi">ERROR</code> is the lowest trace level and <code class="japi">TRACE</code> is the
    highest level (displays all messages).<br><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
    When the <strong class="jcmd"><code><a class="xref" href="#wddebug_arg_sections"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">&lt;sections&gt;</fo:inline></a></code></strong> argument is
    set, the <strong class="jcmd"><code>&lt;level&gt;</code></strong> argument must be set as well (no
    default).
    </td></tr></table></div></li><li class="listitem" style="list-style-type: disc"><p><a name="wddebug_arg_sections"></a>
    <strong class="jcmd"><code>&lt;sections&gt;</code></strong> &#8212; The debug sections &#8212; i.e., the
    WinDriver API sections &#8212; to monitor.<br>
    This argument can be set either to <strong class="jcmd"><code>ALL</code></strong> (default) &#8212; to
    monitor all the supported debug sections &#8212; or to a quoted string that
    contains a combination of any of the supported debug-section flags (run
    '<strong class="jcmd"><code>wddebug <a class="xref" href="#wddebug_cmd_help"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">help</fo:inline></a></code></strong>' to see the full list).
    </p></li></ul></div><p>
</p>
<h4><a name="idp46069372607952"></a></h4><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.5em"><span class="bridgehead">Usage Sequence</span></div>

<p>
To log messages using <span class="jprintfilename"><strong>wddebug</strong></span>, use the
following sequence:
</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
    Turn on the Debug Monitor by running
    <span class="jprintfilename"><strong>wddebug</strong></span> with either the
    <strong class="jcmd"><code><a class="xref" href="#wddebug_cmd_on"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">on</fo:inline></a></code></strong> or
    <strong class="jcmd"><code><a class="xref" href="#wddebug_cmd_dbg_on"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">dbg_on</fo:inline></a></code></strong> command; the latter redirects
    the debug messages to the OS kernel debugger before turning on the
    Debug Monitor.
    </p><p>
    You can use the <strong class="jcmd"><code><a class="xref" href="#wddebug_arg_level"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">&lt;level&gt;</fo:inline></a></code></strong> and
    <strong class="jcmd"><code><a class="xref" href="#wddebug_arg_sections"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">&lt;sections&gt;</fo:inline></a></code></strong> arguments to set the debug
    level and sections for the log. If these arguments are not explicitly set,
    the default values will be used; (note that if you set the sections you
    must also set the level).
    </p><p>
    You can also log messages from a renamed WinDriver driver by preceding the
    command with the name of the driver (default: <span class="jprintfilename"><strong>windrvr1281</strong></span>) &#8212; see
    the <strong class="jcmd"><code><a class="xref" href="#wddebug_arg_driver_name"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">&lt;driver_name&gt;</fo:inline></a></code></strong> argument.
    </p></li><li class="listitem" style="list-style-type: disc">
    If you did not select to redirect the debug messages to the OS kernel
    debugger (using the <strong class="jcmd"><code><a class="xref" href="#wddebug_cmd_dbg_on"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">dbg_on</fo:inline></a></code></strong> command),
    run <span class="jprintfilename"><strong>wddebug</strong></span> with the
    <strong class="jcmd"><code><a class="xref" href="#wddebug_cmd_dump"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">dump</fo:inline></a></code></strong> command to begin dumping debug
    messages to the command prompt.<br>
    You can turn off the display of the debug messages, at any time, by
    following the instructions displayed in the command prompt.
  </li><li class="listitem" style="list-style-type: disc">
    Run applications that use the driver, and view the debug messages as they
    are being logged to the command prompt/the kernel debugger.
  </li><li class="listitem" style="list-style-type: disc">
    At any time while the Debug Monitor is running, you can run
    <span class="jprintfilename"><strong>wddebug</strong></span> with the following commands:
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><strong class="jcmd"><code><a class="xref" href="#wddebug_cmd_status"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">status</fo:inline></a></code></strong>,
        <strong class="jcmd"><code><a class="xref" href="#wddebug_cmd_clock_on"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">clock_on</fo:inline></a></code></strong>,
        <strong class="jcmd"><code><a class="xref" href="#wddebug_cmd_clock_off"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">clock_off</fo:inline></a></code></strong>,
        <strong class="jcmd"><code><a class="xref" href="#wddebug_cmd_clock_reset"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">clock_reset</fo:inline></a></code></strong>,
        <strong class="jcmd"><code><a class="xref" href="#wddebug_cmd_sect_info_on"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">sect_info_on</fo:inline></a></code></strong>, or
        <strong class="jcmd"><code><a class="xref" href="#wddebug_cmd_sect_info_off"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">sect_info_off</fo:inline></a></code></strong>,
      </li><li class="listitem"><strong class="jcmd"><code><a class="xref" href="#wddebug_cmd_on"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">on</fo:inline></a></code></strong> or
        <strong class="jcmd"><code><a class="xref" href="#wddebug_cmd_dbg_on"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">dbg_on</fo:inline></a></code></strong> with different
        <strong class="jcmd"><code><a class="xref" href="#wddebug_arg_level"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">&lt;level&gt;</fo:inline></a></code></strong> and/or
        <strong class="jcmd"><code><a class="xref" href="#wddebug_arg_sections"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">&lt;sections&gt;</fo:inline></a></code></strong> arguments
      </li><li class="listitem"><strong class="jcmd"><code><a class="xref" href="#wddebug_cmd_dbg_on"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">dbg_on</fo:inline></a></code></strong> and
        <strong class="jcmd"><code><a class="xref" href="#wddebug_cmd_dbg_off"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">dbg_off</fo:inline></a></code></strong> &#8212; to toggle the
        redirection of debug messages to the OS kernel debugger
      </li><li class="listitem"><strong class="jcmd"><code><a class="xref" href="#wddebug_cmd_dump"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">dump</fo:inline></a></code></strong> &#8212; to start a new dump
        of the debug log to the command prompt; (the dump can be stopped at any
        time by following the instructions in the prompt)
      </li></ul></div></li><li class="listitem" style="list-style-type: disc">
    When you are ready, turn off the Debug Monitor by running
    <span class="jprintfilename"><strong>wddebug</strong></span> with the
    <strong class="jcmd"><code><a class="xref" href="#wddebug_cmd_off"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">off</fo:inline></a></code></strong> command.

    <div class="info" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/info.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
    The <strong class="jcmd"><code><a class="xref" href="#wddebug_cmd_status"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">status</fo:inline></a></code></strong> command can be used to view
    information regarding the running WinDriver driver even when the Debug Monitor
    is off.
    </td></tr></table></div>
    </li></ul></div>
<h5><a name="idp46069372634064"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<p>
The following is an example of a typical
<span class="jprintfilename"><strong>wddebug</strong></span> usage sequence. Since no
<strong class="jcmd"><code>&lt;driver_name&gt;</code></strong> is set, the commands are applied to the
default driver &#8212; <span class="jprintfilename"><strong>windrvr1281</strong></span>.

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
    Turn the Debug Monitor on with the highest trace level for all
    sections:<br>
    <strong class="jcmd"><code>wddebug on TRACE ALL</code></strong>
    </p><div class="info" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/info.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
    This is the same as running '<strong class="jcmd"><code>wddebug on TRACE</code></strong>', because
    <strong class="jcmd"><code>ALL</code></strong> is the default <a class="xref" href="#wddebug_arg_sections"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">&lt;sections&gt;</fo:inline></a> value.
    </td></tr></table></div></li><li class="listitem" style="list-style-type: disc">
    Dump the debug messages continuously to the command prompt or a file, until
    the user selects to stop:<br><strong class="jcmd"><code>wddebug dump</code></strong><br><strong class="jcmd"><code>wddebug dump &lt;filename&gt;</code></strong></li><li class="listitem" style="list-style-type: disc">
    Use the driver and view the debug messages in the command prompt.
  </li><li class="listitem" style="list-style-type: disc">
    Turn the Debug Monitor off:<br><strong class="jcmd"><code>wddebug off</code></strong></li></ul></div><p>
</p>
</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="wddebug_win10iot"></a>7.2.2.2. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">Debugging in Windows 10 IoT Core</span></h4></div></div></div>
In order to debug your WinDriver application and driver under Windows 10 IoT
Core:

<div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
Copy <span class="jprintfilename"><strong>WinDriver\samples\wddebug\wddebug.exe</strong></span> to
your Windows 10 IoT Core device.
  </li><li class="listitem">
Run <strong class="jcmd"><code>wddebug dump</code></strong> from your target device (Preferrably using your
SSH terminal).
  </li><li class="listitem">
 Run your application.
  </li><li class="listitem">
Stop <strong class="jcmd"><code>wddebug</code></strong> utility using <strong class="jcmd"><code>CTRL+C</code></strong>.
  </li></ol></div></div></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="USB_Trans"></a>Chapter 8. USB Transfers</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="usb_trans_overview"></a>8.1. Overview</h2></div></div></div><p>
This chapter provides detailed information regarding implementation of USB
transfers using WinDriver.
</p><p>
As explained in <a class="xref" href="#USB_data_exchange" title="3.5. USB Data Exchange"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 3.5</fo:inline></a>, the USB standard
supports two kinds of data exchange between the host and the device &#8212;
control exchange and functional data exchange.<br>
The WinDriver APIs enable you to implement both control and functional data
transfers.
</p><p>
<a class="xref" href="#wiz_usb_data_exchange" title="Figure 8.1. USB Data Exchange"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Figure 8.1</fo:inline></a> demonstrates how a device's pipes are
displayed in the DriverWizard utility, which enables you to perform transfers
from a GUI environment.

</p><div class="figure"><a name="wiz_usb_data_exchange"></a><p class="title"><b>Figure 8.1. USB Data Exchange</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/wiz_usb_data_exchange.png" height="" alt="USB Data Exchange"></div></div></div><p><br class="figure-break">
</p><p>
<a class="xref" href="#USB_Control_Trans" title="8.2. USB Control Transfers"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 8.2</fo:inline></a> below provides detailed information
regarding USB control transfers and how they can be implemented using WinDriver.
</p><p>
<a class="xref" href="#USB_Data_Trans" title="8.3. Functional USB Data Transfers"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 8.3</fo:inline></a> describes the functional data transfer
implementation options provided by WinDriver.
</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="USB_Control_Trans"></a>8.2. USB Control Transfers</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="USB_Control_Trans_Overview"></a>8.2.1. USB Control Transfers Overview</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="usb_ctr_data_exchange"></a>8.2.1.1. Control Data Exchange</h4></div></div></div><p>
USB control exchange is <span xmlns:fo="http://www.w3.org/1999/XSL/Format">used to determine device identification and
    configuration requirements, and to configure a device; it can also be used
    for other device-specific purposes, including control of other pipes on the
    device.<br> Control exchange takes place via a control pipe &#8212; the
    default <em class="it">pipe 0</em>, which always exists. The control transfer consists
    of a <em class="it">setup stage</em> (in which a setup packet is sent from the host to
    the device), an optional <em class="it">data stage</em> and a <em class="it">status
    stage</em>.</span>
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="more_about_ctr_trans"></a>8.2.1.2. More About the Control Transfer</h4></div></div></div><p>
The control transaction always begins with a setup stage. The setup stage is
followed by zero or more control data transactions (data stage) that carry the
specific information for the requested operation, and finally a status
transaction completes the control transfer by returning the status to the
host.
</p><p>
During the setup stage, an 8-byte setup packet is used to transmit information
to the control endpoint of the device (endpoint 0). The setup packet's format
is defined by the USB specification.
</p><p>
A control transfer can be a read transaction or a write transaction. In a read
transaction the setup packet indicates the characteristics and amount of data
to be read from the device. In a write transaction the setup packet contains
the command sent (written) to the device and the number of control data bytes
that will be sent to the device in the data stage.
</p><p>
Refer to <a class="xref" href="#usb_read_write" title="Figure 8.2. USB Read and Write"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Figure 8.2</fo:inline></a> (taken from the USB specification) for a
sequence of read and write transactions.<br>
'(in)' indicates data flow from the device to the host.<br>
'(out)' indicates data flow from the host to the device.

</p><div class="figure"><a name="usb_read_write"></a><p class="title"><b>Figure 8.2. USB Read and Write</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/usb_read_write.png" height="" alt="USB Read and Write"></div></div></div><p><br class="figure-break">
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="the_setup_pkt"></a>8.2.1.3. The Setup Packet</h4></div></div></div><p>
The setup packets (combined with the control data stage and the status stage)
are used to configure and send commands to the device. Chapter 9 of the
USB specification defines standard device requests. USB requests such as these
are sent from the host to the device, using setup packets. The USB device is
required to respond properly to these requests. In addition, each vendor may
define device-specific setup packets to perform device-specific operations. The
standard setup packets (standard USB device requests) are detailed below. The
vendor's device-specific setup packets are detailed in the vendor's data book
for each USB device.
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="setup_pkt_format"></a>8.2.1.4. USB Setup Packet Format</h4></div></div></div><p>
The table below shows the format of the USB setup packet. For more information,
please refer to the USB specification at <a class="ulink" href="http://www.usb.org" target="_top">http://www.usb.org</a>.
</p><div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="center" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center" valign="top"><span class="b"><strong>Byte</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Field</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center" valign="top">0</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bmRequest Type</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
   Bit 7: Request direction (0=Host to device &#8212; Out, 1=Device to host
   &#8212; In).<br>
   Bits 5-6: Request type (0=standard, 1=class, 2=vendor, 3=reserved).<br>
   Bits 0-4: Recipient (0=device, 1=interface, 2=endpoint,3=other).
 </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center" valign="top">1</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bRequest</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
   The actual request (see the Standard Device Request Codes table<a class="xref" href="#usb_standard_dev_req_codes" title="8.2.1.5. Standard Device Request Codes"><fo:inline> [8.2.1.5]</fo:inline></a>.
 </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center" valign="top">2</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">wValueL</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
   A word-size value that varies according to the request. For example, in the
   <code class="japi">CLEAR_FEATURE</code> request the value is used to select the feature,
   in the <code class="japi">GET_DESCRIPTOR</code> request the value indicates the
   descriptor type and in the <code class="japi">SET_ADDRESS</code> request the value
   contains the device address.
 </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center" valign="top">3</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">wValueH</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The upper byte of the <code class="japi">Value</code> word.</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center" valign="top">4</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">wIndexL</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
   A word-size value that varies according to the request. The index is
   generally used to specify an endpoint or an interface.
 </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center" valign="top">5</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">wIndexH</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The upper byte of the <code class="japi">Index</code> word.</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center" valign="top">6</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">wLengthL</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
   A word-size value that indicates the number of bytes to be transferred if
   there is a data stage.
 </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="center" valign="top">7</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">wLengthH</td><td style="" align="left" valign="top">The upper byte of the <code class="japi">Length</code> word.</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="usb_standard_dev_req_codes"></a>8.2.1.5. Standard Device Request Codes</h4></div></div></div><p>
The table below shows the standard device request codes.
</p><div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col width="12pc" align="left" class="col1"><col width="3.6pc" align="center" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>bRequest</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="center" valign="top"><span class="b"><strong>Value</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">GET_STATUS</td><td style="border-bottom: 0.5pt solid ; " align="center" valign="top">0</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">CLEAR_FEATURE</td><td style="border-bottom: 0.5pt solid ; " align="center" valign="top">1</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">Reserved for future use</td><td style="border-bottom: 0.5pt solid ; " align="center" valign="top">2</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">SET_FEATURE</td><td style="border-bottom: 0.5pt solid ; " align="center" valign="top">3</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">Reserved for future use</td><td style="border-bottom: 0.5pt solid ; " align="center" valign="top">4</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">SET_ADDRESS</td><td style="border-bottom: 0.5pt solid ; " align="center" valign="top">5</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">GET_DESCRIPTOR</td><td style="border-bottom: 0.5pt solid ; " align="center" valign="top">6</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">SET_DESCRIPTOR</td><td style="border-bottom: 0.5pt solid ; " align="center" valign="top">7</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">GET_CONFIGURATION</td><td style="border-bottom: 0.5pt solid ; " align="center" valign="top">8</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">SET_CONFIGURATION</td><td style="border-bottom: 0.5pt solid ; " align="center" valign="top">9</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">GET_INTERFACE</td><td style="border-bottom: 0.5pt solid ; " align="center" valign="top">10</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">SET_INTERFACE</td><td style="border-bottom: 0.5pt solid ; " align="center" valign="top">11</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">SYNCH_FRAME</td><td style="" align="center" valign="top">12</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="setup_pkt_example"></a>8.2.1.6. Setup Packet Example</h4></div></div></div><p>
This example of a standard USB device request illustrates the setup packet
format and its fields. The setup packet is in Hex format.
</p><p>
The following setup packet is for a control read transaction that retrieves the
device descriptor from the USB device. The device descriptor includes
information such as USB standard revision, vendor ID and product ID.
</p><p>
<span class="b"><strong>GET_DESCRIPTOR (Device) Setup Packet</strong></span>

</p><div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col width="2.5pc" align="center" class="col1"><col width="2.5pc" align="center" class="col2"><col width="2.5pc" align="center" class="col3"><col width="2.5pc" align="center" class="col4"><col width="2.5pc" align="center" class="col5"><col width="2.5pc" align="center" class="col6"><col width="2.5pc" align="center" class="col7"><col width="2.5pc" align="center" class="col8"></colgroup><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="center">80</td><td style="border-right: 0.5pt solid ; " align="center">06</td><td style="border-right: 0.5pt solid ; " align="center">00</td><td style="border-right: 0.5pt solid ; " align="center">01</td><td style="border-right: 0.5pt solid ; " align="center">00</td><td style="border-right: 0.5pt solid ; " align="center">00</td><td style="border-right: 0.5pt solid ; " align="center">12</td><td style="" align="center">00</td></tr></tbody></table></div><p>
</p><p>
<span class="b"><strong>Setup packet meaning:</strong></span>

</p><div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="center" class="col1"><col class="col2"><col align="center" class="col3"><col class="col4"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">
      <span class="b"><strong>Byte</strong></span>
    </th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
      <span class="b"><strong>Field</strong></span>
    </th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">
      <span class="b"><strong>Value</strong></span>
    </th><th style="border-bottom: 0.5pt solid ; ">
      <span class="b"><strong>Description</strong></span>
    </th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">0</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">BmRequest Type</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">80</td><td style="border-bottom: 0.5pt solid ; ">
    8h=1000b <br>
    <p></p>
    bit 7=1 -&gt; direction of data is from device to host. <br>
    <p></p>
    0h=0000b <br>
    <p></p>
    bits 0..1=00 -&gt; the recipient is the device.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">1</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">bRequest</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">06</td><td style="border-bottom: 0.5pt solid ; ">The Request is GET_DESCRIPTOR.</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">2</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">wValueL</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">00</td><td style="border-bottom: 0.5pt solid ; "> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">3</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">wValueH</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">01</td><td style="border-bottom: 0.5pt solid ; ">
    The descriptor type is device (values defined in USB spec).
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">4</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">wIndexL</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">00</td><td style="border-bottom: 0.5pt solid ; ">
    The index is not relevant in this setup packet since there is only one
    device descriptor.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">5</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">wIndexH</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">00</td><td style="border-bottom: 0.5pt solid ; "> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">6</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">wLengthL</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">12</td><td style="border-bottom: 0.5pt solid ; ">
    Length of the data to be retrieved: 18(12h) bytes (this is the length of
    the device descriptor).
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="center">7</td><td style="border-right: 0.5pt solid ; ">wLengthH</td><td style="border-right: 0.5pt solid ; " align="center">00</td><td style=""> </td></tr></tbody></table></div><p>
</p><p>
In response, the device sends the device descriptor data. A device descriptor
of the Cypress <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap">EZ-USB</span> Integrated Circuit is provided as
an example:

</p><div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col width="5pc" class="col1"><col width="2.5pc" align="center" class="col2"><col width="2.5pc" align="center" class="col3"><col width="2.5pc" align="center" class="col4"><col width="2.5pc" align="center" class="col5"><col width="2.5pc" align="center" class="col6"><col width="2.5pc" align="center" class="col7"><col width="2.5pc" align="center" class="col8"><col width="2.5pc" align="center" class="col9"><col width="2.5pc" align="center" class="col10"><col width="2.5pc" align="center" class="col11"><col width="2.5pc" align="center" class="col12"></colgroup><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><span class="b"><strong>Byte No.</strong></span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">0</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">1</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">2</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">3</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">4</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">5</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">6</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">7</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">8</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">9</td><td style="border-bottom: 0.5pt solid ; " align="center">10</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; "><span class="b"><strong>Content</strong></span></td><td style="border-right: 0.5pt solid ; " align="center">12</td><td style="border-right: 0.5pt solid ; " align="center">01</td><td style="border-right: 0.5pt solid ; " align="center">00</td><td style="border-right: 0.5pt solid ; " align="center">01</td><td style="border-right: 0.5pt solid ; " align="center">ff</td><td style="border-right: 0.5pt solid ; " align="center">ff</td><td style="border-right: 0.5pt solid ; " align="center">ff</td><td style="border-right: 0.5pt solid ; " align="center">40</td><td style="border-right: 0.5pt solid ; " align="center">47</td><td style="border-right: 0.5pt solid ; " align="center">05</td><td style="" align="center">80</td></tr></tbody></table></div><p>
</p><div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col width="5pc" class="col1"><col width="2.5pc" align="center" class="col2"><col width="2.5pc" align="center" class="col3"><col width="2.5pc" align="center" class="col4"><col width="2.5pc" align="center" class="col5"><col width="2.5pc" align="center" class="col6"><col width="2.5pc" align="center" class="col7"><col width="2.5pc" align="center" class="col8"></colgroup><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><span class="b"><strong>Byte No.</strong></span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">11</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">12</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">13</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">14</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">15</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center">16</td><td style="border-bottom: 0.5pt solid ; " align="center">17</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; "><span class="b"><strong>Content</strong></span></td><td style="border-right: 0.5pt solid ; " align="center">00</td><td style="border-right: 0.5pt solid ; " align="center">01</td><td style="border-right: 0.5pt solid ; " align="center">00</td><td style="border-right: 0.5pt solid ; " align="center">00</td><td style="border-right: 0.5pt solid ; " align="center">00</td><td style="border-right: 0.5pt solid ; " align="center">00</td><td style="" align="center">01</td></tr></tbody></table></div><p>
As defined in the USB specification, byte 0 indicates the length of the
descriptor, bytes 2-3 contain the USB specification release number, byte 7 is
the maximum packet size for the control endpoint (endpoint 0), bytes 8-9 are
the vendor ID, bytes 10-11 are the product ID, etc.
</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WD_usb_ctr_trans"></a>8.2.2. Performing Control Transfers with WinDriver</h3></div></div></div><p>
WinDriver allows you to easily send and receive control transfers on the control
pipe (pipe 0), while using DriverWizard to test your device. You can either use
the API generated by DriverWizard<a class="xref" href="#driverwizard" title="Chapter 5. Using DriverWizard"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [5]</fo:inline></a> for your hardware, or
directly call the WinDriver <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WDU_Transfer</code><span class="japi">()</span></span><span> function</span><a class="xref" href="#WDU_Transfer" title="B.4.8.1. WDU_Transfer"><fo:inline> [B.4.8.1]</fo:inline></a></span> from within
your application.
</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="ctr_trans_with_driver_wizard"></a>8.2.2.1. Control Transfers with DriverWizard</h4></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
    Choose <span class="jmenuitem"><strong>Pipe 0x0</strong></span> and click the
    <span class="jmenuitem"><strong>Read / Write</strong></span> button.
  </li><li class="listitem">
    You can either enter a custom setup packet, or use a standard USB request.

    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
        For a custom request: enter the required setup packet fields. For a
        write transaction that includes a data stage, enter the data in the
        <span class="jmenuitem"><strong>Write to pipe data (Hex)</strong></span> field. Click
        <span class="jmenuitem"><strong>Read From Pipe</strong></span> or <span class="jmenuitem"><strong>Write To
        Pipe</strong></span> according to the required transaction (see
        <a class="xref" href="#wiz_usb_rwpipe_ctr_custom_req__usb_trans" title="Figure 8.3. Custom Request"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Figure 8.3</fo:inline></a>).

        <div class="figure"><a name="wiz_usb_rwpipe_ctr_custom_req__usb_trans"></a><p class="title"><b>Figure 8.3. Custom Request</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/wiz_usb_rwpipe_ctr_custom_req.png" height="" alt="Custom Request"></div></div></div><br class="figure-break"></li><li class="listitem" style="list-style-type: disc">
        For a standard USB request: select a USB request from the requests
        list, which includes requests such as <span class="b"><strong>GET_DESCRIPTOR CONFIGURATION,
        GET_DESCRIPTOR DEVICE, GET_STATUS DEVICE</strong></span>, etc. (see
        <a class="xref" href="#wiz_usb_rwpipe_ctr_req_list" title="Figure 8.4. Request List"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Figure 8.4</fo:inline></a>). The description of the
        selected request will be displayed in the <span class="jmenuitem"><strong>Request
        Description</strong></span> box on the right hand of the dialogue window.

        <div class="figure"><a name="wiz_usb_rwpipe_ctr_req_list"></a><p class="title"><b>Figure 8.4. Request List</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/wiz_usb_rwpipe_ctr_req_list.png" alt="Request List"></div></div></div><br class="figure-break"></li></ul></div></li><li class="listitem">
    The results of the transfer, such as the data that was read or a relevant
    error, are displayed in DriverWizard's <span class="b"><strong>Log</strong></span> window.<br><a class="xref" href="#wiz_usb_ctr_req_GetDescDev_log" title="Figure 8.5. USB Request Log"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Figure 8.5</fo:inline></a>, below, shows the contents of
    the <span class="b"><strong>Log</strong></span> window after a successful <span class="b"><strong>GET_DESCRIPTOR DEVICE</strong></span>
    request.

    <div class="figure"><a name="wiz_usb_ctr_req_GetDescDev_log"></a><p class="title"><b>Figure 8.5. USB Request Log</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/wiz_usb_ctr_req_GetDescDev_log.png" height="" alt="USB Request Log"></div></div></div><br class="figure-break"></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="ctr_trans_with_wd_api"></a>8.2.2.2. Control Transfers with WinDriver API</h4></div></div></div><p>
To perform a read or write transaction on the control pipe, you can either use
the API generated by DriverWizard for your hardware, or directly call the
WinDriver <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WDU_Transfer</code><span class="japi">()</span></span><span> function</span><a class="xref" href="#WDU_Transfer" title="B.4.8.1. WDU_Transfer"><fo:inline> [B.4.8.1]</fo:inline></a></span> from within your application.
</p><p>
Fill the setup packet in the <code class="japi">BYTE SetupPacket[8]</code> array and call
these functions to send setup packets on the control pipe (pipe 0) and to
retrieve control and status data from the device.
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    The following sample demonstrates how to fill the
    <code class="japi">SetupPacket[8]</code> variable with a <code class="japi">GET_DESCRIPTOR</code>
    setup packet:

    <pre class="screen">setupPacket[0] = 0x80;   /* BmRequstType */
    setupPacket[1] = 0x6;    /* bRequest [0x6 == GET_DESCRIPTOR] */
    setupPacket[2] = 0;      /* wValue */
    setupPacket[3] = 0x1;    /* wValue [Descriptor Type: 0x1 == DEVICE] */
    setupPacket[4] = 0;      /* wIndex */
    setupPacket[5] = 0;      /* wIndex */
    setupPacket[6] = 0x12;   /* wLength [Size for the returned buffer] */
    setupPacket[7] = 0;      /* wLength */</pre></li><li class="listitem" style="list-style-type: disc">
    The following sample demonstrates how to send a setup packet to the control
    pipe (a <code class="japi">GET</code> instruction; the device will return the
    information requested in the <code class="japi">pBuffer</code> variable):

    <pre class="screen">WDU_TransferDefaultPipe(hDev, TRUE, 0, pBuffer, dwSize,
       bytes_transferred, &amp;setupPacket[0], 10000);</pre></li><li class="listitem" style="list-style-type: disc">
    The following sample demonstrates how to send a setup packet to the control
    pipe (a <code class="japi">SET</code> instruction):

    <pre class="screen">WDU_TransferDefaultPipe(hDev, FALSE, 0, NULL, 0,
        bytes_transferred, &amp;setupPacket[0], 10000);</pre></li></ul></div><p>
For further information regarding <code class="jfunc">WDU_TransferDefaultPipe</code><span class="jfunc">()</span>, refer
to <a class="xref" href="#WDU_TransferDefaultPipe" title="B.4.8.3. WDU_TransferDefaultPipe"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section B.4.8.3</fo:inline></a>. For further information
regarding <code class="jfunc">WDU_Transfer</code><span class="jfunc">()</span>, refer to
<a class="xref" href="#WDU_Transfer" title="B.4.8.1. WDU_Transfer"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section B.4.8.1</fo:inline></a>.
</p></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="USB_Data_Trans"></a>8.3. Functional USB Data Transfers</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="USB_Data_Trans_Overview"></a>8.3.1. Functional USB Data Transfers Overview</h3></div></div></div><p>
Functional USB data exchange is <span xmlns:fo="http://www.w3.org/1999/XSL/Format">
    used to move data to and from the device. There are three types of USB data
    transfers: Bulk, Interrupt and Isochronous
   </span>, which are described
in detail in <a class="xref" href="#USB_isoch_trans" title="3.6.2. Isochronous Transfer"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Sections 3.6.2&#8211;</fo:inline></a><a class="xref" href="#USB_bulk_trans" title="3.6.4. Bulk Transfer"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">3.6.4</fo:inline></a> of the manual.
</p><p>
Functional USB data transfers can be implemented using two alternative methods:
single-blocking transfers and streaming transfers, both supported by WinDriver, as
explained in the following sections. The generated DriverWizard USB code<a class="xref" href="#wiz_auto_code_gen" title="5.2.1. Automatic Code Generation"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [5.2.1]</fo:inline></a> and the generic
<span class="jprintfilename"><strong>WinDriver/util/usb_diag.exe</strong></span> utility<a class="xref" href="#WD_utilities" title="1.9.2. Utilities"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [1.9.2]</fo:inline></a> (source code located under the
<span class="jdirectory"><strong>WinDriver/samples/usb_diag</strong></span> directory) enable the user to
select which type of transfer to perform.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="usb_trans_single_blocking"></a>8.3.2. Single-Blocking Transfers</h3></div></div></div><p>
In the single-blocking USB data transfer scheme, blocks of data are
synchronously transferred (hence &#8212; "blocking") between the host and the
device, per request from the host (hence &#8212; "single" transfers).
</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="WD_usb_single_block_trans"></a>8.3.2.1. Performing Single-Blocking Transfers with WinDriver</h4></div></div></div><p>
WinDriver's <strong class="jfuncb"><code>WDU_Transfer</code></strong><span class="jfuncb"><strong>()</strong></span> function, and the
<strong class="jfuncb"><code>WDU_TransferBulk</code></strong><span class="jfuncb"><strong>()</strong></span>, <strong class="jfuncb"><code>WDU_TransferIsoch</code></strong><span class="jfuncb"><strong>()</strong></span>, and
<strong class="jfuncb"><code>WDU_TransferInterrupt</code></strong><span class="jfuncb"><strong>()</strong></span> convenience functions &#8212; all
described in <a class="xref" href="#WDU_single_block_trans_funcs" title="B.4.8. Single-Blocking Transfer Functions"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section B.4.8</fo:inline></a> of the manual
&#8212; enable you to easily impelment single-blocking USB data transfers.
</p><p>
You can also perform single-blocking transfers using the DriverWizard utility
(which uses the <code class="jfunc">WDU_Transfer</code><span class="jfunc">()</span> function), as demonstrated in
<a class="xref" href="#DriverWizard_Walkthrough" title="5.2. DriverWizard Walkthrough"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 5.2</fo:inline></a> of the manual.
</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="usb_trans_streaming"></a>8.3.3. Streaming Data Transfers</h3></div></div></div><p>
In the streaming USB data transfer scheme, data is continuously streamed
between the host and the device, using internal buffers allocated by the host
driver &#8212; "streams".
</p><p>
Stream transfers allow for a sequential data flow between the host and the
device, and can be used to reduce single-blocking transfer overhead, which may
occur as a result of multiple function calls and context switches between user
and kernel modes. This is especially relevant for devices with small data
buffers, which might, for example, overwrite data before the host is able to
read it, due to a gap in the data flow between the host and device.
</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="WD_usb_stream_trans"></a>8.3.3.1. Performing Streaming with WinDriver</h4></div></div></div><p>
WinDriver's <strong class="jfuncb"><code>WDU_StreamXXX</code></strong><span class="jfuncb"><strong>()</strong></span> functions, described in
<a class="xref" href="#WDU_streaming_trans_funcs" title="B.4.9. Streaming Data Transfer Functions"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section B.4.9</fo:inline></a> of the manual, enable you to
impelment USB streaming data transfers. Note: These functions are currently
supported on Windows.
</p><p>
To begin performing stream transfers, call the
<span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><strong class="japi"><code>WDU_StreamOpen</code></strong><span class="japi"><strong>()</strong></span></span><span> function</span><a class="xref" href="#WDU_StreamOpen" title="B.4.9.1. WDU_StreamOpen"><fo:inline> [B.4.9.1]</fo:inline></a></span>. When this function is
called, WinDriver creates a new stream object for the specified data pipe. You can
open a stream for any pipe except for the control pipe (pipe 0). The stream's
data transfer direction &#8212; read/write &#8212; is derived from the
direction of its pipe.<br>
WinDriver supports both blocking and non-blocking stream transfers. The open
function's <code class="japi">fBlocking</code> parameter indicates which type of transfer to
perform (see explanation below). Streams that perform blocking transfers will
henceforth be referred to as "blocking streams", and streams that perform
non-blocking transfers will be referred to as "non-blocking streams".<br>
The function's <code class="japi">dwRxTxTimeout</code> parameter indicates the desired
timeout period for transfers between the stream and the device.
</p><p>
After opening a stream, call <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><strong class="japi"><code>WDU_StreamStart</code></strong><span class="japi"><strong>()</strong></span></span><a class="xref" href="#WDU_StreamStart" title="B.4.9.2. WDU_StreamStart"><fo:inline> [B.4.9.2]</fo:inline></a></span> to begin data
transfers between the stream's data buffer and the device.<br>
In the case of a read stream, the driver will constantly read data from the
device into the stream's buffer, in blocks of a pre-defined size (as set in the
<code class="japi">dwRxSize</code> parameter of the
<span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WDU_StreamOpen</code><span class="japi">()</span></span><span> function</span><a class="xref" href="#WDU_StreamOpen" title="B.4.9.1. WDU_StreamOpen"><fo:inline> [B.4.9.1]</fo:inline></a></span>. In the case of a write stream,
the driver will constantly check for data in the stream's data buffer and write
any data that is found to the device.
</p><p>
To read data from a read stream to the user-mode host application, call
<span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><strong class="japi"><code>WDU_StreamRead</code></strong><span class="japi"><strong>()</strong></span></span><a class="xref" href="#WDU_StreamRead" title="B.4.9.3. WDU_StreamRead"><fo:inline> [B.4.9.3]</fo:inline></a></span>.<br>
In case of a blocking stream, the read function blocks until the entire amount
of data requested by the application is transferred from the stream to the
application, or until the stream's attempt to read data from the device times
out.<br>
In the case of a non-blocking stream, the function transfers to the application
as much of the requested data as possible, subject to the amount of data
currently available in the stream's data buffer, and returns immediately.
</p><p>
To write data from the user-mode host application to a write the stream, call
<span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><strong class="japi"><code>WDU_StreamWrite</code></strong><span class="japi"><strong>()</strong></span></span><a class="xref" href="#WDU_StreamWrite" title="B.4.9.4. WDU_StreamWrite"><fo:inline> [B.4.9.4]</fo:inline></a></span>.<br>
In case of a blocking stream, the function blocks until the entire data is
written to the stream, or until the stream's attempt to write data to the
device times out.<br>
In the case of a non-blocking stream, the function writes as much of the write
data as currently possible to the stream, and returns immediately.
</p><p>
For both blocking and non-blocking transfers, the read/write function returns
the amount of bytes actually transferred between the stream and the calling
application within an output parameter &#8212;
<code class="japi">*pdwBytesRead</code><a class="xref" href="#WDU_StreamRead" title="B.4.9.3. WDU_StreamRead"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.4.9.3]</fo:inline></a> /
<code class="japi">*pdwBytesWritten</code><a class="xref" href="#WDU_StreamWrite" title="B.4.9.4. WDU_StreamWrite"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.4.9.4]</fo:inline></a>.
</p><p>
You can flush an active stream at any time by calling the
<span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><strong class="japi"><code>WDU_StreamFlush</code></strong><span class="japi"><strong>()</strong></span></span><span> function</span><a class="xref" href="#WDU_StreamFlush" title="B.4.9.5. WDU_StreamFlush"><fo:inline> [B.4.9.5]</fo:inline></a></span>, which writes the entire
contents of the stream's data buffer to the device (for a write stream), and
blocks until all pending I/&#65279;O for the stream is handled.<br>
You can flush both blocking and non-blocking streams.
</p><p>
You can call <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WDU_StreamGetStatus</code><span class="japi">()</span></span><a class="xref" href="#WDU_StreamGetStatus" title="B.4.9.6. WDU_StreamGetStatus"><fo:inline> [B.4.9.6]</fo:inline></a></span> for any open stream in order to
get the stream's current status information.
</p><p>
To stop the data streaming between an active stream and the device, call
<span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><strong class="japi"><code>WDU_StreamStop</code></strong><span class="japi"><strong>()</strong></span></span><a class="xref" href="#WDU_StreamStop" title="B.4.9.7. WDU_StreamStop"><fo:inline> [B.4.9.7]</fo:inline></a></span>. In the case of a write stream, the function
flushes the stream &#8212; i.e., writes its contents to the device &#8212;
before stopping it.<br>
An open stream can be stopped and restarted at any time until it is closed.
</p><p>
To close an open stream, call <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><strong class="japi"><code>WDU_StreamClose</code></strong><span class="japi"><strong>()</strong></span></span><a class="xref" href="#WDU_StreamClose" title="B.4.9.8. WDU_StreamClose"><fo:inline> [B.4.9.8]</fo:inline></a></span>.<br>
The function stops the stream, including flushing its data to the device (in
the case of a write stream), before closing it.<br>
Note: Each call to <code class="jfunc">WDU_StreamOpen</code><span class="jfunc">()</span> must have a matching call to
<code class="jfunc">WDU_StreamClose</code><span class="jfunc">()</span> later on in the code in order to perform the
necessary cleanup.
</p></div></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="Dynamic_Driver_Load"></a>Chapter 9. Dynamically Loading Your Driver</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dyn_load_why"></a>9.1. Why Do You Need a Dynamically Loadable Driver?</h2></div></div></div><p>
When adding a new driver, you may be required to reboot the system in order
for it to load your new driver into the system. WinDriver is a dynamically
loadable driver, which enables your customers to start your application
immediately after installing it, without the need for reboot.

</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
  
  To successfully unload your driver, make sure that
  there are no open handles to the WinDriver service (<span class="jprintfilename"><strong>windrvr1281.sys</strong></span> or
  your renamed driver<a class="xref" href="#wd_rename_driver" title="11.2. Renaming the WinDriver Kernel Driver"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [11.2]</fo:inline></a>), and that there are no
  connected and enabled Plug&#65279;-&#65279;and&#65279;-&#65279;Play devices that are registered with this service.

</td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dyn_windows"></a>9.2. Windows Dynamic Driver Loading</h2></div></div></div><p>
Windows 7 and higher uses Windows Driver Model (WDM) drivers<a class="xref" href="#wdm_drivers_overview" title="2.3.1. WDM Drivers"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [2.3.1]</fo:inline></a>: Files
with the extension <span class="b"><strong>*.sys</strong></span> (e.g., <span class="jprintfilename"><strong>windrvr1281.sys</strong></span>).<br>
WDM drivers are installed via the installation of an INF file (see below).
</p><p>
The WinDriver Windows kernel module &#8212; <span class="jprintfilename"><strong>windrvr1281.sys</strong></span> &#8212; is a
fully WDM driver, which can be installed using the
<span class="jprintfilename"><strong>wdreg</strong></span> utility, as explained in the following
sections.
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="dyn_windows_wdreg"></a>9.2.1. The wdreg Utility</h3></div></div></div><p>
WinDriver provides a utility for dynamically loading and unloading your driver,
which replaces the slower manual process using Windows' Device Manager (which
can still be used for the device INF). This utility is provided in two forms:
<span class="jprintfilename"><strong>wdreg</strong></span> and
<span class="jprintfilename"><strong>wdreg_gui</strong></span>. Both versions can be found in the
<span class="jdirectory"><strong>WinDriver\util</strong></span> directory, can be run from the command
line, and provide the same functionality. The difference is that
<span class="jprintfilename"><strong>wdreg_gui</strong></span> displays installation messages
graphically, while <span class="jprintfilename"><strong>wdreg</strong></span> displays them in
console mode.
</p><p>
This section describes the use of <span class="jprintfilename"><strong>wdreg</strong></span>/
<span class="jprintfilename"><strong>wdreg_gui</strong></span> on Windows operating systems.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><span class="jprintfilename"><strong>wdreg</strong></span> is dependent on the Driver Install Frameworks API (<span class="b"><strong>DIFxAPI</strong></span>)
    DLL &#8212; <span class="jprintfilename"><strong>difxapi.dll</strong></span>, unless when run
    with the <strong class="jcmd"><code>-compat</code></strong> option (described below).
    <span class="jprintfilename"><strong>difxapi.dll</strong></span> is provided under the
    <span class="jdirectory"><strong>WinDriver\&#65279;util</strong></span> directory.
  </li><li class="listitem">
    The explanations and examples below refer to
    <span class="jprintfilename"><strong>wdreg</strong></span>, but any references to
    <span class="jprintfilename"><strong>wdreg</strong></span> can be replaced with
    <span class="jprintfilename"><strong>wdreg_gui</strong></span>.
  </li></ol></div></td></tr></table></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="wdreg_WDM"></a>9.2.1.1. Overview</h4></div></div></div><p>
This section explains how to use the <span class="jprintfilename"><strong>wdreg</strong></span>
utility to install the WDM <span class="jprintfilename"><strong>windrvr1281.sys</strong></span> driver, or to install INF
files that register
<span xmlns:fo="http://www.w3.org/1999/XSL/Format">USB devices</span>

to work with this driver, on Windows.
</p><div class="info" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/info.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
You can rename the <span class="jprintfilename"><strong>windrvr1281.sys</strong></span> kernel module and modify your device
INF file to register with your renamed driver, as explained in
<a class="xref" href="#wd_rename_driver_windows" title="11.2.1. Windows Driver Renaming"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 11.2.1</fo:inline></a>. To install your modified INF
files using <span class="jprintfilename"><strong>wdreg</strong></span>, simply replace any
references to <span class="jprintfilename"><strong>windrvr1281</strong></span> below with the name of your new driver.
</td></tr></table></div><p>
<span class="b"><strong>Usage:</strong></span> The <span class="b"><strong>wdreg</strong></span> utility can be used in two ways as demonstrated
below:

</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><strong class="jcmd"><code>wdreg -inf &lt;filename&gt; [-silent] [-log &lt;logfile&gt;]</code></strong><br><strong class="jcmd"><code>[install | preinstall | uninstall | enable | disable]</code></strong></li><li class="listitem"><strong class="jcmd"><code>wdreg -rescan &lt;enumerator&gt; [-silent] [-log
    &lt;logfile&gt;]</code></strong></li></ol></div><p>

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    OPTIONS<br><span class="jprintfilename"><strong>wdreg</strong></span> supports several basic
    OPTIONS from which you can choose one, some, or none:
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="b"><strong>-inf</strong></span> &#8212; The path of the INF file to be dynamically
        installed.
      </li><li class="listitem"><span class="b"><strong>-rescan &lt;enumerator&gt;</strong></span> &#8212; Rescan enumerator (ROOT,
        <span xmlns:fo="http://www.w3.org/1999/XSL/Format">
          USB,
        </span>
         etc.) for hardware changes. Only one enumerator can be
        specified.
      </li><li class="listitem"><span class="b"><strong>-silent</strong></span> &#8212; Suppress display of all messages (optional).
      </li><li class="listitem"><span class="b"><strong>-log &lt;logfile&gt;</strong></span> &#8212; Log all messages to the specified
        file (optional).
      </li><li class="listitem"><span class="b"><strong>-compat</strong></span> &#8212; Use the traditional
        <span class="jprintfilename"><strong>SetupDi</strong></span> API instead of the newer
        Driver Install Frameworks API (<span class="b"><strong>DIFxAPI</strong></span>).
      </li></ul></div></li><li class="listitem" style="list-style-type: disc">
    ACTIONS<br><span class="jprintfilename"><strong>wdreg</strong></span> supports several basic ACTIONS:
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="b"><strong>install</strong></span> &#8212; Installs the INF file, copies the relevant files
        to their target locations, and dynamically loads the driver specified
        in the INF file name by replacing the older version (if needed).
      </li><li class="listitem"><span class="b"><strong>preinstall</strong></span> Pre-installs the INF file for a non-present device.
        </li><li class="listitem"><span class="b"><strong>uninstall</strong></span> &#8212; Removes your driver from the registry so that
        it will not load on next boot (see note below).
      </li><li class="listitem"><span class="b"><strong>enable</strong></span> &#8212; Enables your driver.
      </li><li class="listitem"><span class="b"><strong>disable</strong></span> &#8212; Disables your driver, i.e., dynamically unloads
        it, but the driver will reload after system boot (see note below).
      </li></ul></div></li></ul></div><p>
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">

  To successfully disable/uninstall your driver, make sure that
  there are no open handles to the WinDriver service (<span class="jprintfilename"><strong>windrvr1281.sys</strong></span> or
  your renamed driver<a class="xref" href="#wd_rename_driver" title="11.2. Renaming the WinDriver Kernel Driver"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [11.2]</fo:inline></a>), and that there are no
  connected and enabled Plug&#65279;-&#65279;and&#65279;-&#65279;Play devices that are registered with this service.

</td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="dyn_windrvr_inf_load"></a>9.2.2. Dynamically Loading/Unloading windrvr1281.sys INF
  Files</h3></div></div></div><p>
When using WinDriver, you develop a user-mode application that controls and
accesses your hardware by using the generic <span class="jprintfilename"><strong>windrvr1281.sys</strong></span> driver
(WinDriver's kernel module). Therefore, you might want to dynamically load and
unload the driver <span class="jprintfilename"><strong>windrvr1281.sys</strong></span> &#8212; which you can do using
<span class="jprintfilename"><strong>wdreg</strong></span>.<br>
In addition, in WDM-compatible operating systems, you also need to dynamically
load INF files for your Plug&#65279;-&#65279;and&#65279;-&#65279;Play devices.
<span class="jprintfilename"><strong>wdreg</strong></span> enables you to do so automatically on
Windows.<br>
This section includes <span class="jprintfilename"><strong>wdreg</strong></span> usage examples,
which are based on the detailed description of
<span class="jprintfilename"><strong>wdreg</strong></span> contained in the previous section.

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    To load <span class="jprintfilename"><strong>windrvr1281.inf</strong></span> and start the <span class="jprintfilename"><strong>windrvr1281.sys</strong></span> service &#8212;
    <br><strong class="jcmd"><code>wdreg -inf &lt;path to windrvr1281.inf&gt; install</code></strong><br></li><li class="listitem" style="list-style-type: disc"><p>
    To load an INF file named <span class="jprintfilename"><strong>device.inf</strong></span>,
    located in the <span class="jdirectory"><strong>c:\tmp</strong></span> directory &#8212;<br>
    <strong class="jcmd"><code>wdreg -inf c:\tmp\device.inf install</code></strong>
    </p><p>
    You can replace the <strong class="jcmd"><code>install</code></strong> option in the example above with
    <strong class="jcmd"><code>preinstall</code></strong> to pre-install the device INF file for a device
    that is not currently connected to the PC.
    
    </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
If the installation fails with an
  <strong class="japib"><code>ERROR_FILE_NOT_FOUND</code></strong> error, inspect the Windows registry to
  see if the <strong class="japib"><code>RunOnce</code></strong> key exists in
  <strong class="japib"><code>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion</code></strong>.
  This registry key is required by Windows Plug&#65279;-&#65279;and&#65279;-&#65279;Play in order to properly install
  drivers using INF files. If the <strong class="japib"><code>RunOnce</code></strong> key is missing, create
  it; then try installing the INF file again.
</td></tr></table></div><p>
To unload the driver/INF file, use the same commands, but simply replace
<strong class="jcmd"><code>install</code></strong> in the examples above with <strong class="jcmd"><code>uninstall</code></strong>.
</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="wdreg_frontend"></a>9.3. The wdreg_frontend utility</h2></div></div></div>
Under Windows, WinDriver features a GUI frontend utility that is designed to ease installataion/uninstallation of WinDriver and Kernel PlugIn drivers during development phases.
Every operation that can be performed with <strong class="jcmd"><code>wdreg</code></strong> can also be performend from <strong class="jcmd"><code>wdreg_frontend</code></strong> and their output is identical. <strong class="jcmd"><code>wdreg_frontend</code></strong> prints out the complete <strong class="jcmd"><code>wdreg</code></strong> command that it performed, making it easier for the developer to copy the desired command and integrate it in their own installation scripts.


  <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
  Driver installation on Windows requires administrator privileges.
  </td></tr></table></div>


Loading <strong class="jcmd"><code>wdreg_frontend</code></strong>:
<div class="itemizedlist"><div class="figure"><a name="frontend_icon"></a><p class="title"><b>Figure 9.1. The wdreg_frontend icon</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/frontend_icon.png" height="" alt="The wdreg_frontend icon"></div></div></div><br class="figure-break"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"> Click the <strong class="jcmd"><code>wdreg_frontend</code></strong> icon from the <span class="b"><strong>DriverWizard</strong></span> window.</li><li class="listitem"> Run <strong class="jcmd"><code>WinDriver/util/wdreg_frontend.exe</code></strong> directly.</li></ul></div>

    To load/unload a Kernel Plugin:
<div class="itemizedlist"><div class="figure"><a name="copy_driver_file"></a><p class="title"><b>Figure 9.2. The dialog box wdreg_frontend will open if driver file is not located in the         Windows system directory</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/copy_driver_file.png" height="" alt="The dialog box wdreg_frontend will open if driver file is not located in the Windows system directory"></div></div></div><br class="figure-break"><div class="figure"><a name="load_driver"></a><p class="title"><b>Figure 9.3. wdreg_frontend after successfully loading a sys file</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/load_driver.png" height="" alt="wdreg_frontend after successfully loading a sys file"></div></div></div><br class="figure-break"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"> Click <span class="b"><strong>File-&gt;Open</strong></span> and open the desired sys file. </li><li class="listitem"> If the sys file is not located in the Windows system directory, a dialog box will appear and ask if you wish <strong class="jcmd"><code>wdreg_frontend</code></strong> to copy the sys file to the Windows system directory. </li><li class="listitem"> If the file loaded correctly, all actions available for .sys files will become enabled:
<span class="b"><strong>Install Driver, Uninstall Driver, Start Driver, Stop Driver, Create Driver, Delete Driver</strong></span> and choice of <span class="b"><strong>Startup level</strong></span>.
Further information on these actions is available on the wdreg section of this document.???:
    </li></ul></div><div class="figure"><a name="digital_sign_fail"></a><p class="title"><b>Figure 9.4. Error message given by Windows when trying to install an unsigned driver</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/digital_sign_fail.png" height="" alt="Error message given by Windows when trying to install an unsigned driver"></div></div></div><br class="figure-break"><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">You may need to either digitally sign your sys file or disable digital signature enforcement for the driver to properly load and work under Windows.
</td></tr></table></div>
To install/uninstall an INF file:
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"> Click <span class="b"><strong>File-&gt;Open</strong></span> and open the desired sys file. </li><li class="listitem">If the file loaded correctly, all actions available for .inf files will become enabled:
        <span class="b"><strong>Install Driver, Uninstall Driver, Enable Driver, Disable Driver, Preinstall Driver</strong></span>
        Further information on these actions is available on the wdreg section 
        of this document.<a class="xref" href="#wdreg_WDM" title="9.2.1.1. Overview"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [9.2.1.1]</fo:inline></a>:
    </li></ul></div><div class="figure"><a name="driver_install_success"></a><p class="title"><b>Figure 9.5. wdreg_frontend upon successfully installing a sys driver</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/driver_install_success.png" height="" alt="wdreg_frontend upon successfully installing a sys driver"></div></div></div><br class="figure-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dyn_win10iot"></a>9.4. Windows 10 IoT Core Dynamic Driver Loading</h2></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
If you can connect your PCI/USB device to your development computer you can
create an INF file as described in <a class="xref" href="#DriverWizard_Walkthrough" title="5.2. DriverWizard Walkthrough"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [5.2]</fo:inline></a>. <br>
If you cannot connect your PCI/USB device to your development computer then
do the following:
<div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
Create a project for a <span class="b"><strong>Virtual Device</strong></span>, as described in <a class="xref" href="#DriverWizard_Walkthrough" title="5.2. DriverWizard Walkthrough"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [5.2]</fo:inline></a>.
</li><li class="listitem">
Manually enter your VID, PID, Manufacturer and Device name in the INF file
you've created in the previous step.
</li><li class="listitem">
Transfer the project files to your Windows 10 IoT Core target computer.
</li></ol></div></td></tr></table></div>

To load your driver do the following:
<div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
Copy the INF file you have created to your Windows 10 IoT Core target compter,
and put it in the directory that holds
<span class="jprintfilename"><strong>wdreg_iot.cmd</strong></span>.
</li><li class="listitem">
Install WinDriver for your PCI/USB device using the
<span class="jprintfilename"><strong>wdreg_iot.cmd</strong></span> script:
<strong class="jcmd"><code>wdreg_iot.cmd install xxx.inf</code></strong></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dyn_linux"></a>9.5. Linux Dynamic Driver Loading</h2></div></div></div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
  The following commands must be executed with root privileges.
  </td></tr></table></div>

<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    To dynamically load WinDriver, run the following command:<br><strong class="jcmd"><code># &lt;path to wdreg&gt; windrvr1281</code></strong></li><li class="listitem" style="list-style-type: disc">
    To dynamically unload WinDriver, run the following command:<br><strong class="jcmd"><code># /sbin/modprobe -r windrvr1281</code></strong>.
  </li></ul></div>

<div class="info" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/info.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><span class="jprintfilename"><strong>wdreg</strong></span> is provided in the
  <span class="jdirectory"><strong>WinDriver/util</strong></span>
  directory.

</td></tr></table></div>

<div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="scripts/images/tip.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
To automatically load WinDriver on each boot, add the following line to the target's Linux boot file (for example,
  <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jprintfilename"><strong>/etc/rc.local</strong></span></span>):<br><code class="japi">&lt;path to wdreg&gt; windrvr1281</code></td></tr></table></div>
</div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="driver_distribution"></a>Chapter 10. Distributing Your Driver</h1></div></div></div><div class="info" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/info.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
Read this chapter in the final stages of driver development. It will guide you
in preparing your driver for distribution.
</td></tr></table></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="distr_get_valid_lic"></a>10.1. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">Getting a Valid WinDriver License</span></h2></div></div></div><p>
Before distributing your driver you must purchase a WinDriver license, as outlined
in <a class="xref" href="#purchasing_wd" title="Appendix E. Purchasing WinDriver"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Appendix E</fo:inline></a>.<br>
Then install the registered version of WinDriver on your development machine by
following the installations in <a class="xref" href="#wd_install_process" title="4.2. WinDriver Installation Process"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 4.2</fo:inline></a>. If you
have already installed an evaluation version of WinDriver, you can jump directly
to the installation steps for registered users to activate your license.<br>
To register code developed during the evaluation period of WinDriver, follow the
instructions in  <a class="xref" href="#wd_install_upgrade" title="4.3. Upgrading Your Installation"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 4.3</fo:inline></a>.
</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dist_winpnp"></a>10.2. Windows Driver Distribution</h2></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    All references to <span class="jprintfilename"><strong>wdreg</strong></span> in this section
    can be replaced with <span class="jprintfilename"><strong>wdreg_gui</strong></span>, which
    offers the same functionality as <span class="jprintfilename"><strong>wdreg</strong></span> but
    displays GUI messages instead of console-mode messages.
  </li><li class="listitem" style="list-style-type: disc">
    If you have renamed the WinDriver kernel module (<span class="jprintfilename"><strong>windrvr1281.sys</strong></span>), as
    explained in <a class="xref" href="#wd_rename_driver" title="11.2. Renaming the WinDriver Kernel Driver"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 11.2</fo:inline></a>, replace the relevant
    <span class="jprintfilename"><strong>windrvr1281</strong></span> references with the name of your driver, and replace
    references to the <span class="jdirectory"><strong>WinDriver&#65279;\&#65279;redist</strong></span> directory with the path to the
    directory that contains your modified installation files. For example, when
    using the generated DriverWizard renamed driver files for your driver
    project, as explained in <a class="xref" href="#wd_rename_driver_windows" title="11.2.1. Windows Driver Renaming"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 11.2.1</fo:inline></a>,
    you can replace references to the <span class="jdirectory"><strong>WinDriver&#65279;\&#65279;redist</strong></span> directory with
    references to the generated
    <span class="jdirectory"><strong>xxx_installation\&#65279;redist</strong></span> directory (where
    <span class="jprintfilename"><strong>xxx</strong></span> is the name of your generated driver
    project). Note also the option to simplify the
    installation using the generated DriverWizard
    <span class="jprintfilename"><strong>xxx_install.bat</strong></span> script and the copies of
    the <span class="jdirectory"><strong>WinDriver\&#65279;util</strong></span> installation files in the
    generated <span class="jdirectory"><strong>xxx_installation\&#65279;redist</strong></span> directory,
    as explained in <a class="xref" href="#wd_rename_driver_windows" title="11.2.1. Windows Driver Renaming"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 11.2.1</fo:inline></a>.
  </li><li class="listitem" style="list-style-type: disc">
    If you have created new INF and/or catalog files for your driver, replace
    the references to the original WinDriver INF files and/or to the
    <span class="jprintfilename"><strong>windrvr1281.cat</strong></span> catalog file with the names of your new files (see the file
    renaming information in <a class="xref" href="#wd_rename_driver_windows" title="11.2.1. Windows Driver Renaming"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Sections 11.2.1</fo:inline></a>
    and <a class="xref" href="#driver_sign_wd_drivers" title="11.3.2. Driver Signing and Certification of WinDriver-Based Drivers"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> 11.3.2</fo:inline></a>).
  </li></ul></div></td></tr></table></div><p>
Distributing the driver you created is a multi-step process. First, create a
distribution package that includes all the files required for the installation
of the driver on the target computer. Second, install the driver on the target
machine. This involves installing <span class="jprintfilename"><strong>windrvr1281.sys</strong></span> and <span class="jprintfilename"><strong>windrvr1281.inf</strong></span>,
<span xmlns:fo="http://www.w3.org/1999/XSL/Format">and</span> installing the specific INF file for your
device<span xmlns:fo="http://www.w3.org/1999/XSL/Format">.</span>
</p><p>
Finally, you need to install and execute the hardware-control application that
you developed with WinDriver. These steps can be performed using
<span class="jprintfilename"><strong>wdreg</strong></span> utility.
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="dist_winpnp_pkg_prepare"></a>10.2.1. Preparing the Distribution Package</h3></div></div></div><p>
Prepare a distribution package that includes the following files.

</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
If you wish to distribute drivers for both 32-&#65279;bit and 64-&#65279;bit target
  platforms, you must prepare separate distribution packages for each platform.
  The required files for each package are provided in the WinDriver installation
  directory for the respective platform.
</td></tr></table></div><p>

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    Your hardware-control application/DLL.
  </li><li class="listitem" style="list-style-type: disc">
    <span class="jprintfilename"><strong>windrvr1281.sys</strong></span>.<br>
    Get this file from the <span class="jdirectory"><strong>WinDriver&#65279;\&#65279;redist</strong></span> directory of the WinDriver package.
    </li><li class="listitem" style="list-style-type: disc">
    <span class="jprintfilename"><strong>windrvr1281.inf</strong></span>.<br>
    Get this file from the <span class="jdirectory"><strong>WinDriver&#65279;\&#65279;redist</strong></span> directory of the WinDriver package.
    </li><li class="listitem" style="list-style-type: disc">
    <span class="jprintfilename"><strong>windrvr1281.cat</strong></span><br>
    Get this file from the <span class="jdirectory"><strong>WinDriver&#65279;\&#65279;redist</strong></span> directory of the WinDriver package.
    </li><li class="listitem" style="list-style-type: disc">
    <span class="jprintfilename"><strong>wdapi1281.dll</strong></span> (for
    distribution of 32-&#65279;bit binaries to 32-&#65279;bit target platforms or for
    distribution of 64-&#65279;bit binaries to 64-&#65279;bit platforms) or
    <span class="jprintfilename"><strong>wdapi1281_32.dll</strong></span> (for
    distribution of 32-&#65279;bit binaries to 64-&#65279;bit platforms<a class="xref" href="#32bit_app_on_64bit_arch_win_unix" title="A.2. Support for 32-&#65279;Bit Applications on 64-&#65279;Bit Windows and Linux Platforms"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A.2]</fo:inline></a>.<br>
    Get this file from the <span class="jdirectory"><strong>WinDriver&#65279;\&#65279;redist</strong></span> directory of the WinDriver package.
    
    </li><li class="listitem" style="list-style-type: disc">
    <span class="jprintfilename"><strong>difxapi.dll</strong></span> (required by the
    <span class="jprintfilename"><strong>wdreg.exe</strong></span> utility<a class="xref" href="#dyn_windows_wdreg" title="9.2.1. The wdreg Utility"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [9.2.1]</fo:inline></a>).<br>
    Get this file from the <span class="jdirectory"><strong>WinDriver\&#65279;util</strong></span> directory
    of the WinDriver package.
    </li><li class="listitem" style="list-style-type: disc">
    An INF file for your device.<br>
    You can generate this file with DriverWizard, as explained in
    <a class="xref" href="#DriverWizard_Walkthrough" title="5.2. DriverWizard Walkthrough"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 5.2</fo:inline></a>.
    </li></ul></div><p>
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="dist_winpnp_install_on_target"></a>10.2.2. Installing Your Driver on the Target Computer</h3></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
  Driver installation on Windows requires administrator privileges.
  </td></tr></table></div><p>
Follow the instructions below in the order specified to properly install your
driver on the target computer:

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
    <span class="b"><strong>Preliminary Steps:</strong></span><br>
    
  To successfully install your driver, make sure that
  there are no open handles to the WinDriver service (<span class="jprintfilename"><strong>windrvr1281.sys</strong></span> or
  your renamed driver<a class="xref" href="#wd_rename_driver" title="11.2. Renaming the WinDriver Kernel Driver"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [11.2]</fo:inline></a>), and that there are no
  connected and enabled Plug&#65279;-&#65279;and&#65279;-&#65279;Play devices that are registered with this service.

    If the service is being used, attempts to install the new driver using
    <span class="jprintfilename"><strong>wdreg</strong></span> will fail. This is relevant, for
    example, when upgrading from an earlier version of the driver that uses the
    same driver name.
    
    You can disable or uninstall connected devices from the Device Manager
    (<span class="jmenupath"><strong>Properties | Disable/Uninstall</strong></span>) or using
    <span class="jprintfilename"><strong>wdreg</strong></span>, or otherwise physically disconnect
    the device(s) from the PC.
    </p><div class="info" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/info.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
    Since v11.9.0 of WinDriver, the default driver module name includes the WinDriver
    version, so if you do not rename the driver to a previously-used name there
    should not be conflicts with older drivers.
    </td></tr></table></div></li><li class="listitem" style="list-style-type: disc"><span class="b"><strong>Install WinDriver's kernel module:</strong></span><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
        Copy <span class="jprintfilename"><strong>windrvr1281.sys</strong></span>, <span class="jprintfilename"><strong>windrvr1281.inf</strong></span>, and <span class="jprintfilename"><strong>windrvr1281.cat</strong></span> to the
        same directory.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
        <span class="jprintfilename"><strong>windrvr1281.cat</strong></span> contains the driver's Authenticode digital signature. To
        maintain the signature's validity this file must be found in the same
        installation directory as the <span class="jprintfilename"><strong>windrvr1281.inf</strong></span> file. If you select to 
        distribute the catalog and INF files in different directories, or make 
        any changes to these files or to any other files referred to by the
        catalog file (such as <span class="jprintfilename"><strong>windrvr1281.sys</strong></span>), you will need to do
        either of the following:<br>
          </p><div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
              Create a new catalog file and re-sign the driver using this file.
            </li><li class="listitem" style="list-style-type: disc">
              Comment-out or remove the following line in the <span class="jprintfilename"><strong>windrvr1281.inf</strong></span>
              file:<br><strong class="jcmd"><code>CatalogFile=<span class="jprintfilename"><strong>windrvr1281.cat</strong></span></code></strong><br>
              and do not include the catalog file in your driver distribution.
              However, note that this option invalidates the driver's digital
              signature.
            </li></ul></div><p>
        </p><p>
        For more information regarding driver digital signing and certification
        and the signing of your WinDriver-based driver, refer to
        <a class="xref" href="#driver_sign" title="11.3. Windows Digital Driver Signing and Certification"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 11.3</fo:inline></a> of the manual.
        </p></td></tr></table></div></li><li class="listitem"><p>
        Use the utility <span class="jprintfilename"><strong>wdreg</strong></span> to install
        WinDriver's kernel module on the target computer:<br>
        <strong class="jcmd"><code>wdreg -inf &lt;path to windrvr1281.inf&gt; install</code></strong>
        </p><p>
        For example, if <span class="jprintfilename"><strong>windrvr1281.inf</strong></span> and <span class="jprintfilename"><strong>windrvr1281.sys</strong></span> are in the
        <span class="jdirectory"><strong>d:\MyDevice</strong></span> directory on the target computer,
        the command should be:<br>
        <strong class="jcmd"><code>wdreg -inf d:\MyDevice\windrvr1281.inf install</code></strong>
        </p><p>
        You can find the executable of <span class="jprintfilename"><strong>wdreg</strong></span>
        in the WinDriver package under the <span class="jdirectory"><strong>WinDriver\util</strong></span>
        directory. For a general description of this utility and its usage,
        please refer to <a class="xref" href="#Dynamic_Driver_Load" title="Chapter 9. Dynamically Loading Your Driver"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Chapter 9</fo:inline></a>.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><span class="jprintfilename"><strong>wdreg</strong></span> is dependent on the
            <span class="jprintfilename"><strong>difxapi.dll</strong></span> DLL.
          </li><li class="listitem" style="list-style-type: disc"><span class="jprintfilename"><strong>wdreg</strong></span> is an interactive utility.
            If it fails, it will display a message instructing the user how
            to overcome the problem. In some cases the user may be asked to
            reboot the computer.
          </li></ul></div></td></tr></table></div><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="scripts/images/caution.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
        When distributing your driver, you should attempt to ensure that the
        installation does not overwrite a newer version of
        <span class="jprintfilename"><strong>windrvr1281.sys</strong></span> with an older version of the file in Windows
        drivers directory
        (<span class="jdirectory"><strong>%windir%\&#65279;system32\&#65279;drivers</strong></span>)
        &#8212; for example, by configuring your installation program (if you
        are using one) or your INF file so that the installer automatically
        compares the time stamp on these two files and does not overwrite a
        newer version with an older one. The provided <span class="jprintfilename"><strong>windrvr1281.inf</strong></span> file uses
        the <code class="japi">COPYFLG_NO_VERSION_DIALOG</code> directive, which is designed
        to avoid overwriting a file in the destination directory with the
        source file if the existing file is newer than the source file. There
        is also a similar <code class="japi">COPYFLG_OVERWRITE_OLDER_ONLY</code> INF
        directive that is designed to ensure that the source file is copied to
        the destination directory only if the destination file is superseded by
        a newer version. <span class="b"><strong>Note</strong></span>, however, that both of these INF
        directives are irrelevant to digitally signed drivers. As explained in
        the Microsoft <em class="it">INF CopyFiles Directive</em> documentation &#8212;
        <a class="ulink" href="https://msdn.microsoft.com/en-us/library/ff546346%28v=vs.85%29.aspx" target="_top">https://msdn.microsoft.com/en-us/library/ff546346%28v=vs.85%29.aspx</a>
        &#8212; if a driver package is digitally signed, Windows installs the
        package as a whole and does not selectively omit files in the package
        based on other versions already present on the computer. The
        <span class="jprintfilename"><strong>windrvr1281.sys</strong></span> driver provided by Jungo is digitally signed
        (refer to <a class="xref" href="#driver_sign" title="11.3. Windows Digital Driver Signing and Certification"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 11.3</fo:inline></a> for more information).
        </td></tr></table></div></li></ol></div></li><li class="listitem" style="list-style-type: disc"><p>
    <span class="b"><strong>Install the INF file for your device</strong></span> (registering your Plug&#65279;-&#65279;and&#65279;-&#65279;Play
    device with <span class="jprintfilename"><strong>windrvr1281.sys</strong></span>):
    </p><p>
    Run the utility <span class="jprintfilename"><strong>wdreg</strong></span> with the
    <strong class="jcmd"><code>install</code></strong> command to automatically install the INF file and
    update Windows Device Manager:<br>
    <strong class="jcmd"><code>wdreg -inf &lt;path to your INF file&gt; install</code></strong>
    </p><p>
    You can also use the <span class="jprintfilename"><strong>wdreg</strong></span> utility's
    <strong class="jcmd"><code>preinstall</code></strong> command to pre-install an INF file for a device
    that is not currently connected to the PC:<br>
    <strong class="jcmd"><code>wdreg -inf &lt;path to your INF file&gt; preinstall</code></strong>
    
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
    If the installation fails with an
  <strong class="japib"><code>ERROR_FILE_NOT_FOUND</code></strong> error, inspect the Windows registry to
  see if the <strong class="japib"><code>RunOnce</code></strong> key exists in
  <strong class="japib"><code>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion</code></strong>.
  This registry key is required by Windows Plug&#65279;-&#65279;and&#65279;-&#65279;Play in order to properly install
  drivers using INF files. If the <strong class="japib"><code>RunOnce</code></strong> key is missing, create
  it; then try installing the INF file again.
    </td></tr></table></div></li><li class="listitem" style="list-style-type: disc"><p>
    
    <span class="b"><strong>Install <span class="jprintfilename"><strong>wdapi1281.dll</strong></span>:</strong></span>
    <br>
    If your hardware-control application/DLL uses
    <span class="jprintfilename"><strong>wdapi1281.dll</strong></span> (as is the case
    for the sample and generated DriverWizard WinDriver projects), copy this DLL
    to the target's
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>%windir%\system32</strong></span></span>
    directory.<br>
    
    
    If you are distributing a 32-&#65279;bit application/DLL to a target 64-&#65279;bit
    platform<a class="xref" href="#32bit_app_on_64bit_arch_win_unix" title="A.2. Support for 32-&#65279;Bit Applications on 64-&#65279;Bit Windows and Linux Platforms"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A.2]</fo:inline></a>, rename
    <span class="jprintfilename"><strong>wdapi1281_32.dll</strong></span> in your
    distribution package to
    <span class="jprintfilename"><strong>wdapi1281.dll</strong></span>, and copy the
    renamed file to the target's
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>%windir%\sysWOW64</strong></span></span>
    directory.
    
    
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
    If you attempt to write a 32-&#65279;bit installation program that installs a
    64-&#65279;bit program, and therefore copies the 64-&#65279;bit
    <span class="jprintfilename"><strong>wdapi1281.dll</strong></span> DLL to the
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>%windir%\system32</strong></span></span>
    directory, you may find that the file is actually copied to the 32-&#65279;bit
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>%windir%\sysWOW64</strong></span></span>
    directory. The reason for this is that Windows x64 platforms translate
    references to 64-&#65279;bit directories from 32-&#65279;bit commands into references
    to 32-&#65279;bit directories. You can avoid the problem by using 64-&#65279;bit
    commands to perform the necessary installation steps from your 32-&#65279;bit
    installation program. The <span class="jprintfilename"><strong>system64.exe</strong></span>
    program, provided in the <span class="jdirectory"><strong>WinDriver&#65279;\&#65279;redist</strong></span> directory of the Windows x64
    WinDriver distributions, enables you to do this.
    </td></tr></table></div></li><li class="listitem" style="list-style-type: disc">
    <span class="b"><strong>Install your hardware-control application/DLL</strong></span>: Copy your
    hardware-control application/DLL to the target and run it!
    </li></ul></div><p>
</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dist_linux"></a>10.3. Linux Driver Distribution</h2></div></div></div><p>
To distribute your driver, prepare a distribution package containing the
required files &#8212; as outlined in
<a class="xref" href="#dist_linux_pkg_prepare" title="10.3.1. Preparing the Distribution Package"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 10.3.1</fo:inline></a> &#8212; and then build and install
the required driver components on the target &#8212; as outlined in
<a class="xref" href="#dist_linux_build_install_wd_modules" title="10.3.2. Building and Installing the WinDriver Driver Modules on the Target"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Sections 10.3.2&#8211;</fo:inline></a><a class="xref" href="#dist_linux_install_user_hw_ctrl_app_so" title="10.3.3. Installing the User-Mode Hardware-Control Application or Shared Object"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">10.3.3</fo:inline></a>.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    If you have renamed the WinDriver driver module<span xmlns:fo="http://www.w3.org/1999/XSL/Format">s</span><a class="xref" href="#wd_rename_driver" title="11.2. Renaming the WinDriver Kernel Driver"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [11.2]</fo:inline></a>,
    replace references to <span class="jprintfilename"><strong>windrvr1281</strong></span> in the following instructions
    with the name of your renamed driver module.
    </li><li class="listitem" style="list-style-type: disc">
    It is recommended that you supply an installation shell script to automate
    the build and installation processes on the target.
  </li></ul></div></td></tr></table></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="dist_linux_pkg_prepare"></a>10.3.1. Preparing the Distribution Package</h3></div></div></div><p>
Prepare a distribution package containing the required files, as described
in this section.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    If you wish to distribute drivers for both 32-&#65279;bit and 64-&#65279;bit target
  platforms, you must prepare separate distribution packages for each platform.
  The required files for each package are provided in the WinDriver installation
  directory for the respective platform.
  </li><li class="listitem" style="list-style-type: disc"><a name="dist_linux_note_src_dir"></a>
    In the following instructions, <span class="jdirectory"><strong>&lt;source_dir&gt;</strong></span> represents the source directory
    from which to copy the distribution files. The default source directory is
    your WinDriver installation directory. However, if you have renamed the WinDriver
    driver module<span xmlns:fo="http://www.w3.org/1999/XSL/Format">s</span><a class="xref" href="#wd_rename_driver" title="11.2. Renaming the WinDriver Kernel Driver"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [11.2]</fo:inline></a>, the source directory is a
    directory containing modified files for compiling and installing the
    renamed drivers; when using DriverWizard to generate the driver code, the
    source directory for the renamed driver is the generated
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>xxx_installation</strong></span></span> directory,
    where <span class="jprintfilename"><strong>xxx</strong></span> is the name of your generated
    driver project (see
    <a class="xref" href="#wd_rename_driver_linux" title="11.2.2. Linux Driver Renaming"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 11.2.2</fo:inline></a>, <a class="xref" href="#wd_rename_driver_linux_step_wiz_gen_files"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Step 1</fo:inline></a>).
  </li></ul></div></td></tr></table></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="dist_linux_pkg_prepare_kernel_modules"></a>10.3.1.1. Kernel Module Components</h4></div></div></div><p>
WinDriver uses two kernel modules: the main WinDriver driver module, which implements
the WinDriver API &#8212; <span class="jprintfilename"><strong>windrvr1281.o/.ko</strong></span> &#8212; and a driver module that
implements the USB functionality &#8212; <span class="jprintfilename"><strong>windrvr1281_usb.o/.ko</strong></span>.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
Your kernel driver modules cannot be distributed as-is; they must be recompiled
on each target machine, to match the kernel version on the target. This is due
to the following reason: The Linux kernel is continuously under development,
and kernel data structures are subject to frequent changes. To support such a
dynamic development environment, and still have kernel stability, the Linux
kernel developers decided that kernel modules must be compiled with header
files identical to those with which the kernel itself was compiled. They
enforce this by including a version number in the kernel header files, which is
checked against the version number encoded into the kernel. This forces Linux
driver developers to support recompilation of their driver with the target
system's kernel version.
</td></tr></table></div><p>
Following is a list of the components you need to distribute to enable
compilation of your kernel driver modules on the target machine.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
It is recommended that you copy the files to subdirectories in the
distribution directory that match the source subdirectories, such as
<span class="jdirectory"><strong>redist</strong></span> and <span class="jprintfilename"><strong>include</strong></span>, except where
otherwise specified. If you select not do so, you will need to modify the file
paths in the configuration scripts and related makefile templates, to match the
location of the files in your distribution directory.
</td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    From the
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><a class="link" href="#dist_linux_note_src_dir">&lt;source_dir&gt;</a><span class="jdirectory"><strong>/include</strong></span></span>
    directory, copy <span class="jprintfilename"><strong>windrvr.h</strong></span>,
    <span class="jprintfilename"><strong>wd_ver.h</strong></span>, and
    <span class="jprintfilename"><strong>windrvr_usb.h</strong></span> &#8212; header files
    required for building the kernel modules on the target.
    
    </li><li class="listitem" style="list-style-type: disc">
    From the <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>&lt;WinDriver installation
      directory&gt;/util</strong></span></span> directory (or from the
    generated DriverWizard
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>xxx_installation</strong></span>/<span class="jdirectory"><strong>redist</strong></span></span>
    directory), copy <span class="jprintfilename"><strong>wdreg</strong></span> &#8212; a script
    for loading the WinDriver kernel driver module<span xmlns:fo="http://www.w3.org/1999/XSL/Format">s</span> (see
    <a class="xref" href="#dyn_linux" title="9.5. Linux Dynamic Driver Loading"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 9.5</fo:inline></a>) &#8212; to the <span class="jdirectory"><strong>redist</strong></span> distribution
    directory.
    </li><li class="listitem" style="list-style-type: disc">
    From the <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><a class="link" href="#dist_linux_note_src_dir">&lt;source_dir&gt;</a>/<span class="jdirectory"><strong>redist</strong></span></span> directory,
    unless where otherwise specified, copy the following files:

    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
        <span class="jprintfilename"><strong>setup_inst_dir</strong></span> &#8212; a script for
        installing the WinDriver driver module<span xmlns:fo="http://www.w3.org/1999/XSL/Format">s</span>, using
        <span class="jprintfilename"><strong>wdreg</strong></span> (see above).
        </li><li class="listitem">
        <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jprintfilename"><strong>linux_wrappers.c/.h</strong></span></span>
        &#8212; wrapper library source code files that bind the kernel module
        to the Linux kernel.
        </li><li class="listitem"><span class="jprintfilename"><strong>linux_common.h</strong></span> and
        <span class="jprintfilename"><strong>wdusb_interface.h</strong></span> &#8212; header files
        required for building the kernel modules on the target.
        
      </li><li class="listitem"><span class="jprintfilename"><strong>wdusb_linux.c</strong></span> &#8212; source file used
        by WinDriver to utilize the USB stack.
        </li><li class="listitem">
        The compiled object code for building the WinDriver kernel driver module<span xmlns:fo="http://www.w3.org/1999/XSL/Format">s</span>
        &#8212;

        <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><span class="jprintfilename"><strong>windrvr_gcc_v3.a</strong></span> &#8212; for
            <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap">GCC v3.x.x</span> compilation
          </li><li class="listitem"><span class="jprintfilename"><strong>windrvr_gcc_v3_regparm.a</strong></span> &#8212;
            for <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap">GCC v3.x.x</span> compilation with the
            <span class="b"><strong>regparm</strong></span> flag
          </li><li class="listitem"><span class="jprintfilename"><strong>windrvr_gcc_v2.a</strong></span> &#8212; for
            <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap">GCC v2.x.x</span> compilation;
            note that this file is not found in the
  64-&#65279;bit WinDriver installations, because 64-&#65279;bit Linux architectures don't use
  GCC v2.
          </li></ul></div>
        </li><li class="listitem">
        Configuration scripts and makefile templates for creating makefiles
        for building and installing the WinDriver kernel driver module<span xmlns:fo="http://www.w3.org/1999/XSL/Format">s</span>.

        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
        Files that include <span class="jprintfilename"><strong>.kbuild</strong></span> in their
        names use <span class="jprintfilename"><strong>kbuild</strong></span> for the driver
        compilation.
        </td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
            <span class="jprintfilename"><strong>configure</strong></span> &#8212; a configuration
            script that uses the <span class="jprintfilename"><strong>makefile.in</strong></span>
            template to create a <span class="jprintfilename"><strong>makefile</strong></span> for
            building and installing the WinDriver driver module<span xmlns:fo="http://www.w3.org/1999/XSL/Format">s</span>, and executes the
            <span class="jprintfilename"><strong>configure.wd</strong></span><span xmlns:fo="http://www.w3.org/1999/XSL/Format"> and <span class="jprintfilename"><strong>configure.usb</strong></span>
            </span>
            script<span xmlns:fo="http://www.w3.org/1999/XSL/Format">s</span>
            (see below).
            </li><li class="listitem">
            <span class="jprintfilename"><strong>configure.wd</strong></span> &#8212; a
            configuration script that uses the
            <span class="jprintfilename"><strong>makefile.wd[.kbuild].in</strong></span> template
            to create a <span class="jprintfilename"><strong>makefile.wd[.kbuild]</strong></span>
            makefile for building the <span class="jprintfilename"><strong>windrvr1281.o/.ko</strong></span> driver module.
            </li><li class="listitem">
            <span class="jprintfilename"><strong>configure.usb</strong></span> &#8212; a
            configuration script that uses the
            <span class="jprintfilename"><strong>makefile.usb[.kbuild].in</strong></span> template
            to create a <span class="jprintfilename"><strong>makefile.usb[.kbuild]</strong></span>
            makefile for building the <span class="jprintfilename"><strong>windrvr1281_usb.o/.ko</strong></span> driver module.
            </li><li class="listitem">
            <span class="jprintfilename"><strong>makefile.in</strong></span> &#8212; a template for
            the main <span class="jprintfilename"><strong>makefile</strong></span> for building and
            installing the WinDriver kernel driver module<span xmlns:fo="http://www.w3.org/1999/XSL/Format">s</span>, using
            <span class="jprintfilename"><strong>makefile.wd[.kbuild]</strong></span><span xmlns:fo="http://www.w3.org/1999/XSL/Format">
              and
              <span class="jprintfilename"><strong>makefile.usb[.kbuild]</strong></span></span>.
            </li><li class="listitem">
            <span class="jprintfilename"><strong>makefile.wd.in</strong></span> and
            <span class="jprintfilename"><strong>makefile.wd.kdbuild.in</strong></span> &#8212;
            templates for creating
            <span class="jprintfilename"><strong>makefile.wd[.kbuild]</strong></span> makefiles for
            building and installing the <span class="jprintfilename"><strong>windrvr1281.o/.ko</strong></span> driver module.
            </li><li class="listitem">
            <span class="jprintfilename"><strong>makefile.usb.in</strong></span> and
            <span class="jprintfilename"><strong>makefile.usb.kdbuild.in</strong></span> &#8212;
            templates for creating
            <span class="jprintfilename"><strong>makefile.usb[.kbuild]</strong></span> makefiles
            for building and installing the <span class="jprintfilename"><strong>windrvr1281_usb.o/.ko</strong></span> driver
            module.
            </li></ul></div></li></ul></div></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="dist_linux_pkg_prepare_user_hw_ctrl_app_so"></a>10.3.1.2. User-Mode Hardware-Control Application or Shared Object</h4></div></div></div><p>
Copy the user-mode hardware-control application or shared object that you
created with WinDriver, to the distribution package.
</p><p>

If your hardware-control application/shared object uses
<span class="jprintfilename"><strong>libwdapi1281.so</strong></span> &#8212; as is the
case for the WinDriver samples and generated DriverWizard projects &#8212; copy
this file from the
<span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><a class="link" href="#dist_linux_note_src_dir">&lt;source_dir&gt;</a><span class="jdirectory"><strong>/lib</strong></span></span> directory
to your distribution package.<br>


If you are distributing a 32-&#65279;bit application/shared object to a target
64-&#65279;bit platform<a class="xref" href="#32bit_app_on_64bit_arch_win_unix" title="A.2. Support for 32-&#65279;Bit Applications on 64-&#65279;Bit Windows and Linux Platforms"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A.2]</fo:inline></a> &#8212; copy
<span class="jprintfilename"><strong>libwdapi1281_32.so</strong></span> from the
<span class="jdirectory"><strong>WinDriver/lib</strong></span> directory to your distribution package, and
rename the copy to <span class="jprintfilename"><strong>libwdapi1281.so</strong></span>.

</p><p>
Since your hardware-control application/shared object does not have to be
matched against the Linux kernel version number, you may distribute it as a
binary object (to protect your code from unauthorized copying). If you select
to distribute your driver's source code, note that under the license agreement
with Jungo you may not distribute the source code of the
<span class="jprintfilename"><strong>libwdapi1281.so</strong></span> shared object, or
the WinDriver license string used in your code.
</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="dist_linux_build_install_wd_modules"></a>10.3.2. Building and Installing the WinDriver Driver Module<span xmlns:fo="http://www.w3.org/1999/XSL/Format">s</span> on the Target</h3></div></div></div><p>
From the distribution package subdirectory containing the
<span class="jprintfilename"><strong>configure</strong></span> script and related build and
installation files &#8212; normally the <span class="jdirectory"><strong>redist</strong></span> subdirectory<a class="xref" href="#dist_linux_build_install_wd_modules" title="10.3.2. Building and Installing the WinDriver Driver Modules on the Target"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [10.3.2]</fo:inline></a> &#8212; perform the following steps
to build and install the driver module<span xmlns:fo="http://www.w3.org/1999/XSL/Format">s</span> on the target:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
    Generate the required makefiles:<br>
    <strong class="jcmd"><code>$ </code></strong><span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><strong class="jcmd"><code>./configure</code></strong></span>

    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
      The configuration script creates a makefile based on the running kernel.
      You may select to use another installed kernel source, by executing the
      script with the
      <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><strong class="japib"><code>--with-kernel-source=&lt;path&gt;</code></strong></span>
      option, where <strong class="japib"><code>&lt;path&gt;</code></strong> is the full path to the kernel
      source directory &#8212; e.g.,
      <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>/usr/src/linux</strong></span></span>.<br></li><li class="listitem" style="list-style-type: disc">
      If the Linux kernel version is 2.6.26 or
  higher, the configuration script generates makefiles that use
  <span class="jprintfilename"><strong>kbuild</strong></span> to compile the kernel modules. You
  can force the use of <span class="jprintfilename"><strong>kbuild</strong></span> on earlier
  versions of Linux, by executing the configuration script with the
  <strong class="japib"><code>--enable-kbuild</code></strong> flag.
    </li></ul></div></td></tr></table></div><div class="info" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/info.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
  For a full list of the configuration script options, use the
  <strong class="jcmd"><code>--help</code></strong> option:<br><strong class="jcmd"><code>./configure --help</code></strong></td></tr></table></div>
    </li><li class="listitem">
    Build the WinDriver driver module<span xmlns:fo="http://www.w3.org/1999/XSL/Format">s</span>:<br>
    <strong class="jcmd"><code>$ make</code></strong>

    <p>
    This will create a <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>LINUX.&lt;kernel version&gt;.&lt;CPU&gt;</strong></span></span> directory, containing the
    newly compiled driver module<span xmlns:fo="http://www.w3.org/1999/XSL/Format">s</span> &#8212; <span class="jprintfilename"><strong>windrvr1281.o/.ko</strong></span><span xmlns:fo="http://www.w3.org/1999/XSL/Format"> and <span class="jprintfilename"><strong>windrvr1281_usb.o/.ko</strong></span></span>.
    </p>
    </li><li class="listitem">
    Install the <span class="jprintfilename"><strong>windrvr1281.o/.ko</strong></span>
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format"> and <span class="jprintfilename"><strong>windrvr1281_usb.o/.ko</strong></span></span>
    driver module<span xmlns:fo="http://www.w3.org/1999/XSL/Format">s</span>.

    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
  The following command must be executed with root privileges.
  </td></tr></table></div>

    <strong class="jcmd"><code># make install</code></strong>
    <p>
    The installation is performed using the
    <span class="jprintfilename"><strong>setup_inst_dir</strong></span> script, which copies the
    driver module<span xmlns:fo="http://www.w3.org/1999/XSL/Format">s</span> to the target's loadable kernel modules directory, and uses
    the <span class="jprintfilename"><strong>wdreg</strong></span> script<a class="xref" href="#dyn_linux" title="9.5. Linux Dynamic Driver Loading"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [9.5]</fo:inline></a> to
    load the driver module<span xmlns:fo="http://www.w3.org/1999/XSL/Format">s</span>.
    
    </p></li><li class="listitem">
    Change the user and group IDs and give read/write permissions to the device
    file
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>/dev/windrvr1281</strong></span></span>,
    depending on how you wish to allow users to access hardware through the
    device. Due to security reasons, by default the device file is created with
    permissions only for the root user. Change the permissions by modifying
    your <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jprintfilename"><strong>/etc/udev/permissions.d/50-udev.permissions</strong></span></span>
    file. For example, add the following line to provide read and write
    permissions:<br>
    <code class="code">windrvr1281:root:root:0666</code><br>
    </li></ol></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="scripts/images/tip.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
Use the <span class="jprintfilename"><strong>wdreg</strong></span> script to dynamically load the
WinDriver driver module<span xmlns:fo="http://www.w3.org/1999/XSL/Format">s</span> on the target after each boot<a class="xref" href="#dyn_linux" title="9.5. Linux Dynamic Driver Loading"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [9.5]</fo:inline></a>. To
automate this, copy <span class="jprintfilename"><strong>wdreg</strong></span> to the target
machine, and add the following line to the target's Linux boot file (for example,
  <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jprintfilename"><strong>/etc/rc.local</strong></span></span>):<br><code class="japi">&lt;path to wdreg&gt; windrvr1281</code></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="dist_linux_install_user_hw_ctrl_app_so"></a>10.3.3. Installing the User-Mode Hardware-Control Application or
  Shared Object</h3></div></div></div><p>
If your user-mode hardware-control application or shared object uses
<span class="jprintfilename"><strong>libwdapi1281.so</strong></span><a class="xref" href="#dist_linux_pkg_prepare_user_hw_ctrl_app_so" title="10.3.1.2. User-Mode Hardware-Control Application or Shared Object"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [10.3.1.2]</fo:inline></a>, copy
<span class="jprintfilename"><strong>libwdapi1281.so</strong></span> from the
distribution package to the target's library directory:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>/usr/lib</strong></span></span> &#8212; when
    distributing a 32-&#65279;bit application/shared object to a 32-&#65279;bit or 64-&#65279;bit
    target
  </li><li class="listitem" style="list-style-type: disc"><span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>/usr/lib64</strong></span></span> &#8212; when
    distributing a 64-&#65279;bit application/shared object to a 64-&#65279;bit target
  </li></ul></div><p>
</p><p>
If you decided to distribute the source code of the application/shared
object<a class="xref" href="#dist_linux_pkg_prepare_user_hw_ctrl_app_so" title="10.3.1.2. User-Mode Hardware-Control Application or Shared Object"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [10.3.1.2]</fo:inline></a>, copy the source
code to the target as well.

</p><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="scripts/images/caution.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
Remember that you may <em class="it">not</em> distribute the source code of the
<span class="jprintfilename"><strong>libwdapi1281.so</strong></span> shared object or
your WinDriver license string as part of the source code distribution<a class="xref" href="#dist_linux_pkg_prepare_user_hw_ctrl_app_so" title="10.3.1.2. User-Mode Hardware-Control Application or Shared Object"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [10.3.1.2]</fo:inline></a>.
</td></tr></table></div><p>
</p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="driver_install_advanced"></a>Chapter 11. Driver Installation &#8212; Advanced Issues</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="winpnp_inf"></a>11.1. Windows INF Files</h2></div></div></div><p>
Device information (INF) files are text files that provide information used by
the Windows Plug&#65279;-&#65279;and&#65279;-&#65279;Play mechanism to install software that supports a given
hardware device. INF files are required for hardware that identifies itself,
such as USB and PCI. An INF file includes all necessary information about a
device and the files to be installed. When hardware manufacturers introduce new
products, they must create INF files to explicitly define the resources and
files required for each class of device.
</p><p>
In some cases, the INF file for your specific device is supplied by the
operating system. In other cases, you will need to create an INF file for your
device. WinDriver's DriverWizard can generate a specific INF file for your
device. The INF file is used to notify the operating system that WinDriver now
handles the selected device.
</p><p>
For USB devices, you will not be able to access the device with WinDriver (either
from DriverWizard or from the code) without first registering the device to
work with <span class="jprintfilename"><strong>windrvr1281.sys</strong></span>. This is done by installing an INF file for the
device. DriverWizard will offer to automatically generate the INF file for your
device.
</p><p>
You can use DriverWizard to generate the INF file on the development machine
&#8212; as explained in <a class="xref" href="#DriverWizard_Walkthrough" title="5.2. DriverWizard Walkthrough"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 5.2</fo:inline></a>
of the manual &#8212; and then install the INF file on any machine to which you
distribute the driver, as explained in the following sections.
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="Why_Create_INF"></a>11.1.1. Why Should I Create an INF File?</h3></div></div></div>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    To bind the WinDriver kernel module to a specific <span xmlns:fo="http://www.w3.org/1999/XSL/Format">USB</span> device.
  </li><li class="listitem" style="list-style-type: disc">
    To override the existing driver (if any).
  </li><li class="listitem" style="list-style-type: disc">
    To enable WinDriver applications and DriverWizard to access a <span xmlns:fo="http://www.w3.org/1999/XSL/Format">USB</span> 
    device.
  </li></ul></div>
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="INF_install_no_driver"></a>11.1.2. How Do I Install an INF File When No Driver Exists?</h3></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
You must have administrative privileges in order to install an INF file.
</td></tr></table></div><p>
You can use the <span class="jprintfilename"><strong>wdreg</strong></span> utility with the
<strong class="jcmd"><code>install</code></strong> command to automatically install the INF file:<br>
<strong class="jcmd"><code>wdreg -inf &lt;path to the INF file&gt; install</code></strong><br>
(For more information, refer to
<a class="xref" href="#dyn_windows_wdreg" title="9.2.1. The wdreg Utility"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 9.2.1</fo:inline></a> of the manual.)
</p><p>
On the development PC, you can have the INF file automatically installed when
selecting to generate the INF file with DriverWizard, by checking the
<span class="jmenuitem"><strong>Automatically Install the INF file</strong></span> option in the
DriverWizard's INF generation window (refer to
<a class="xref" href="#DriverWizard_Walkthrough" title="5.2. DriverWizard Walkthrough"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 5.2</fo:inline></a>).
</p><p>
    On the development PC, you can also use the <span class="jprintfilename"><strong>wdreg_frontned</strong></span> <a class="xref" href="#wdreg_frontend" title="9.3. The wdreg_frontend utility"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [9.3]</fo:inline></a> utility to install/uninstall INFs and perform other advanced tasks.
</p><p>
It is also possible to install the INF file manually, using either of the
following methods:

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    Windows <span class="jmenuitem"><strong>Found New Hardware Wizard</strong></span>: This wizard is
    activated when the device is plugged in or, if the device was already
    connected, when scanning for hardware changes from the Device Manager.
  </li><li class="listitem" style="list-style-type: disc">
    Windows <span class="jmenuitem"><strong>Add/Remove Hardware Wizard</strong></span>: Right-click the
    mouse on <span class="jmenuitem"><strong>My Computer</strong></span>, select
    <span class="jmenuitem"><strong>Properties</strong></span>, choose the
    <span class="jmenuitem"><strong>Hardware</strong></span> tab and click on
    <span class="jmenuitem"><strong>Hardware Wizard...</strong></span>.
  </li><li class="listitem" style="list-style-type: disc">
    Windows <span class="jmenuitem"><strong>Upgrade Device Driver Wizard</strong></span>: Locate the
    device in the <span class="jmenuitem"><strong>Device Manager</strong></span> devices list and select
    the <span class="jmenuitem"><strong>Update Driver...</strong></span> option from the right-click
    mouse menu or from the Device Manager's <span class="jmenuitem"><strong>Action</strong></span> menu.
  </li></ul></div><p>
</p><p>
In all the manual installation methods above you will need to point Windows to
the location of the relevant INF file during the installation.<br>
We recommend using the <span class="jprintfilename"><strong>wdreg</strong></span> utility to
install the INF file automatically, instead of installing it manually.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
If the installation fails with an
  <strong class="japib"><code>ERROR_FILE_NOT_FOUND</code></strong> error, inspect the Windows registry to
  see if the <strong class="japib"><code>RunOnce</code></strong> key exists in
  <strong class="japib"><code>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion</code></strong>.
  This registry key is required by Windows Plug&#65279;-&#65279;and&#65279;-&#65279;Play in order to properly install
  drivers using INF files. If the <strong class="japib"><code>RunOnce</code></strong> key is missing, create
  it; then try installing the INF file again.
</td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="INF_replace_driver"></a>11.1.3. How Do I Replace an Existing Driver Using the INF File?</h3></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
You must have administrative privileges in order to replace a driver.
</td></tr></table></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
    Install your INF file.
    </p><p>
    You can use the <span class="jprintfilename"><strong>wdreg</strong></span> utility with the
    <strong class="jcmd"><code>install</code></strong> command to automatically install the INF file:<br>
    <strong class="jcmd"><code>wdreg -inf &lt;path to INF file&gt; install</code></strong> <br>
    (For more information, refer to
    <a class="xref" href="#dyn_windows_wdreg" title="9.2.1. The wdreg Utility"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 9.2.1</fo:inline></a> of the manual.)
    </p><p>
    On the development PC, you can have the INF file automatically installed
    when selecting to generate the INF file with DriverWizard, by checking the
    <span class="jmenuitem"><strong>Automatically Install the INF file</strong></span> option in the
    DriverWizard's INF generation window (refer to
    <a class="xref" href="#DriverWizard_Walkthrough" title="5.2. DriverWizard Walkthrough"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 5.2</fo:inline></a>).
</p><p>
    On the development PC, you can also use the <span class="jprintfilename"><strong>wdreg_frontned</strong></span> <a class="xref" href="#wdreg_frontend" title="9.3. The wdreg_frontend utility"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [9.3]</fo:inline></a> utility to install/uninstall INFs and perform other advanced tasks.
    </p><p>
    It is also possible to install the INF file manually, using either of the
    following methods:

    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
        Windows <span class="jmenuitem"><strong>Found New Hardware Wizard</strong></span>: This wizard
        is activated when the device is plugged in or, if the device was
        already connected, when scanning for hardware changes from the Device
        Manager.
        </li><li class="listitem" style="list-style-type: disc">
        Windows <span class="jmenuitem"><strong>Add/Remove Hardware Wizard</strong></span>:
        Right-click on <span class="jmenuitem"><strong>My Computer</strong></span>, select
        <span class="jmenuitem"><strong>Properties</strong></span>, choose the
        <span class="jmenuitem"><strong>Hardware</strong></span> tab and click on
        <span class="jmenuitem"><strong>Hardware Wizard...</strong></span>.
        </li><li class="listitem" style="list-style-type: disc">
        Windows <span class="jmenuitem"><strong>Upgrade Device Driver Wizard</strong></span>: Locate
        the device in the <span class="jmenuitem"><strong>Device Manager</strong></span> devices list
        and select the <span class="jmenuitem"><strong>Update Driver...</strong></span> option from
        the right-click mouse menu or from the Device Manager's
        <span class="jmenuitem"><strong>Action</strong></span> menu.
        </li></ul></div><p>
    </p><p>
    In the manual installation methods above you will need to point Windows to
    the location of the relevant INF file during the installation. If the
    installation wizard offers to install an INF file other than the one you
    have generated, select
    <span class="jmenuitem"><strong>Install one of the other drivers</strong></span> and choose your
    specific INF file from the list.
    </p><p>
    We recommend using the <span class="jprintfilename"><strong>wdreg</strong></span> utility to
    install the INF file automatically, instead of installing it manually.
    </p></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
If the installation fails with an
  <strong class="japib"><code>ERROR_FILE_NOT_FOUND</code></strong> error, inspect the Windows registry to
  see if the <strong class="japib"><code>RunOnce</code></strong> key exists in
  <strong class="japib"><code>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion</code></strong>.
  This registry key is required by Windows Plug&#65279;-&#65279;and&#65279;-&#65279;Play in order to properly install
  drivers using INF files. If the <strong class="japib"><code>RunOnce</code></strong> key is missing, create
  it; then try installing the INF file again.
</td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="wd_rename_driver"></a>11.2. Renaming the WinDriver Kernel Driver</h2></div></div></div><p>
The WinDriver APIs are implemented within the WinDriver kernel driver module
(<span class="jprintfilename"><strong>windrvr1281.sys/.dll/.o/.ko</strong></span> &#8212; depending on the OS), which provides the main driver functionality and enables
you to code your specific driver logic from the user mode<a class="xref" href="#WD_arch" title="1.5. WinDriver Architecture"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [1.5]</fo:inline></a>.
</p><p>
On Windows and Linux you can change the name of the WinDriver kernel module
to your preferred driver name, and then distribute the renamed driver instead
of the default kernel module &#8212; <span class="jprintfilename"><strong>windrvr1281.sys/.dll/.o/.ko</strong></span>. The following
sections explain how to rename the driver for each of the supported operating
systems.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
For information on how to use the Debug Monitor to log debug messages from your
renamed driver, refer to <a class="xref" href="#wddebug_gui_renamed_driver" title="7.2.1.3. Running wddebug_gui for a Renamed Driver"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 7.2.1.3: <span style="">Running wddebug_gui for a Renamed Driver</span></fo:inline></a>.
</td></tr></table></div><p>
A renamed WinDriver kernel driver can be installed on the same machine as the
original kernel module. You can also install multiple renamed WinDriver drivers on
the same machine, simultaneously.



</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="scripts/images/tip.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
Try to give your driver a unique name in order to avoid a potential conflict
with other drivers on the target machine on which your driver will be
installed.
</td></tr></table></div><p>
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="wd_rename_driver_windows"></a>11.2.1. Windows Driver Renaming</h3></div></div></div><p>
DriverWizard automates most of the work of renaming the Windows WinDriver kernel
driver &#8212; <span class="jprintfilename"><strong>windrvr1281.sys</strong></span>.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    When renaming the driver, the CPU architecture (32-&#65279;/64-&#65279;bit) of the
    development platform and its WinDriver installation, should match the target
    platform.
    </li><li class="listitem" style="list-style-type: disc">
    Renaming the signed <span class="jprintfilename"><strong>windrvr1281.sys</strong></span> driver nullifies its signature.
    In such cases you can select either to sign your new driver, or to
    distribute an unsigned driver. For more information on driver signing and
    certification, refer to <a class="xref" href="#driver_sign" title="11.3. Windows Digital Driver Signing and Certification"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 11.3</fo:inline></a>. For guidelines
    for signing and certifying your renamed driver, refer to
    <a class="xref" href="#driver_sign_wd_drivers" title="11.3.2. Driver Signing and Certification of WinDriver-Based Drivers"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 11.3.2</fo:inline></a>.
  </li></ul></div></td></tr></table></div><div class="info" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/info.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
References to
  <span class="jprintfilename"><strong>xxx</strong></span> in this section should be replaced with
  the name of your generated DriverWizard driver project.
</td></tr></table></div><p>
To rename your Windows WinDriver kernel driver, follow these steps:

</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><a name="wd_rename_driver_windows_step_wiz_gen_files"></a>
    Use the DriverWizard utility to generate driver code for your hardware on
    Windows (refer to <a class="xref" href="#DriverWizard_Walkthrough" title="5.2. DriverWizard Walkthrough"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 5.2</fo:inline></a>, <a class="xref" href="#step_dw_code_gen"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Step 7</fo:inline></a>), using your
    preferred driver name (<span class="jprintfilename"><strong>xxx</strong></span>) as the name of
    the generated driver project. The generated project directory
    (<span class="jdirectory"><strong>xxx</strong></span>) will include an
    <span class="jdirectory"><strong>xxx_installation</strong></span> directory with the following
    files and directories:

    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><span class="jdirectory"><strong>redist</strong></span> directory:

        <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
            <span class="jprintfilename"><strong>xxx.sys</strong></span> &#8212; Your new driver,
            which is actually a renamed copy of the <span class="jprintfilename"><strong>windrvr1281.sys</strong></span>
            driver. Note: The properties of the generated driver file (such
            as the file's version, company name, etc.) are identical to the
            properties of the original <span class="jprintfilename"><strong>windrvr1281.sys</strong></span> driver. You can
            rebuild the driver with new properties using the files from the
            generated <span class="jdirectory"><strong>xxx_installation sys</strong></span> directory,
            as explained below.
            </li><li class="listitem">
            <span class="jprintfilename"><strong>xxx_driver.inf</strong></span> &#8212; A
            modified version of the <span class="jprintfilename"><strong>windrvr1281.inf</strong></span> file, which will be used
            to install your new <span class="jprintfilename"><strong>xxx.sys</strong></span>
            driver.<br>
            You can make additional modifications to this file, if you
            wish &#8212; namely, changing the string definitions and/or
            comments in the file.
            </li><li class="listitem">
            <span class="jprintfilename"><strong>xxx_device.inf</strong></span> &#8212; A
            modified version of the standard generated DriverWizard INF file
            for your device, which registers your device with your driver
            (<span class="jprintfilename"><strong>xxx.sys</strong></span>).<br>
            You can make additional modifications to this file, if you wish,
            such as changing the manufacturer or driver provider strings.
            </li><li class="listitem">
            <span class="jprintfilename"><strong>wdapi1281.dll</strong></span> &#8212;
            A copy of the WinDriver-API DLL. The DLL is copied here in order to
            simplify the driver distribution, allowing you to use the generated
            <span class="jdirectory"><strong>xxx\&#65279;redist</strong></span> directory as the main
            installation directory for your driver, instead of the original
            <span class="jdirectory"><strong>WinDriver&#65279;\&#65279;redist</strong></span> directory.
            </li><li class="listitem">
            <span class="jprintfilename"><strong>wdreg.exe</strong></span>,
            <span class="jprintfilename"><strong>wdreg_gui.exe</strong></span>, and
            <span class="jprintfilename"><strong>difxapi.dll</strong></span> &#8212; Copies of the
            CUI and GUI versions of the
            <span class="jprintfilename"><strong>wdreg</strong></span> WinDriver driver installation
            utility, and the Driver Install Frameworks API (<span class="b"><strong>DIFxAPI</strong></span>) DLL required by this utility<a class="xref" href="#dyn_windows_wdreg" title="9.2.1. The wdreg Utility"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [9.2.1]</fo:inline></a>, (respectively). These files are copied
            from the <span class="jdirectory"><strong>WinDriver\util</strong></span> directory, to
            simplify the installation of the renamed driver.
            </li><li class="listitem"><a name="wd_wiz_win_gen_files_xxx_install_script"></a>
            <span class="jprintfilename"><strong>xxx_install.bat</strong></span> &#8212; An
            installation script that executes the
            <span class="jprintfilename"><strong>wdreg</strong></span> commands for installing the
            <span class="jprintfilename"><strong>xxx_driver.inf</strong></span> and
            <span class="jprintfilename"><strong>xxx_device.inf</strong></span> files. This script
            is designed to simplify the installation of the renamed
            <span class="jprintfilename"><strong>xxx_driver.sys</strong></span> driver, and the
            registration of your device with this driver.
            </li></ul></div></li><li class="listitem" style="list-style-type: disc"><p>
        <span class="jdirectory"><strong>sys</strong></span> directory: This directory contains files
        for advanced users, who wish to change the properties of their driver
        file. Note: Changing the file's properties requires rebuilding of the
        driver module using the Windows Driver Kit (<span class="b"><strong>WDK</strong></span>).<br>
        To modify the properties of your
        <span class="jprintfilename"><strong>xxx.sys</strong></span> driver file:

        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
            Verify that the WDK is installed on your development PC, or
            elsewhere on its network, and set the <span class="b"><strong>BASEDIR</strong></span> environment
            variable to point to the WDK installation directory.
            </li><li class="listitem">
           Modify the <span class="jprintfilename"><strong>xxx.rc</strong></span> resources file in
           the generated <span class="jdirectory"><strong>sys</strong></span> directory in order to set
           different driver file properties.
            </li><li class="listitem">
            Rebuild the driver by running the following command:<br>
            <strong class="jcmd"><code>ddk_make &lt;OS&gt; &lt;build mode (free/checked)&gt;</code></strong>
            <br>
            For example, to build a release version of the driver for Windows 7:
            <br>
            <strong class="jcmd"><code>ddk_make win7 free</code></strong>
            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
   The <span class="jprintfilename"><strong>ddk_make.bat</strong></span> utility is provided
   under the <span class="jdirectory"><strong>WinDriver\util</strong></span> directory, and should be
   automatically identified by Windows when running the build command.
   Run <strong class="jcmd"><code>ddk_make.bat</code></strong> with no parameters to view the available
   options for this utility.
  </li><li class="listitem" style="list-style-type: disc">
    The selected build OS must match the CPU architecture of your WinDriver
    installation. For example, you cannot select the 64-&#65279;bit
    <code class="japi">win7_x64</code> OS flag when using a 32-&#65279;bit WinDriver installation.
  </li></ul></div></td></tr></table></div></li></ol></div><p>
        </p><p>
        After rebuilding the <span class="jprintfilename"><strong>xxx.sys</strong></span> driver,
        copy the new driver file to the generated
        <span class="jdirectory"><strong>xxx_installation\&#65279;redist</strong></span> directory.
        </p></li></ul></div></li><li class="listitem">
    
  Verify that your user-mode application calls the <code class="jfunc">WD_DriverName</code><span class="jfunc">()</span>
  function<a class="xref" href="#WD_DriverName" title="B.1. WD_DriverName"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.1]</fo:inline></a> with your new driver name before calling
  any other WinDriver function.<br>
  Note that the sample and generated DriverWizard WinDriver applications already
  include a call to this function, but with the default driver name
  (<span class="jprintfilename"><strong>windrvr1281</strong></span>),
  
  so all you need to do is replace the driver name that is passed to the
  function in the code with your new driver name.

    </li><li class="listitem">
    
  Verify that your user-mode driver project is built with the
  <code class="japi">WD_DRIVER_NAME_CHANGE</code> preprocessor flag
  (e.g., <code class="japi">-DWD_DRIVER_NAME_CHANGE</code>).<br>
  Note: The sample and generated DriverWizard WinDriver kernel projects/makefiles
  already set this preprocessor flag by default.

    </li><li class="listitem">
    
  Install your new driver by following the instructions in
  <a class="xref" href="#dist_winpnp" title="10.2. Windows Driver Distribution"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 10.2</fo:inline></a> of the manual, using the modified files from the generated
  <span class="jdirectory"><strong>xxx_installation</strong></span> directory instead of the
  installation files from the original WinDriver distribution.
  
    Note that you can use the generated
    <a class="link" href="#wd_wiz_win_gen_files_xxx_install_script"><span class="jprintfilename"><strong>xxx_install.bat</strong></span></a> installation
   script (see <a class="xref" href="#wd_rename_driver_windows_step_wiz_gen_files"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Step 1</fo:inline></a>) to
   simplify the installation.
  
    </li></ol></div><p>
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="wd_rename_driver_linux"></a>11.2.2. Linux Driver Renaming</h3></div></div></div><p>
DriverWizard automates most of the work of renaming the Linux WinDriver kernel
driver &#8212; <span class="jprintfilename"><strong>windrvr1281.o/.ko</strong></span>.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
When renaming <span class="jprintfilename"><strong>windrvr1281.o/.ko</strong></span>, the <span class="jprintfilename"><strong>windrvr1281_usb.o/.ko</strong></span> WinDriver USB Linux
GPL driver is automatically renamed to
<span class="jprintfilename"><strong>&lt;new driver name&gt;_usb.o/.ko</strong></span>.
</td></tr></table></div><div class="info" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/info.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
References to
  <span class="jprintfilename"><strong>xxx</strong></span> in this section should be replaced with
  the name of your generated DriverWizard driver project.
</td></tr></table></div><p>
To rename your Linux WinDriver kernel driver, follow these steps:

</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><a name="wd_rename_driver_linux_step_wiz_gen_files"></a>
    Use the DriverWizard utility to generate driver code for your hardware on
    Linux (refer to <a class="xref" href="#DriverWizard_Walkthrough" title="5.2. DriverWizard Walkthrough"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 5.2</fo:inline></a>, <a class="xref" href="#step_dw_code_gen"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Step 7</fo:inline></a>), using your
    preferred driver name (<span class="jprintfilename"><strong>xxx</strong></span>) as the name of
    the generated driver project. The generated project directory
    (<span class="jdirectory"><strong>xxx</strong></span>) will include an
    <span class="jdirectory"><strong>xxx_installation</strong></span> directory with the following
    files and directories:

    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
        <span class="jdirectory"><strong>redist</strong></span> directory: This directory contains copies of the files
        from the original <span class="jdirectory"><strong>WinDriver&#65279;/&#65279;redist</strong></span> installation directory, but with the
        required modifications for building your
        <span class="jprintfilename"><strong>xxx.o/&#65279;.ko</strong></span> driver instead of
        <span class="jprintfilename"><strong>windrvr1281.o/.ko</strong></span>.
        
        </li><li class="listitem" style="list-style-type: disc">
        <span class="jdirectory"><strong>lib</strong></span> and <span class="jdirectory"><strong>include</strong></span>
        directories: Copies of the library and include directories from the
        original WinDriver distribution. These copies are created since the
        supported Linux WinDriver kernel driver build method relies on the
        existence of these directories directly under the same parent directory
        as the <span class="jdirectory"><strong>redist</strong></span> directory.
        </li></ul></div></li><li class="listitem">
    
  Verify that your user-mode application calls the <code class="jfunc">WD_DriverName</code><span class="jfunc">()</span>
  function<a class="xref" href="#WD_DriverName" title="B.1. WD_DriverName"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.1]</fo:inline></a> with your new driver name before calling
  any other WinDriver function.<br>
  Note that the sample and generated DriverWizard WinDriver applications already
  include a call to this function, but with the default driver name
  (<span class="jprintfilename"><strong>windrvr1281</strong></span>),
  
  so all you need to do is replace the driver name that is passed to the
  function in the code with your new driver name.

    </li><li class="listitem"><a name="wd_rename_driver_linux_step_kp_cfg_edit_for_renamed_wd"></a>
    
  Verify that your user-mode driver project is built with the
  <code class="japi">WD_DRIVER_NAME_CHANGE</code> preprocessor flag
  (<code class="japi">-DWD_DRIVER_NAME_CHANGE</code>).<br>
  Note: The sample and generated DriverWizard WinDriver kernel projects/makefiles
  already set this preprocessor flag by default.

    </li><li class="listitem">
    
  Install your new driver by following the instructions in
  <a class="xref" href="#dist_linux" title="10.3. Linux Driver Distribution"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 10.3</fo:inline></a> of the manual, using the modified files from the generated
  <span class="jdirectory"><strong>xxx_installation</strong></span> directory instead of the
  installation files from the original WinDriver distribution.
  <br>
    As part of the installation, build your new kernel driver module(s) by
  following the instructions in <a class="xref" href="#dist_linux" title="10.3. Linux Driver Distribution"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 10.3</fo:inline></a>, using the
  files from your new installation directory.
    </li></ol></div><p>
</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="driver_sign"></a>11.3. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">Windows Digital Driver Signing and Certification</span></h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="driver_sign_n_cert_overview"></a>11.3.1. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">Overview</span></h3></div></div></div><p>

Before distributing your driver, you may digitally sign it using Microsoft's
Authenticode mechanism, and/or certify it by submitting it to Microsoft's Windows Certification Program 
(HLK/HCK/WLP).<br>


Some Windows operating systems, such as Windows 7, do not require installed
drivers to be digitally signed or certified. Only a popup with a warning will 
appear


There are, however, advantages to getting your driver digitally signed or fully
certified, including the following:

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    Driver installation on systems where installing unsigned drivers has been
    blocked
  </li><li class="listitem" style="list-style-type: disc">
    Avoiding warnings during driver installation
    </li><li class="listitem" style="list-style-type: disc">
    Full pre-installation of INF files<a class="xref" href="#winpnp_inf" title="11.1. Windows INF Files"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [11.1]</fo:inline></a> on
    Windows 7 and higher
  </li></ul></div><p>

</p><p>
64-&#65279;bit versions of Windows 8 and higher require Kernel-Mode Code Signing
(KMCS) of software that loads in kernel mode. This has the following
implications for WinDriver-based drivers:

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    Drivers that are installed via an INF file must be distributed together
    with a signed catalog file (see details in
    <a class="xref" href="#driver_sign_wd_drivers" title="11.3.2. Driver Signing and Certification of WinDriver-Based Drivers"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 11.3.2</fo:inline></a>).
  </li></ul></div><p>
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
During driver development, please configure your Windows OS to temporarily
allow the installation of unsigned drivers.
</td></tr></table></div><p>
For more information about digital driver signing and certification, refer to
the following documentation in the Microsoft Development Network (MSDN) library:

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    <em class="it">Driver Signing Requirements for Windows</em>
    
    </li><li class="listitem" style="list-style-type: disc">
    <em class="it">Introduction to Code Signing</em>
    
    </li><li class="listitem" style="list-style-type: disc">
    <em class="it">Digital Signatures for Kernel Modules on Windows</em><br>
    
    This white paper contains information about kernel-mode code signing, test
    signing, and disabling signature enforcement during development.
    </li><li class="listitem" style="list-style-type: disc">
    <a class="ulink" href="https://msdn.microsoft.com/en-us/windows-drivers/develop/signing_a_driver" target="_top">https://msdn.microsoft.com/en-us/windows-drivers/develop/signing_a_driver</a>
    </li></ul></div><p>

</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"><a name="ms_driver_certif_n_sign_term_note"></a></th></tr><tr><td align="left" valign="top">
Some of the documentation may still use old terminology. For example,
references to the <em class="it">Windows Logo Program (<span class="b"><strong>WLP</strong></span>)</em> or to the <em class="it">Windows Hardware Quality Labs (<span class="b"><strong>WHQL</strong></span>)</em> or
to the <em class="it">Windows Certification Program</em> or to the <em class="it">Windows Hardware Certification Kit (<span class="b"><strong>HCK</strong></span>)</em>
should be replaced with the <em class="it">Windows Hardware Lab Kit (<span class="b"><strong>HLK</strong></span>)</em>, and references to the
<em class="it">Windows Quality Online Services (<span class="b"><strong>Winqual</strong></span>)</em> should be replaced with the
<em class="it">Windows Dev Center Hardware Dashboard Services
                                (the <span class="b"><strong>Hardware Dashboard</strong></span>)</em>.
</td></tr></table></div><p>
</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="authenticode_overview"></a>11.3.1.1. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">Authenticode Driver Signature</span></h4></div></div></div><p>
The Microsoft Authenticode mechanism verifies the authenticity of a driver's
provider. It allows driver developers to include information about themselves
and their code with their programs through the use of digital signatures, and
informs users of the driver that the driver's publisher is participating in an
infrastructure of trusted entities.<br>
The Authenticode signature does not, however, guarantee the code's safety or
functionality.
</p><p>
The <span class="jdirectory"><strong>WinDriver&#65279;\&#65279;redist&#65279;\</strong></span><span class="jprintfilename"><strong>windrvr1281.sys</strong></span> driver has an Authenticode
digital signature.
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="whql_overview"></a>11.3.1.2. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">Windows Certification Program</span></h4></div></div></div><p>
Microsoft's Windows Certification Program (previously known as the Windows Logo Program (WLP)), lays out procedures for
submitting hardware and software modules, including drivers, for Microsoft
quality assurance tests. Passing the tests qualifies the hardware/software for
Microsoft certification, which verifies both the driver provider's authenticity
and the driver's safety and functionality.
</p><p>
To digitally sign and certify a device driver, a Windows Hardware Lab Kit (<span class="b"><strong>HLK</strong></span>) package, which
includes the driver and the related hardware, should be submitted to the
Windows Certification Program for testing, using the Windows Dev Center Hardware Dashboard Services
                                (the <span class="b"><strong>Hardware Dashboard</strong></span>).
</p><div class="info" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/info.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
Jungo's professional services unit provides a complete Windows driver
certification service for Jungo-based drivers. Professional engineers
efficiently perform all the tests required by the Windows Certification Program, relieving customers
of the expense and stress of in-house testing. Jungo prepares an HLK / HCK
submission package containing the test results, and delivers the package to the
customer, ready for submission to Microsoft.<br>
For more information, refer to <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><a class="ulink" href="https://www.jungo.com/st/services/windows_drivers_certification/" target="_top">https://www.jungo.com/st/services/windows_drivers_certification/</a></span>.
</td></tr></table></div><p>
For detailed information regarding Microsoft's Windows Certification Program and the certification process,
refer to the MSDN <em class="it">Windows Hardware Certification</em> page &#8212; <a class="ulink" href="https://msdn.microsoft.com/library/windows/hardware/gg463010.aspx" target="_top">https://msdn.microsoft.com/library/windows/hardware/gg463010.aspx</a> &#8212; and to the documentation referenced from that
page, including the MSDN <em class="it">Windows Dev Center &#8212; Hardware Dashboard Services page</em> page &#8212; <a class="ulink" href="https://msdn.microsoft.com/library/windows/hardware/gg463091" target="_top">https://msdn.microsoft.com/library/windows/hardware/gg463091</a>.
</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="driver_sign_wd_drivers"></a>11.3.2. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">Driver Signing and Certification of WinDriver-Based Drivers</span></h3></div></div></div><p>
As indicated above<a class="xref" href="#authenticode_overview" title="11.3.1.1. Authenticode Driver Signature"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [11.3.1.1]</fo:inline></a>, The
<span class="jdirectory"><strong>WinDriver&#65279;\&#65279;redist&#65279;\</strong></span><span class="jprintfilename"><strong>windrvr1281.sys</strong></span> driver has an embedded 
Authenticode signature. Since WinDriver's kernel module (<span class="jprintfilename"><strong>windrvr1281.sys</strong></span>) is
a generic driver, which can be used as a driver for different types of hardware
devices, it cannot be submitted to Microsoft's Windows Certification Program as a standalone driver. However,
once you have used WinDriver to develop a Windows driver for your selected
hardware, you can submit both the hardware and driver for Microsoft
certification, as explained below.
</p><p>
The driver certification and signature procedures &#8212; either via
Authenticode or the Windows Certification Program &#8212; require the creation of a catalog file
for the driver. This file is a sort of hash, which describes other files. The
signed <span class="jprintfilename"><strong>windrvr1281.sys</strong></span> driver is provided with a matching catalog file
&#8212;
<span class="jdirectory"><strong>WinDriver&#65279;\&#65279;redist&#65279;\</strong></span><span class="jprintfilename"><strong>windrvr1281.cat</strong></span>.
This file is assigned to the <code class="japi">CatalogFile</code> entry in the
<span class="jprintfilename"><strong>windrvr1281.inf</strong></span> file (provided as well in the <span class="jdirectory"><strong>redist</strong></span> directory). This
entry is used to inform Windows of the driver's signature and the relevant
catalog file during the driver's installation.
</p><p>
When the name, contents, or even the date of the files described in a driver's
catalog file is modified, the catalog file, and consequently the driver
signature associated with it, become invalid. Therefore, if you select to
rename the <span class="jprintfilename"><strong>windrvr1281.sys</strong></span> driver<a class="xref" href="#wd_rename_driver" title="11.2. Renaming the WinDriver Kernel Driver"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [11.2]</fo:inline></a> and/or the
related <span class="jprintfilename"><strong>windrvr1281.inf</strong></span> file, the <span class="jprintfilename"><strong>windrvr1281.cat</strong></span> catalog file and the related
driver signature will become invalid.
</p><p>
In addition, when using WinDriver to develop a driver for your Plug&#65279;-&#65279;and&#65279;-&#65279;Play device, you
normally also create a device-specific INF file that registers your device to
work with the <span class="jprintfilename"><strong>windrvr1281.sys</strong></span> driver module (or a renamed version of this
driver). Since this INF file is created at your site, for your specific
hardware, it is not referenced from the <span class="jprintfilename"><strong>windrvr1281.cat</strong></span> catalog file and cannot
be signed by Jungo a priori.
</p><p>
When renaming <span class="jprintfilename"><strong>windrvr1281.sys</strong></span> and/or creating a device-specific INF file
for your device, you have two alternative options regarding your driver's
digital signing:

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    Do not digitally sign your driver. If you select this option, remove or
    comment-out the reference to the <span class="jprintfilename"><strong>windrvr1281.cat</strong></span> file from the
    <span class="jprintfilename"><strong>windrvr1281.inf</strong></span> file (or your renamed version of this file).
    </li><li class="listitem" style="list-style-type: disc"><p>
    Submit your driver to the Windows Certification Program, or have it Authenticode signed.<br>
    Note that while renaming <span class="jdirectory"><strong>WinDriver&#65279;\&#65279;redist&#65279;\</strong></span><span class="jprintfilename"><strong>windrvr1281.sys</strong></span>
    nullifies the driver's digital signature, the driver is still compliant
    with the certification requirements of the Windows Certification Program.
    </p><p>
    
    To digitally sign/certify your driver, follow these steps:

    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
        Create a new catalog file for your driver, as explained in the Windows Certification Program
        documentation. The new file should reference both <span class="jprintfilename"><strong>windrvr1281.sys</strong></span>
        (or your renamed driver) and any INF files used in your driver's
        installation.
        </li><li class="listitem">
        Assign the name of your new catalog file to the
        <code class="japi">CatalogFile</code> entry in your driver's INF file(s). (You can
        either change the <code class="japi">CatalogFile</code> entry in the <span class="jprintfilename"><strong>windrvr1281.inf</strong></span>
        file to refer to your new catalog file, and add a similar entry in your
        device-specific INF file; or incorporate both <span class="jprintfilename"><strong>windrvr1281.inf</strong></span> and your
        device INF file into a single INF file that contains such a
        <code class="japi">CatalogFile</code> entry).
        </li><li class="listitem"><p>
        Submit your driver to Microsoft's Windows Certification Program or for an Authenticode signature.
        If you wish to submit your driver to the Windows Certification Program, refer to the
        additional guidelines in <a class="xref" href="#hck_test_notes" title="11.3.2.1. HCK Test Notes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 11.3.2.1</fo:inline></a>.
        </p><p>
        Note that many WinDriver customers have already successfully digitally
        signed and certified their WinDriver-based drivers.
        </p></li></ul></div><p>
    </p></li></ul></div><p>
</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="hck_test_notes"></a>11.3.2.1. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">HCK Test Notes</span></h4></div></div></div><p>
As indicated in Microsoft's documentation, before submitting the driver for
testing and certification you need to download the Windows Hardware Certification Kit (<span class="b"><strong>HCK</strong></span>), and run the
relevant tests for your hardware/software. After you have verified that you can
successfully pass the HCK tests, create the required logs package and
proceed according to Microsoft's documentation. For more information, refer to
the MSDN <em class="it">Windows Hardware Certification Kit (HCK)</em> page &#8212; <a class="ulink" href="https://msdn.microsoft.com/library/windows/hardware/hh833788" target="_top">https://msdn.microsoft.com/library/windows/hardware/hh833788</a>.
</p></div></div></div></div><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a name="64bit_os_sup"></a>Appendix A. 64-&#65279;Bit Operating Systems Support</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="64bit_arch_sup"></a>A.1. Supported 64-&#65279;Bit Architectures</h2></div></div></div><p>
WinDriver supports the following 64-&#65279;bit platforms:

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    Linux AMD64 or Intel EM64T (<span class="b"><strong>x86_64</strong></span>).<br>
    For a full list of the Linux platforms supported by WinDriver, refer to
    <a class="xref" href="#sys_req_linux" title="4.1.3. Linux System Requirements"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 4.1.3</fo:inline></a>.
  </li><li class="listitem" style="list-style-type: disc">
    Windows AMD64 or Intel EM64T (<span class="b"><strong>x64</strong></span>).<br>
    For a full list of the Windows platforms supported by WinDriver, refer to
    <a class="xref" href="#sys_req_windows" title="4.1.1. Windows System Requirements"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 4.1.1</fo:inline></a>.
  </li></ul></div><p>
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
The project or makefile for a 64-&#65279;bit driver project must include the
<strong class="japib"><code>KERNEL_64BIT</code></strong> preprocessor definition.
In the makefiles, the definition is
  added using the <code class="japi">-D</code> flag: <code class="japi">-&#65279;DKERNEL_64BIT</code>.<br>
The sample and
  wizard-generated Linux and Windows GCC makefiles and the Windows MS Visual Studio
  projects, in the 64-&#65279;bit WinDriver toolkit, already include this definition.
</td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="32bit_app_on_64bit_arch_win_unix"></a>A.2. Support for 32-&#65279;Bit Applications on 64-&#65279;Bit Windows and Linux
  Platforms</h2></div></div></div><p>
By default, applications created using the 64-&#65279;bit versions of WinDriver are
64-&#65279;bit applications. Such applications are more efficient than 32-&#65279;bit
applications. However, you can also use the 64-&#65279;bit WinDriver versions to create
32-&#65279;bit applications that will run on the supported Windows and Linux
64-&#65279;bit platforms<a class="xref" href="#64bit_arch_sup" title="A.1. Supported 64-&#65279;Bit Architectures"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A.1]</fo:inline></a>.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
In the following documentation, <span class="jdirectory"><strong>&lt;WD64&gt;</strong></span> signifies
the path to a 64-&#65279;bit WinDriver installation directory for your target operating
system, and <span class="jdirectory"><strong>&lt;WD32&gt;</strong></span> signifies the path to a
32-&#65279;bit WinDriver installation directory for the same operating system.
</td></tr></table></div><p>
To create a 32-&#65279;bit application for 64-&#65279;bit Windows or Linux platforms,
using the 64-&#65279;bit version of WinDriver, do the following:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
    Create a WinDriver application, as outlined in this manual (e.g., by
    generating code with DriverWizard, or using one of the WinDriver samples).
  </li><li class="listitem">
    Build the application with an appropriate 32-&#65279;bit compiler for your target
    OS, using the following configuration:

    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
        Add a <strong class="japib"><code>KERNEL_64BIT</code></strong> preprocessor definition to your
        project or makefile.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
        In the makefiles, the definition is
  added using the <code class="japi">-D</code> flag: <code class="japi">-&#65279;DKERNEL_64BIT</code>.
        </td></tr></table></div><p>
        The sample and
  wizard-generated Linux and Windows GCC makefiles and the Windows MS Visual Studio
  projects, in the 64-&#65279;bit WinDriver toolkit, already include this definition.
        </p></li><li class="listitem" style="list-style-type: disc"><p>
        Link the application with the specific version of the
        WinDriver-API library/shared object for 32-&#65279;bit applications executed on
        64-&#65279;bit platforms &#8212;
        <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jprintfilename"><strong>&lt;WD64&gt;\lib\amd64\x86\wdapi1281.lib</strong></span></span>
        on Windows /
        <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jprintfilename"><strong>&lt;WD64&gt;/lib/libwdapi1281_32.so</strong></span></span>
        on Linux.
        </p><p>
        The sample and wizard-generated project and make files for 32-&#65279;bit
        applications in the 64-&#65279;bit WinDriver toolkit already link to the correct
        library:<br>
        On Windows, the MS Visual Studio project files and Windows GCC makefiles are
        defined to link with
        <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jprintfilename"><strong>&lt;WD64&gt;\lib\amd64\x86\wdapi1281.lib</strong></span></span>.
        
        <br>
        On Linux, the installation of the 64-&#65279;bit WinDriver toolkit on the
        development machine creates a
        <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jprintfilename"><strong>libwdapi1281.so</strong></span></span>
        symbolic link in the
        <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jprintfilename"><strong>/usr/lib</strong></span></span>
        directory &#8212; which links to
        <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jprintfilename"><strong>&lt;WD64&gt;/lib/libwdapi1281_32.so</strong></span></span>
        &#8212; and in the
        <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>/usr/lib64</strong></span></span> directory
        &#8212; which links to
        <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jprintfilename"><strong>&lt;WD64&gt;/lib/libwdapi1281.so</strong></span></span>
        (the 64-&#65279;bit version of this shared object).<br>
        The sample and wizard-generated WinDriver makefiles rely on these symbolic
        links to link with the appropriate shared object, depending on whether
        the code is compiled using a 32-&#65279;bit or 64-&#65279;bit compiler.
        
        </p></li></ul></div></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    When distributing your application to target 64-&#65279;bit platforms, you need
    to provide with it the WinDriver-API DLL/shared object for 32-&#65279;bit
    applications executed on 64-&#65279;bit platforms &#8212;
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jprintfilename"><strong>&lt;WD64&gt;\redist\wdapi1281_32.dll</strong></span></span>
    on Windows /
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jprintfilename"><strong>&lt;WD64&gt;/lib/libwdapi1281_32.so</strong></span></span>
    on Linux. Before distributing this file, rename the copy of the file
    in your distribution package by removing the
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jprintfilename"><strong>_32</strong></span></span> portion. The
    installation on the target should copy the renamed DLL/shared object to the
    relevant OS directory &#8212;
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>\%windir%\&#65279;sysWOW64</strong></span></span>
    on Windows or <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>/usr/lib</strong></span></span> on
    Linux. All other distribution files are the same as for any other
    64-&#65279;bit WinDriver driver distribution, as detailed in
    <a class="xref" href="#driver_distribution" title="Chapter 10. Distributing Your Driver"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Chapter 10</fo:inline></a>.
    </li><li class="listitem" style="list-style-type: disc">
    An application created using the method described in this section will
    <em class="it">not</em> work on 32-&#65279;bit platforms. A WinDriver application for 32-&#65279;bit
    platforms needs to be compiled without the <code class="japi">KERNEL_64BIT</code>
    definition; it needs to be linked with the standard 32-&#65279;bit version of the
    WinDriver-API library/shared object from the 32-&#65279;bit WinDriver installation
    (<span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jprintfilename"><strong>&lt;WD32&gt;\lib\x86\wdapi1281.lib</strong></span></span>
    on Windows /
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jprintfilename"><strong>&lt;WD32&gt;/lib/libwdapi1281.so</strong></span></span>
    on Linux); and it should be distributed with the standard 32-&#65279;bit
    WinDriver-API DLL/shared object
    (<span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jprintfilename"><strong>&lt;WD32&gt;\redist\wdapi1281.dll</strong></span></span>
    on Windows /
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jprintfilename"><strong>&lt;WD32&gt;/lib/libwdapi1281.so</strong></span></span>
    on Linux) and any other required 32-&#65279;bit distribution file, as
    outlined in <a class="xref" href="#driver_distribution" title="Chapter 10. Distributing Your Driver"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Chapter 10</fo:inline></a>.
  </li></ul></div></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="64bit_bit_data_types"></a>A.3. 64-&#65279;Bit and 32-&#65279;Bit Data Types</h2></div></div></div>
<p>
In general, DWORD is unsigned long. While any 32-&#65279;bit compiler treats this
type as 32 bits wide, 64-&#65279;bit compilers treat this type differently. With
Windows 64-&#65279;bit compilers the size of this type is still 32 bits. However,
with UNIX 64-&#65279;bit compilers (e.g., GCC) the size of this type is 64 bits. In order to avoid compiler
dependency issues, use the UINT32 and UINT64 cross-platform types when you want
to refer to a 32-&#65279;bit or 64-&#65279;bit address, respectively.
</p>
</div></div><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a name="API_REF"></a>Appendix B. WinDriver USB Host API Reference</h1></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
     This function reference is C oriented. The WinDriver C&#65279;#
     <span xmlns:fo="http://www.w3.org/1999/XSL/Format">and Visual Basic .NET</span>
     APIs have been implemented as closely as possible to the C APIs, therefore
     .NET programmers can also use this reference to better understand the
     WinDriver APIs for their selected development language. For the exact API
     implementation and usage examples for your selected language, refer to the
     WinDriver .NET source code.
   </td></tr></table></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_DriverName"></a>B.1. WD_DriverName</h2></div></div></div>
<h5><a name="idp46069373536624"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Sets the name of the WinDriver kernel module, which will be used by the calling
application.
</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    The default driver name, which is used if the function is not called, is
    <span class="jprintfilename"><strong>windrvr1281</strong></span>.
  </li><li class="listitem" style="list-style-type: disc">
    This function must be called once, and only once, from the beginning
    of your application, before calling any other WinDriver function
    (including <code class="jfunc">WD_Open</code><span class="jfunc">()</span> / <code class="jfunc">WDU_Init</code><span class="jfunc">()</span>),
    as demonstrated in the sample and generated DriverWizard WinDriver
    applications, which include a call to this function with the default driver
    name &#8212; <span class="jprintfilename"><strong>windrvr1281</strong></span>.
  </li><li class="listitem" style="list-style-type: disc">
    On Windows and Linux, if you select to modify the name of the WinDriver
    kernel module (<span class="jprintfilename"><strong>windrvr1281.sys/.dll/.o/.ko</strong></span>), as explained in
    <a class="xref" href="#wd_rename_driver" title="11.2. Renaming the WinDriver Kernel Driver"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 11.2</fo:inline></a>, you must ensure that your
    application calls <code class="jfunc">WD_DriverName</code><span class="jfunc">()</span> with your new driver name.
  </li><li class="listitem" style="list-style-type: disc">
    In order to use the <code class="jfunc">WD_DriverName</code><span class="jfunc">()</span> function, your user-mode
    driver project must be built with <code class="japi">WD_DRIVER_NAME_CHANGE</code>
    preprocessor flag (e.g.: <code class="japi">-DWD_DRIVER_NAME_CHANGE</code> &#8212; for
    MS Visual Studio, Windows GCC, and GCC).<br>
    The sample and generated DriverWizard Windows and Linux WinDriver
    projects/makefiles already set this preprocessor flag.
  </li></ul></div>
<h5><a name="idp46069373546064"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">const char* DLLCALLCONV WD_DriverName(const char* sName);</pre>

<h5><a name="idp46069373547776"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">sName</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">const char*</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069373556352"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">sName</td><td style="" align="left" valign="top">
    The name of the WinDriver kernel module to be used by the application.<br>
    NOTE: The driver name should be indicated without the driver file's
    extension. For example, use <span class="jprintfilename"><strong>windrvr1281</strong></span>, not
    <span class="jprintfilename"><strong>windrvr1281.sys</strong></span> or
    <span class="jprintfilename"><strong>windrvr1281.o</strong></span>.
  </td></tr></tbody></table></div>

<h5><a name="idp46069373564704"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
<p>
Returns the selected driver name on success; returns NULL on failure (e.g., if
the function is called twice from the same application)long.
</p>

<h5><a name="idp46069373566496"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<p>
The ability to rename the WinDriver kernel module is supported on
Windows and Linux, as explained in
<a class="xref" href="#wd_rename_driver" title="11.2. Renaming the WinDriver Kernel Driver"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 11.2</fo:inline></a>.
</p>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WDU_Overview"></a>B.2. WinDriver USB (WDU) Library Overview</h2></div></div></div><p>
This section provides a general overview of WinDriver's USB Library (WDU),
including

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    An outline of the <code class="japi">WDU_xxx</code> API calling sequence &#8212; see
    <a class="xref" href="#Calling_Sequence_USB" title="B.2.1. Calling Sequence for WinDriver USB"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section B.2.1</fo:inline></a>.
  </li><li class="listitem" style="list-style-type: disc">
    Instructions for upgrading code developed with the previous WinDriver USB API,
    used in version 5.22 and earlier, to use the improved <code class="japi">WDU_xxx</code>
    API &#8212; see <a class="xref" href="#WDU_API_Upgrade" title="B.2.2. Upgrading from the WD_xxx USB API to the WDU_xxx API"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section B.2.2</fo:inline></a>.<br>
    If you do not need to upgrade USB driver code developed with an older
    version of WinDriver, simply skip this section.
  </li></ul></div><p>
</p><p>
The WDU library's interface is found in the
<span class="jdirectory"><strong>WinDriver/include/wdu_lib.h</strong></span> and
<span class="jdirectory"><strong>WinDriver/include/windrvr.h</strong></span> header files, which should be
included from any source file that calls the WDU API.
(<span class="jprintfilename"><strong>wdu_lib.h</strong></span> already includes
<span class="jprintfilename"><strong>windrvr.h</strong></span>).
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="Calling_Sequence_USB"></a>B.2.1. Calling Sequence for WinDriver USB</h3></div></div></div><p>
The WinDriver <code class="japi">WDU_xxx</code> USB API is designed to support event-driven
transfers between your user-mode USB application and USB devices.
This is in contrast to earlier versions, in which USB devices were initialized
and controlled using a specific sequence of function calls.
</p><p>
You can implement the three user callback functions specified in the next
section: <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WDU_ATTACH_CALLBACK</code></span><a class="xref" href="#WDU_ATTACH_CALLBACK" title="B.3.1. WDU_ATTACH_CALLBACK"><fo:inline> [B.3.1]</fo:inline></a></span>, <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WDU_DETACH_CALLBACK</code></span><a class="xref" href="#WDU_DETACH_CALLBACK" title="B.3.2. WDU_DETACH_CALLBACK"><fo:inline> [B.3.2]</fo:inline></a></span> and
<code class="japi">WDU_POWER_CHANGE_CALLBACK</code>
<a class="xref" href="#WDU_POWER_CHANGE_CALLBACK" title="B.3.3. WDU_POWER_CHANGE_CALLBACK"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">[B.3.3]</fo:inline></a> (at the very least
<code class="japi">WDU_ATTACH_CALLBACK</code>). These functions are used to notify your
application when a relevant system event occurs, such as the attaching or
detaching of a USB device. For best performance, minimal processing should be
done in these functions.
</p><p>
Your application calls <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WDU_Init</code><span class="japi">()</span></span><a class="xref" href="#WDU_Init" title="B.4.1. WDU_Init"><fo:inline> [B.4.1]</fo:inline></a></span> and provides the criteria
according to which the system identifies a device as relevant or irrelevant.
The <code class="jfunc">WDU_Init</code><span class="jfunc">()</span> function must also pass pointers to the user
callback functions.
</p><p>
Your application then simply waits to receive a notification of an event.
Upon receipt of such a notification, processing continues. Your application
may make use of any functions defined in the high- or low&#65279;-&#65279;level APIs below.
The high&#65279;-&#65279;level functions, provided for your convenience, make use of
the low&#65279;-&#65279;level functions, which in turn use IOCTLs to enable communication
between the WinDriver kernel module and your user-mode application.
</p><p>
When exiting, your application calls <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WDU_Uninit</code><span class="japi">()</span></span><a class="xref" href="#WDU_Uninit" title="B.4.7. WDU_Uninit"><fo:inline> [B.4.7]</fo:inline></a></span> to stop listening
to devices matching the given criteria and to unregister the notification
callbacks for these devices.
</p><p>
The following figure depicts the calling sequence described above. Each
vertical line represents a function or process. Each horizontal arrow
represents a signal or request, drawn from the initiator to the recipient.
Time progresses from top to bottom.
</p><div class="figure"><a name="wd_usb_calling_sequence"></a><p class="title"><b>Figure B.1. WinDriver USB Calling Sequence</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/wd_usb_calling_sequence.png" height="" alt="WinDriver USB Calling Sequence"></div></div></div><br class="figure-break"><p>
The following piece of meta-code can serve as a framework for your user-mode
application's code:
</p><pre class="screen">attach()
{
    ...
    if this is my device
        /*
        Set the desired alternate setting ;
        Signal main() about the attachment of this device
        */

        return TRUE;
    else
        return FALSE;
}

detach()
{
    ...
    signal main() about the detachment of this device
    ...
}

main()
{
    WDU_Init(...);

    ...
    while (...)
    {
        /* wait for new devices */

        ...

        /* issue transfers */

        ...
    }
    ...
    WDU_Uninit();
}
</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WDU_API_Upgrade"></a>B.2.2. Upgrading from the WD_xxx USB API to the WDU_xxx API</h3></div></div></div><p>
The WinDriver <code class="japi">WDU_xxx</code> USB API, provided beginning with version 6.00,
is designed to support event-driven transfers between your user-mode USB
application and USB devices. This is in contrast to earlier versions, in which
USB devices were initialized and controlled using a specific sequence of
function calls.
</p><p>
As a result of this change, you will need to modify your USB applications that
were designed to interface with earlier versions of WinDriver to ensure that
they will work with WinDriver v6.X on all supported platforms and not only on
Microsoft Windows.<br>
You will have to reorganize your application's code so that it conforms with
the framework illustrated by the piece of meta-code provided in
<a class="xref" href="#Calling_Sequence_USB" title="B.2.1. Calling Sequence for WinDriver USB"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section B.2.1</fo:inline></a>.
</p><p>
In addition, the functions that collectively define the USB API have been
changed. The new functions, described in the next few sections, provide an
improved interface between user-mode USB applications and the WinDriver kernel
module. Note that the new functions receive their parameters directly, unlike
the old functions, which received their parameters using a structure.
</p><p>
The table below lists the legacy functions in the left column and indicates in
the right column which function or functions replace(s) each of the legacy
functions. Use this table to quickly determine which new functions to use in
your new code.
</p><div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Problem</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Solution</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" align="left"><td style="border-bottom: 0.5pt solid ; " colspan="2" align="left" valign="top"><span class="b"><strong>High Level API</strong></span></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><em class="it">Previous Function</em></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><em class="it">New Function</em></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">
   <code class="jfunc">WD_Open</code><span class="jfunc">()</span><br>
   <code class="jfunc">WD_Version</code><span class="jfunc">()</span><br>
   <code class="jfunc">WD_UsbScanDevice</code><span class="jfunc">()</span>
  </td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span style=""><span style=""><code class="japi">WDU_Init</code><span class="japi">()</span></span><a class="xref" href="#WDU_Init" title="B.4.1. WDU_Init"><fo:inline> [B.4.1]</fo:inline></a></span></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><code class="jfunc">WD_UsbDeviceRegister</code><span class="jfunc">()</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span style=""><span style=""><code class="japi">WDU_SetInterface</code><span class="japi">()</span></span><a class="xref" href="#WDU_SetInterface" title="B.4.2. WDU_SetInterface"><fo:inline> [B.4.2]</fo:inline></a></span></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><code class="jfunc">WD_UsbGetConfiguration</code><span class="jfunc">()</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span style=""><span style=""><code class="japi">WDU_GetDeviceInfo</code><span class="japi">()</span></span><a class="xref" href="#WDU_GetDeviceInfo" title="B.4.5. WDU_GetDeviceInfo"><fo:inline> [B.4.5]</fo:inline></a></span></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><code class="jfunc">WD_UsbDeviceUnregister</code><span class="jfunc">()</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span style=""><span style=""><code class="japi">WDU_Uninit</code><span class="japi">()</span></span><a class="xref" href="#WDU_Uninit" title="B.4.7. WDU_Uninit"><fo:inline> [B.4.7]</fo:inline></a></span></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" align="left"><td style="border-bottom: 0.5pt solid ; " colspan="2" align="left" valign="top"><span class="b"><strong>Low Level API</strong></span></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><em class="it">Previous Function</em></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><em class="it">New Function</em></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><code class="jfunc">WD_UsbTransfer</code><span class="jfunc">()</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
   <span style=""><span style=""><code class="japi">WDU_Transfer</code><span class="japi">()</span></span><a class="xref" href="#WDU_Transfer" title="B.4.8.1. WDU_Transfer"><fo:inline> [B.4.8.1]</fo:inline></a></span> <br>
   <span style=""><span style=""><code class="japi">WDU_TransferDefaultPipe</code><span class="japi">()</span></span><a class="xref" href="#WDU_TransferDefaultPipe" title="B.4.8.3. WDU_TransferDefaultPipe"><fo:inline> [B.4.8.3]</fo:inline></a></span> <br>
   <span style=""><span style=""><code class="japi">WDU_TransferBulk</code><span class="japi">()</span></span><a class="xref" href="#WDU_TransferBulk" title="B.4.8.4. WDU_TransferBulk"><fo:inline> [B.4.8.4]</fo:inline></a></span><br>
   <span style=""><span style=""><code class="japi">WDU_TransferIsoch</code><span class="japi">()</span></span><a class="xref" href="#WDU_TransferIsoch" title="B.4.8.5. WDU_TransferIsoch"><fo:inline> [B.4.8.5]</fo:inline></a></span><br>
   <span style=""><span style=""><code class="japi">WDU_TransferInterrupt</code><span class="japi">()</span></span><a class="xref" href="#WDU_TransferInterrupt" title="B.4.8.6. WDU_TransferInterrupt"><fo:inline> [B.4.8.6]</fo:inline></a></span>
 </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><code class="japi">USB_TRANSFER_HALT</code> option</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span style=""><span style=""><code class="japi">WDU_HaltTransfer</code><span class="japi">()</span></span><a class="xref" href="#WDU_HaltTransfer" title="B.4.8.2. WDU_HaltTransfer"><fo:inline> [B.4.8.2]</fo:inline></a></span></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><code class="jfunc">WD_UsbResetPipe</code><span class="jfunc">()</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span style=""><span style=""><code class="japi">WDU_ResetPipe</code><span class="japi">()</span></span><a class="xref" href="#WDU_ResetPipe" title="B.4.10. WDU_ResetPipe"><fo:inline> [B.4.10]</fo:inline></a></span></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">
   <code class="jfunc">WD_UsbResetDevice</code><span class="jfunc">()</span><br>
   <code class="jfunc">WD_UsbResetDeviceEx</code><span class="jfunc">()</span>
 </td><td style="" align="left" valign="top"><span style=""><span style=""><code class="japi">WDU_ResetDevice</code><span class="japi">()</span></span><a class="xref" href="#WDU_ResetDevice" title="B.4.11. WDU_ResetDevice"><fo:inline> [B.4.11]</fo:inline></a></span></td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="usb_user_cbs"></a>B.3. USB User Callback Functions</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WDU_ATTACH_CALLBACK"></a>B.3.1. WDU_ATTACH_CALLBACK</h3></div></div></div>

<h5><a name="idp46069373661616"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
WinDriver calls this function when a new device, matching the given criteria, is
attached, provided it is not yet controlled by another driver.<br>
This callback is called once for each matching interface.
</p>



<h5><a name="idp46069373663504"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">typedef BOOL (DLLCALLCONV *WDU_ATTACH_CALLBACK)(
    WDU_DEVICE_HANDLE hDevice,
    WDU_DEVICE *pDeviceInfo,
    PVOID pUserData);
</pre>



<h5><a name="idp46069373665280"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_DEVICE_HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pDeviceInfo</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_DEVICE*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pUserData</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">PVOID</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>



<h5><a name="idp46069373676928"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">A unique identifier for the device/interface</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pDeviceInfo</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Pointer to a USB device information structure<a class="xref" href="#WDU_DEVICE" title="B.5.2.3. WDU_DEVICE Structure"><fo:inline> [B.5.2.3]</fo:inline></a>; Valid
    until the end of the function
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pUserData</td><td style="" align="left" valign="top">
    Pointer to user-mode data for the callback, as passed to
    <span style=""><span style=""><code class="japi">WDU_Init</code><span class="japi">()</span></span><a class="xref" href="#WDU_Init" title="B.4.1. WDU_Init"><fo:inline> [B.4.1]</fo:inline></a></span> within the event table parameter
    (<code class="japi">pEventTable-&gt;pUserData</code>)
  </td></tr></tbody></table></div>



<h5><a name="idp46069373689360"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
<p>
If the <code class="japi">WD_ACKNOWLEDGE</code> flag was set in the call to
<span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WDU_Init</code><span class="japi">()</span></span><a class="xref" href="#WDU_Init" title="B.4.1. WDU_Init"><fo:inline> [B.4.1]</fo:inline></a></span> (within the <code class="japi">dwOptions</code> parameter), the
callback function should check if it wants to control the device, and if so
return <code class="japi">TRUE</code> (otherwise &#8212; return <code class="japi">FALSE</code>).<br>
If the <code class="japi">WD_ACKNOWLEDGE</code> flag was not set in the call to
<code class="jfunc">WDU_Init</code><span class="jfunc">()</span>, then the return value of the callback function is
insignificant.
</p>

</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WDU_DETACH_CALLBACK"></a>B.3.2. WDU_DETACH_CALLBACK</h3></div></div></div>

<h5><a name="idp46069373698096"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
WinDriver calls this function when a controlled device has been detached from the
system.
</p>



<h5><a name="idp46069373699600"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">typedef void (DLLCALLCONV *WDU_DETACH_CALLBACK)(
    WDU_DEVICE_HANDLE hDevice,
    PVOID pUserData);
</pre>



<h5><a name="idp46069373701344"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_DEVICE_HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pUserData</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">PVOID</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>



<h5><a name="idp46069373711680"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">A unique identifier for the device/interface</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pUserData</td><td style="" align="left" valign="top">
    Pointer to user-mode data for the callback, as passed to
    <span style=""><span style=""><code class="japi">WDU_Init</code><span class="japi">()</span></span><a class="xref" href="#WDU_Init" title="B.4.1. WDU_Init"><fo:inline> [B.4.1]</fo:inline></a></span> within the event table parameter
    (<code class="japi">pEventTable-&gt;pUserData</code>)
  </td></tr></tbody></table></div>



  
  <h5><a name="idp46069373723104"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  None
  </p>
  
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WDU_POWER_CHANGE_CALLBACK"></a>B.3.3. WDU_POWER_CHANGE_CALLBACK</h3></div></div></div>

<h5><a name="idp46069373726752"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
WinDriver calls this function when a controlled device has changed its power
settings.
</p>



<h5><a name="idp46069373728320"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">typedef BOOL (DLLCALLCONV *WDU_POWER_CHANGE_CALLBACK)(
    WDU_DEVICE_HANDLE hDevice,
    DWORD dwPowerState,
    PVOID pUserData);
</pre>



<h5><a name="idp46069373730192"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwPowerState</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pUserData</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">PVOID</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>



<h5><a name="idp46069373740944"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">A unique identifier for the device/interface</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwPowerState</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Number of the power state selected</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pUserData</td><td style="" align="left" valign="top">
    Pointer to user-mode data for the callback, as passed to
    <span style=""><span style=""><code class="japi">WDU_Init</code><span class="japi">()</span></span><a class="xref" href="#WDU_Init" title="B.4.1. WDU_Init"><fo:inline> [B.4.1]</fo:inline></a></span> within the event table parameter
    (<code class="japi">pEventTable-&gt;pUserData</code>)
  </td></tr></tbody></table></div>



<h5><a name="idp46069373753600"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
<p>
<code class="japi">TRUE/FALSE</code>. Currently there is no significance to the return
value.
</p>



<h5><a name="idp46069373755792"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<p>
This callback is supported only on Windows.

</p>

</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="usb_funcs"></a>B.4. USB Functions</h2></div></div></div><p>
The functions described in this section are declared in the <br>
<span class="jprintfilename"><strong>WinDriver/include/wdu_lib.h</strong></span> header file.
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WDU_Init"></a>B.4.1. WDU_Init</h3></div></div></div>
<h5><a name="idp46069373762976"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Starts listening to devices matching input criteria and registers notification
callbacks for these devices.
</p>

<h5><a name="idp46069373764560"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WDU_Init(
    WDU_DRIVER_HANDLE *phDriver,
    WDU_MATCH_TABLE *pMatchTables,
    DWORD dwNumMatchTables,
    WDU_EVENT_TABLE *pEventTable,
    const char *sLicense,
    DWORD dwOptions);
</pre>

<h5><a name="idp46069373766496"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">phDriver</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_DRIVER_HANDLE *</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pMatchTables</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_MATCH_TABLE*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwNumMatchTables</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pEventTable</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_EVENT_TABLE*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">sLicense</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">const char*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">dwOptions</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069373783776"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">phDriver</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to the registration of events &amp; criteria</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pMatchTables</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Array of match tables<a class="xref" href="#WDU_MATCH_TABLE" title="B.5.2.1. WDU_MATCH_TABLE Structure"><fo:inline> [B.5.2.1]</fo:inline></a> defining the devices'
    criteria
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwNumMatchTables</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Number of elements in pMatchTables</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pEventTable</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Pointer to an event table structure<a class="xref" href="#WDU_EVENT_TABLE" title="B.5.2.2. WDU_EVENT_TABLE Structure"><fo:inline> [B.5.2.2]</fo:inline></a>, which holds
    the addresses of the user-mode device status change notification callback
    functions<a class="xref" href="#usb_user_cbs" title="B.3. USB User Callback Functions"><fo:inline> [B.3]</fo:inline></a> and the data to pass to the callbacks
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">sLicense</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">WinDriver's license string</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">dwOptions</td><td style="" align="left" valign="top">
    Can be zero or : <br>
    &#8226; <strong class="japib"><code>WD_ACKNOWLEDGE</code></strong> &#8212; the user can seize
      control over the device when returning value in
      <span style=""><span style=""><code class="japi">WDU_ATTACH_CALLBACK</code></span><a class="xref" href="#WDU_ATTACH_CALLBACK" title="B.3.1. WDU_ATTACH_CALLBACK"><fo:inline> [B.3.1]</fo:inline></a></span>
  </td></tr></tbody></table></div>

  <h5><a name="idp46069373802848"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  </div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WDU_SetInterface"></a>B.4.2. WDU_SetInterface</h3></div></div></div>
<h5><a name="idp46069373807168"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Sets the alternate setting for the specified interface.
</p>

<h5><a name="idp46069373808704"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WDU_SetInterface(
    WDU_DEVICE_HANDLE hDevice,
    DWORD dwInterfaceNum,
    DWORD dwAlternateSetting);
</pre>

<h5><a name="idp46069373810560"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_DEVICE_HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwInterfaceNum</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">dwAlternateSetting</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069373822944"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">A unique identifier for the device/interface</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwInterfaceNum</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The interface's number</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">dwAlternateSetting</td><td style="" align="left" valign="top">The desired alternate setting value</td></tr></tbody></table></div>

  <h5><a name="idp46069373832480"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  </div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WDU_GetDeviceAddr"></a>B.4.3. WDU_GetDeviceAddr</h3></div></div></div>
<h5><a name="idp46069373836800"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Gets the USB address for a given device.
</p>

<h5><a name="idp46069373838320"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WDU_GetDeviceAddr(
    WDU_DEVICE_HANDLE hDevice,
    ULONG *pAddress);
</pre>

<h5><a name="idp46069373840144"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_DEVICE_HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pAddress</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">ULONG</td><td style="" align="left" valign="top">Output</td></tr></tbody></table></div>

<h5><a name="idp46069373850864"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">A unique identifier for a device/interface</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pAddress</td><td style="" align="left" valign="top">A pointer to the address number returned by the function</td></tr></tbody></table></div>

  <h5><a name="idp46069373859264"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  
<h5><a name="idp46069373861808"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<p>
This function is supported only on Windows and Linux.

</p>
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WDU_GetDeviceRegistryProperty"></a>B.4.4. WDU_GetDeviceRegistryProperty</h3></div></div></div>
<h5><a name="idp46069373865744"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Gets the specified registry property of a given USB device.
</p>

<h5><a name="idp46069373867280"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD DLLCALLCONV WDU_GetDeviceRegistryProperty(
    WDU_DEVICE_HANDLE hDevice,
    PVOID pBuffer,
    PDWORD pdwSize,
    WD_DEVICE_REGISTRY_PROPERTY property);
</pre>

<h5><a name="idp46069373869184"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_DEVICE_HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pBuffer</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">PVOID</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pdwSize</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">PDWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input/Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">property</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">WD_DEVICE_REGISTRY_PROPERTY</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069373883216"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">A unique identifier of the device/interface</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pBuffer</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Pointer to a user allocated buffer to be filled with the requested registry
    property. The function will fill the buffer only if the buffer size, as
    indicated in the input value of the <strong class="japib"><code>pdwSize</code></strong> parameter, is
    sufficient &#8212; i.e., &gt;= the property's size, as returned via
    <strong class="japib"><code>pdwSize</code></strong>.<br>
    <strong class="japib"><code>pBuffer</code></strong> can be set to <code class="japi">NULL</code> when using the function only
    to retrieve the size of the registry property (see
    <strong class="japib"><code>pdwSize</code></strong>).
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pdwSize</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    As <span class="underline">input</span>, points to a value
    indicating the size of the user-supplied buffer (<strong class="japib"><code>pBuffer</code></strong>);
    if <strong class="japib"><code>pBuffer</code></strong> is set to <code class="japi">NULL</code>, the input value of this
    parameter is ignored.<br>
    As <span class="underline">output</span>, points to a value
    indicating the required buffer size for storing the registry property.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">property</td><td style="" align="left" valign="top">
    The ID of the registry property to be retrieved &#8212; see the description
    of the <span style=""><span style=""><code class="japi">WD_DEVICE_REGISTRY_PROPERTY</code></span><span> enumeration</span><a class="xref" href="#WD_DEVICE_REGISTRY_PROPERTY" title="B.5.1. WD_DEVICE_REGISTRY_PROPERTY Enumeration"><fo:inline> [B.5.1]</fo:inline></a></span>.<br>
    Note: String registry properties are in WCHAR format.
  </td></tr></tbody></table></div>

  <h5><a name="idp46069373903776"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  
<h5><a name="idp46069373906320"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    When the size of the provided user buffer (<strong class="japib"><code>pBuffer</code></strong> ) &#8212;
    <strong class="japib"><code>*pdwSize</code></strong> (input) &#8212; is not sufficient to hold the
    requested registry property, the function returns
    <code class="japi">WD_INVALID_PARAMETER</code>.
  </li><li class="listitem" style="list-style-type: disc">
    This function is supported only on Windows and Linux. On Linux, only 
    WdDevicePropertyAddress and WdDevicePropertyBusNumber properties are 
    supported.
  </li></ul></div>
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WDU_GetDeviceInfo"></a>B.4.5. WDU_GetDeviceInfo</h3></div></div></div>
<h5><a name="idp46069373912384"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Gets configuration information from a device, including all the device
descriptors.
</p>
<p>
<span class="b"><strong>NOTE:</strong></span> The caller to this function is responsible for calling
<span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WDU_PutDeviceInfo</code><span class="japi">()</span></span><a class="xref" href="#WDU_PutDeviceInfo" title="B.4.6. WDU_PutDeviceInfo"><fo:inline> [B.4.6]</fo:inline></a></span> in order to free the <code class="japi">*ppDeviceInfo</code>
pointer returned by the function.
</p>
<h5><a name="idp46069373918016"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WDU_GetDeviceInfo(
    WDU_DEVICE_HANDLE hDevice,
    WDU_DEVICE **ppDeviceInfo);
</pre>

<h5><a name="idp46069373919856"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_DEVICE_HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">ppDeviceInfo</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">WDU_DEVICE**</td><td style="" align="left" valign="top">Output</td></tr></tbody></table></div>

<h5><a name="idp46069373930608"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">A unique identifier for a device/interface</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">ppDeviceInfo</td><td style="" align="left" valign="top">
    Pointer to pointer to a USB device information structure<a class="xref" href="#WDU_DEVICE" title="B.5.2.3. WDU_DEVICE Structure"><fo:inline> [B.5.2.3]</fo:inline></a>
  </td></tr></tbody></table></div>

  <h5><a name="idp46069373939536"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  </div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WDU_PutDeviceInfo"></a>B.4.6. WDU_PutDeviceInfo</h3></div></div></div>
<h5><a name="idp46069373943856"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Receives a device information pointer, allocated with a previous
<span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WDU_GetDeviceInfo</code><span class="japi">()</span></span><a class="xref" href="#WDU_GetDeviceInfo" title="B.4.5. WDU_GetDeviceInfo"><fo:inline> [B.4.5]</fo:inline></a></span> call, in order to perform the necessary
cleanup.
</p>

<h5><a name="idp46069373947968"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">void WDU_PutDeviceInfo(WDU_DEVICE *pDeviceInfo);</pre>

<h5><a name="idp46069373949760"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pDeviceInfo</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">WDU_DEVICE*</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069373958880"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pDeviceInfo</td><td style="" align="left" valign="top">
    Pointer to a USB device information structure<a class="xref" href="#WDU_DEVICE" title="B.5.2.3. WDU_DEVICE Structure"><fo:inline> [B.5.2.3]</fo:inline></a>, as
    returned by a previous call to <span style=""><span style=""><code class="japi">WDU_GetDeviceInfo</code><span class="japi">()</span></span><a class="xref" href="#WDU_GetDeviceInfo" title="B.4.5. WDU_GetDeviceInfo"><fo:inline> [B.4.5]</fo:inline></a></span>
  </td></tr></tbody></table></div>

  <h5><a name="idp46069373969152"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  None
  </p>
  </div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WDU_Uninit"></a>B.4.7. WDU_Uninit</h3></div></div></div>

<h5><a name="idp46069373972608"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Stops listening to devices matching a given criteria and unregisters the
notification callbacks for these devices.
</p>



<h5><a name="idp46069373974192"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">void WDU_Uninit(WDU_DRIVER_HANDLE hDriver);</pre>



<h5><a name="idp46069373975984"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hDriver</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">WDU_DRIVER_HANDLE</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>



<h5><a name="idp46069373985072"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hDriver</td><td style="" align="left" valign="top">Handle to the registration received from <span style=""><span style=""><code class="japi">WDU_Init</code><span class="japi">()</span></span><a class="xref" href="#WDU_Init" title="B.4.1. WDU_Init"><fo:inline> [B.4.1]</fo:inline></a></span></td></tr></tbody></table></div>



  
  <h5><a name="idp46069373994592"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  None
  </p>
  
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WDU_single_block_trans_funcs"></a>B.4.8. Single-Blocking Transfer Functions</h3></div></div></div><p>
This section describes WinDriver's single-blocking data transfer functions.<br>
For more information, refer to <a class="xref" href="#usb_trans_single_blocking" title="8.3.2. Single-Blocking Transfers"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 8.3.2</fo:inline></a>
of the manual.
</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="WDU_Transfer"></a>B.4.8.1. WDU_Transfer</h4></div></div></div>
<h5><a name="idp46069374001472"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Transfers data to or from a device.
</p>

<h5><a name="idp46069374002976"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WDU_Transfer(
    WDU_DEVICE_HANDLE hDevice,
    DWORD dwPipeNum,
    DWORD fRead,
    DWORD dwOptions,
    PVOID pBuffer,
    DWORD dwBufferSize,
    PDWORD pdwBytesTransferred,
    PBYTE pSetupPacket,
    DWORD dwTimeout);
</pre>

<h5><a name="idp46069374004944"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_DEVICE_HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwPipeNum</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">fRead</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwOptions</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pBuffer</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">PVOID</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwBufferSize</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pdwBytesTransferred</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">PDWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pSetupPacket</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">PBYTE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">dwTimeout</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069374027120"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    A unique identifier for the device/interface received from
    <span style=""><span style=""><code class="japi">WDU_Init</code><span class="japi">()</span></span><a class="xref" href="#WDU_Init" title="B.4.1. WDU_Init"><fo:inline> [B.4.1]</fo:inline></a></span>
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwPipeNum</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The number of the pipe through which the data is transferred</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">fRead</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><code class="japi">TRUE</code> for read, <code class="japi">FALSE</code> for write</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwOptions</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    
  A bit-mask of USB transfer options, which can consist of a combination of any
  of the following flags:<br>
  &#8226; <strong class="japib"><code>USB_ISOCH_NOASAP</code></strong> &#8212; Instructs the lower USB stack
    driver (<span class="jprintfilename"><strong>usbd.sys</strong></span>) to use a preset frame
    number (instead of the next available frame) for an isochronous data
    transfer.<br>
    It is recommended that you use this flag for isochronous write (OUT)
    transfers, and if you notice unused frames during transfers on
    low-&#65279;speed or full-&#65279;speed USB 1.1 devices.<br>
    This flag is available only for Windows.<br>
  &#8226; <strong class="japib"><code>USB_ISOCH_FULL_PACKETS_ONLY</code></strong> &#8212; Prevents transfers
    of less than the packet size on isochronous pipes. <br>
  &#8226; <strong class="japib"><code>USB_BULK_INT_URB_SIZE_OVERRIDE_128K</code></strong> &#8212; Limits the
    size of the USB Request Block (URB) to 128KB.<br>
    This flag is available only for Windows.<br>
    &#8226; <strong class="japib"><code>USB_ISOCH_RESET</code></strong> &#8212; Resets the
      isochronous pipe before the data transfer. It also resets the pipe
      after minor errors, consequently allowing to transfer to continue.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pBuffer</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Address of the data buffer</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwBufferSize</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Number of bytes to transfer. The buffer size is not limited to the device's
    maximum packet size; therefore, you can use larger buffers by setting the
    buffer size to a multiple of the maximum packet size. Use large buffers to
    reduce the number of context switches and thereby improve performance.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pdwBytesTransferred</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Number of bytes actually transferred</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pSetupPacket</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">An 8-byte packet to transfer to control pipes</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">dwTimeout</td><td style="" align="left" valign="top">
    Maximum time, in milliseconds (ms), to complete a transfer.<br>
    A value of zero indicates no timeout (infinite wait).
  </td></tr></tbody></table></div>

  <h5><a name="idp46069374053552"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  
<h5><a name="idp46069374056096"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<p>
The resolution of the timeout (the <strong class="japib"><code>dwTimeout</code></strong> parameter) is
according to the operating system scheduler's time slot. For example, in
Windows the timeout's resolution is 10 milliseconds (ms).
</p>
</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="WDU_HaltTransfer"></a>B.4.8.2. WDU_HaltTransfer</h4></div></div></div>
<h5><a name="idp46069374060192"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Halts the transfer on the specified pipe (only one simultaneous transfer per
pipe is allowed by WinDriver).
</p>

<h5><a name="idp46069374061776"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WDU_HaltTransfer(
    WDU_DEVICE_HANDLE hDevice,
    DWORD dwPipeNum);
</pre>

<h5><a name="idp46069374063600"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_DEVICE_HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">dwPipeNum</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069374074352"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">A unique identifier for the device/interface</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">dwPipeNum</td><td style="" align="left" valign="top">The number of the pipe</td></tr></tbody></table></div>

  <h5><a name="idp46069374082704"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  </div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="WDU_TransferDefaultPipe"></a>B.4.8.3. WDU_TransferDefaultPipe</h4></div></div></div>
<h5><a name="idp46069374086976"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Transfers data to or from a device through the default control pipe (pipe 0).
</p>

<h5><a name="idp46069374088144"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WDU_TransferDefaultPipe(
    WDU_DEVICE_HANDLE hDevice,
    DWORD fRead,
    DWORD dwOptions,
    PVOID pBuffer,
    DWORD dwBufferSize,
    PDWORD pdwBytesTransferred,
    PBYTE pSetupPacket,
    DWORD dwTimeout);
</pre>

<div class="info" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/info.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
  Refer to the <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WDU_Transfer</code><span class="japi">()</span></span><span> parameters documentation</span><a class="xref" href="#WDU_Transfer" title="B.4.8.1. WDU_Transfer"><fo:inline> [B.4.8.1]</fo:inline></a></span>, except for
  <code class="japi">dwPipeNum</code> (N/&#65279;A).
  </td></tr></table></div>


  
  <h5><a name="idp46069374094176"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  
</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="WDU_TransferBulk"></a>B.4.8.4. WDU_TransferBulk</h4></div></div></div>
<h5><a name="idp46069374098640"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Performs bulk data transfer to or from a device.
</p>

<h5><a name="idp46069374099776"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WDU_TransferBulk(
    WDU_DEVICE_HANDLE hDevice,
    DWORD dwPipeNum,
    DWORD fRead,
    DWORD dwOptions,
    PVOID pBuffer,
    DWORD dwBufferSize,
    PDWORD pdwBytesTransferred,
    DWORD dwTimeout);
</pre>

<div class="info" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/info.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
  Refer to the <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WDU_Transfer</code><span class="japi">()</span></span><span> parameters documentation</span><a class="xref" href="#WDU_Transfer" title="B.4.8.1. WDU_Transfer"><fo:inline> [B.4.8.1]</fo:inline></a></span>, except for
  <code class="japi">pSetupPacket</code> (N/&#65279;A).
  </td></tr></table></div>


  
  <h5><a name="idp46069374105792"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  
</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="WDU_TransferIsoch"></a>B.4.8.5. WDU_TransferIsoch</h4></div></div></div>
<h5><a name="idp46069374110240"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Performs isochronous data transfer to or from a device.
</p>

<h5><a name="idp46069374111392"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WDU_TransferIsoch(
    WDU_DEVICE_HANDLE hDevice,
    DWORD dwPipeNum,
    DWORD fRead,
    DWORD dwOptions,
    PVOID pBuffer,
    DWORD dwBufferSize,
    PDWORD pdwBytesTransferred,
    DWORD dwTimeout);
</pre>

<div class="info" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/info.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
  Refer to the <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WDU_Transfer</code><span class="japi">()</span></span><span> parameters documentation</span><a class="xref" href="#WDU_Transfer" title="B.4.8.1. WDU_Transfer"><fo:inline> [B.4.8.1]</fo:inline></a></span>, except for
  <code class="japi">pSetupPacket</code> (N/&#65279;A).
  </td></tr></table></div>


  
  <h5><a name="idp46069374117424"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  
</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="WDU_TransferInterrupt"></a>B.4.8.6. WDU_TransferInterrupt</h4></div></div></div>
<h5><a name="idp46069374121872"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Performs interrupt data transfer to or from a device.
</p>

<h5><a name="idp46069374123008"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WDU_TransferInterrupt(
    WDU_DEVICE_HANDLE hDevice,
    DWORD dwPipeNum,
    DWORD fRead,
    DWORD dwOptions,
    PVOID pBuffer,
    DWORD dwBufferSize,
    PDWORD pdwBytesTransferred,
    DWORD dwTimeout);
</pre>

<div class="info" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/info.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
  Refer to the <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WDU_Transfer</code><span class="japi">()</span></span><span> parameters documentation</span><a class="xref" href="#WDU_Transfer" title="B.4.8.1. WDU_Transfer"><fo:inline> [B.4.8.1]</fo:inline></a></span>, except for
  <code class="japi">pSetupPacket</code> (N/&#65279;A).
  </td></tr></table></div>


  
  <h5><a name="idp46069374129040"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  
</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WDU_streaming_trans_funcs"></a>B.4.9. Streaming Data Transfer Functions</h3></div></div></div><p>
This section describes WinDriver's streaming data transfer functions.<br>
For a detailed explanation regarding stream transfers and their implementation
with Windriver, refer to <a class="xref" href="#usb_trans_streaming" title="8.3.3. Streaming Data Transfers"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 8.3.3</fo:inline></a> of the
manual.

</p><div class="info" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/info.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
The streaming APIs are currently supported on Windows.
</td></tr></table></div><p>
</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="WDU_StreamOpen"></a>B.4.9.1. WDU_StreamOpen</h4></div></div></div>
<h5><a name="idp46069374137888"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Opens a new stream for the specified pipe.<br>
A stream can be associated with any pipe except for the control pipe (pipe 0).
The stream's data transfer direction &#8212; read/write &#8212; is derived from
the direction of its pipe.
</p>

<h5><a name="idp46069374140032"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD DLLCALLCONV WDU_StreamOpen(
    WDU_DEVICE_HANDLE hDevice,
    DWORD dwPipeNum,
    DWORD dwBufferSize,
    DWORD dwRxSize,
    BOOL  fBlocking,
    DWORD dwOptions,
    DWORD dwRxTxTimeout,
    WDU_STREAM_HANDLE *phStream);
</pre>

<h5><a name="idp46069374142000"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_DEVICE_HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwPipeNum</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwBufferSize</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwRxSize</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">fBlocking</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">BOOL</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwOptions</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwRxTxTimeout</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">phStream</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">WDU_STREAM_HANDLE*</td><td style="" align="left" valign="top">Output</td></tr></tbody></table></div>

<h5><a name="idp46069374162544"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">A unique identifier for the device/interface</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwPipeNum</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The number of the pipe for which to open the stream</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwBufferSize</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The size, in bytes, of the stream's data buffer</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwRxSize</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    The size, in bytes, of the data blocks that the stream reads from the
    device. This parameter is relevant only for read streams, and must not
    exceed the value of the <strong class="japib"><code>dwBufferSize</code></strong> parameter.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">fBlocking</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    &#8226; <code class="japi">TRUE</code> for a blocking stream, which performs
      blocked I/&#65279;O; <br>
    &#8226; <code class="japi">FALSE</code> for a non-blocking stream, which performs
      non-blocking I/&#65279;O. <br>
      For additional information, refer to
      <a class="xref" href="#WD_usb_stream_trans" title="8.3.3.1. Performing Streaming with WinDriver"><fo:inline>Section 8.3.3.1</fo:inline></a>.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwOptions</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    
  A bit-mask of USB transfer options, which can consist of a combination of any
  of the following flags:<br>
  &#8226; <strong class="japib"><code>USB_ISOCH_NOASAP</code></strong> &#8212; Instructs the lower USB stack
    driver (<span class="jprintfilename"><strong>usbd.sys</strong></span>) to use a preset frame
    number (instead of the next available frame) for an isochronous data
    transfer.<br>
    It is recommended that you use this flag for isochronous write (OUT)
    transfers, and if you notice unused frames during transfers on
    low-&#65279;speed or full-&#65279;speed USB 1.1 devices.<br>
    This flag is available only for Windows.<br>
  &#8226; <strong class="japib"><code>USB_ISOCH_FULL_PACKETS_ONLY</code></strong> &#8212; Prevents transfers
    of less than the packet size on isochronous pipes. <br>
  &#8226; <strong class="japib"><code>USB_BULK_INT_URB_SIZE_OVERRIDE_128K</code></strong> &#8212; Limits the
    size of the USB Request Block (URB) to 128KB.<br>
    This flag is available only for Windows.<br>
    
    &#8226; <strong class="japib"><code>USB_STREAM_OVERWRITE_BUFFER_WHEN_FULL</code></strong> &#8212;
      When there is not enough free space in a read stream's data buffer to
      complete the transfer, overwrite old data in the buffer. This flag is
      applicable only to read streams. <br>
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwRxTxTimeout</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Maximum time, in milliseconds (ms), for the completion of a data transfer
    between the stream and the device.<br>
    A value of zero indicates no timeout (infinite wait).
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">phStream</td><td style="" align="left" valign="top">
    Pointer to a unique identifier for the stream, to be returned by the
    function and passed to the other <code class="jfunc">WDU_StreamXXX</code><span class="jfunc">()</span> functions
  </td></tr></tbody></table></div>

  <h5><a name="idp46069374189024"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  </div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="WDU_StreamStart"></a>B.4.9.2. WDU_StreamStart</h4></div></div></div>
<h5><a name="idp46069374193280"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Starts a stream, i.e., starts transfers between the stream and the device.<br>
Data will be transferred according to the stream's direction &#8212; read/write.
</p>

<h5><a name="idp46069374195264"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD DLLCALLCONV WDU_StreamStart(
    WDU_STREAM_HANDLE hStream);
</pre>

<h5><a name="idp46069374197072"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hStream</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">WDU_STREAM_HANDLE</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069374206192"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hStream</td><td style="" align="left" valign="top">
      A unique identifier for the stream, as returned by
      <code class="jfunc">WDU_StreamOpen</code><span class="jfunc">()</span>
    </td></tr></tbody></table></div>

  <h5><a name="idp46069374213760"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  </div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="WDU_StreamRead"></a>B.4.9.3. WDU_StreamRead</h4></div></div></div>
<h5><a name="idp46069374218016"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Reads data from a read stream to the application.
</p>

<p>
For a blocking stream (<code class="japi">fBlocking=TRUE</code> &#8212; see
<code class="jfunc">WDU_StreamOpen</code><span class="jfunc">()</span>), the call to this function is blocked until the
specified amount of data (<strong class="japib"><code>bytes</code></strong> ) is read, or until the stream's
attempt to read from the device times out (i.e., the timeout period for
transfers between the stream and the device, as set in the
<code class="japi">dwRxTxTimeout</code> <code class="jfunc">WDU_StreamOpen</code><span class="jfunc">()</span> parameter<a class="xref" href="#WDU_StreamOpen" title="B.4.9.1. WDU_StreamOpen"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.4.9.1]</fo:inline></a>, expires).
</p>

<p>
For a non-blocking stream (<code class="japi">fBlocking=FALSE</code>), the function
transfers to the application as much of the requested data as possible, subject
to the amount of data currently available in the stream's data buffer, and
returns immediately.
</p>

<p>
For both blocking and non-blocking transfers, the function returns the amount
of bytes that were actually read from the stream within the
<strong class="japib"><code>pdwBytesRead</code></strong> parameter.
</p>

<h5><a name="idp46069374224992"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD DLLCALLCONV WDU_StreamRead(
    HANDLE hStream,
    PVOID pBuffer,
    DWORD bytes,
    DWORD *pdwBytesRead);
</pre>

<h5><a name="idp46069374226848"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hStream</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_STREAM_HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pBuffer</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">PVOID</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bytes</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pdwBytesRead</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD*</td><td style="" align="left" valign="top">Output</td></tr></tbody></table></div>

<h5><a name="idp46069374240864"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hStream</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
      A unique identifier for the stream, as returned by
      <code class="jfunc">WDU_StreamOpen</code><span class="jfunc">()</span>
    </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pBuffer</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Pointer to a data buffer to be filled with the data read from the stream
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bytes</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Number of bytes to read from the stream</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pdwBytesRead</td><td style="" align="left" valign="top">
    Pointer to a value indicating the number of bytes actually read from the
    stream
  </td></tr></tbody></table></div>

<h5><a name="idp46069374252240"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
<p>
Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or
<code class="japi">WD_OPERATION_FAILED</code> on failure.<br>
In case of failure, call <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WDU_StreamGetStatus</code><span class="japi">()</span></span><a class="xref" href="#WDU_StreamGetStatus" title="B.4.9.6. WDU_StreamGetStatus"><fo:inline> [B.4.9.6]</fo:inline></a></span> to get the current
stream status.
</p>
</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="WDU_StreamWrite"></a>B.4.9.4. WDU_StreamWrite</h4></div></div></div>
<h5><a name="idp46069374259200"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Writes data from the applciation to a write stream.
</p>

<p>
For a blocking stream (<code class="japi">fBlocking=TRUE</code> &#8212; see
<code class="jfunc">WDU_StreamOpen</code><span class="jfunc">()</span>), the call to this function is blocked until the
entire data is written to the stream, or until the stream's attempt to write to
the device times out (i.e., the timeout period for transfers between the stream
and the device, as set in the <code class="japi">dwRxTxTimeout</code>
<span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WDU_StreamOpen</code><span class="japi">()</span></span><span> parameter</span><a class="xref" href="#WDU_StreamOpen" title="B.4.9.1. WDU_StreamOpen"><fo:inline> [B.4.9.1]</fo:inline></a></span>, expires).
</p>

<p>
For a non-blocking stream (<code class="japi">fBlocking=FALSE</code>), the function writes
as much data as currently possible to the stream's data buffer, and returns
immediately.
</p>

<p>
For both blocking and non-blocking transfers, the function returns the amount
of bytes that were actually written to the stream within the
<strong class="japib"><code>pdwBytesWritten</code></strong> parameter.
</p>

<h5><a name="idp46069374267728"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD DLLCALLCONV WDU_StreamWrite(
    HANDLE hStream,
    const PVOID pBuffer,
    DWORD bytes,
    DWORD *pdwBytesWritten);
</pre>

<h5><a name="idp46069374269600"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hStream</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_STREAM_HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pBuffer</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">const PVOID</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bytes</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pdwBytesWritten</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD*</td><td style="" align="left" valign="top">Output</td></tr></tbody></table></div>

<h5><a name="idp46069374283616"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hStream</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
      A unique identifier for the stream, as returned by
      <code class="jfunc">WDU_StreamOpen</code><span class="jfunc">()</span>
    </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pBuffer</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Pointer to a data buffer containing the data to write to the stream
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bytes</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Number of bytes to write to the stream</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pdwBytesWritten</td><td style="" align="left" valign="top">
    Pointer to a value indicating the number of bytes actually written to the
    stream
  </td></tr></tbody></table></div>

<h5><a name="idp46069374294992"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
<p>
Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or
<code class="japi">WD_OPERATION_FAILED</code> on failure.<br>
In case of failure, call <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WDU_StreamGetStatus</code><span class="japi">()</span></span><a class="xref" href="#WDU_StreamGetStatus" title="B.4.9.6. WDU_StreamGetStatus"><fo:inline> [B.4.9.6]</fo:inline></a></span> to get the current
stream status.
</p>
</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="WDU_StreamFlush"></a>B.4.9.5. WDU_StreamFlush</h4></div></div></div>
<h5><a name="idp46069374301952"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Flushes a write stream, i.e., writes the entire contents of the stream's data
buffer to the device.<br>
The function blocks until the completion of all pending I/&#65279;O on the stream.
</p>
<div class="info" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/info.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
This function can be called for both blocking and non-blocking streams.
</td></tr></table></div>
<h5><a name="idp46069374304432"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD DLLCALLCONV WDU_StreamFlush(
    WDU_STREAM_HANDLE hStream);
</pre>

<h5><a name="idp46069374306240"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hStream</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">WDU_STREAM_HANDLE</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069374315360"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hStream</td><td style="" align="left" valign="top">
      A unique identifier for the stream, as returned by
      <code class="jfunc">WDU_StreamOpen</code><span class="jfunc">()</span>
    </td></tr></tbody></table></div>

  <h5><a name="idp46069374322928"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  </div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="WDU_StreamGetStatus"></a>B.4.9.6. WDU_StreamGetStatus</h4></div></div></div>
<h5><a name="idp46069374327248"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Returns a stream's current status.
</p>

<h5><a name="idp46069374328704"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD DLLCALLCONV WDU_StreamGetStatus(
    WDU_STREAM_HANDLE hStream,
    BOOL *pfIsRunning,
    DWORD *pdwLastError,
    DWORD *pdwBytesInBuffer);
</pre>

<h5><a name="idp46069374330592"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hStream</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_STREAM_HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pfIsRunning</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">BOOL*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pdwLastError</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pdwBytesInBuffer</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD*</td><td style="" align="left" valign="top">Output</td></tr></tbody></table></div>

<h5><a name="idp46069374344608"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hStream</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
      A unique identifier for the stream, as returned by
      <code class="jfunc">WDU_StreamOpen</code><span class="jfunc">()</span>
    </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pfIsRunning</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Pointer to a value indicating the stream's current state: <br>
    &#8226; <code class="japi">TRUE</code> &#8212; the stream is currently running<br>
    &#8226; <code class="japi">FALSE</code> &#8212; the stream is currently stopped
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pdwLastError</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Pointer to the last error associated with the stream.<br>
    Note: Calling the function also resets the stream's last error.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pdwBytesInBuffer</td><td style="" align="left" valign="top">
    Pointer to the current bytes count in the stream's data buffer
  </td></tr></tbody></table></div>

  <h5><a name="idp46069374357904"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  </div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="WDU_StreamStop"></a>B.4.9.7. WDU_StreamStop</h4></div></div></div>
<h5><a name="idp46069374362224"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Stops an active stream, i.e., stops transfers between the stream and the
device.<br>
In the case of a write stream, the function flushes the stream &#8212; i.e.,
writes its contents to the device &#8212; before stopping it.
</p>

<h5><a name="idp46069374364320"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD DLLCALLCONV WDU_StreamStop(WDU_STREAM_HANDLE hStream);</pre>

<h5><a name="idp46069374366128"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hStream</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">WDU_STREAM_HANDLE</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069374375248"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hStream</td><td style="" align="left" valign="top">
      A unique identifier for the stream, as returned by
      <code class="jfunc">WDU_StreamOpen</code><span class="jfunc">()</span>
    </td></tr></tbody></table></div>

  <h5><a name="idp46069374382816"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  </div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="WDU_StreamClose"></a>B.4.9.8. WDU_StreamClose</h4></div></div></div>
<h5><a name="idp46069374387040"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Closes an open stream.<br>
The function stops the stream, including flushing its data to the device (in
the case of a write stream), before closing it.
</p>

<h5><a name="idp46069374388928"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD DLLCALLCONV WDU_StreamClose(WDU_STREAM_HANDLE hStream);</pre>

<h5><a name="idp46069374390736"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hStream</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">WDU_STREAM_HANDLE</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069374399856"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hStream</td><td style="" align="left" valign="top">
      A unique identifier for the stream, as returned by
      <code class="jfunc">WDU_StreamOpen</code><span class="jfunc">()</span>
    </td></tr></tbody></table></div>

  <h5><a name="idp46069374407424"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  </div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WDU_ResetPipe"></a>B.4.10. WDU_ResetPipe</h3></div></div></div>
<h5><a name="idp46069374412192"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Resets a pipe by clearing both the halt condition on the host side of the pipe
and the stall condition on the endpoint. This function is applicable for all
pipes except the control pipe (pipe 0).
</p>

<h5><a name="idp46069374413856"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WDU_ResetPipe(
    WDU_DEVICE_HANDLE hDevice,
    DWORD dwPipeNum);
</pre>

<h5><a name="idp46069374415680"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_DEVICE_HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">dwPipeNum</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069374426432"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">A unique identifier for the device/interface</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">dwPipeNum</td><td style="" align="left" valign="top">The pipe's number</td></tr></tbody></table></div>

  <h5><a name="idp46069374434784"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  
<h5><a name="idp46069374437328"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<p>
This function should be used if a pipe is halted, in order to clear the halt.
</p>
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WDU_ResetDevice"></a>B.4.11. WDU_ResetDevice</h3></div></div></div>
<h5><a name="idp46069374440832"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Resets a device.
</p>

<h5><a name="idp46069374442320"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WDU_ResetDevice(
    WDU_DEVICE_HANDLE hDevice,
    DWORD dwOptions);
</pre>

<h5><a name="idp46069374444144"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_DEVICE_HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">dwOptions</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069374454896"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">A unique identifier for the device/interface.</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">dwOptions</td><td style="" align="left" valign="top">
    Can be either zero or: <br>
    &#8226; <strong class="japib"><code>WD_USB_HARD_RESET</code></strong> &#8212; reset the device even if it
      is not disabled. After using this option it is advised to set the
      interface device using <span style=""><span style=""><code class="japi">WDU_SetInterface</code><span class="japi">()</span></span><a class="xref" href="#WDU_SetInterface" title="B.4.2. WDU_SetInterface"><fo:inline> [B.4.2]</fo:inline></a></span>.<br>
    &#8226; <strong class="japib"><code>WD_USB_CYCLE_PORT</code></strong> &#8212; simulate unplugging and
      replugging of the device, prompting the operating system to re-enumerate
      the device without resetting it.<br>
      This option is supported only on Windows 7 and higher.
  </td></tr></tbody></table></div>

  <h5><a name="idp46069374468064"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  
<h5><a name="idp46069374470608"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><code class="jfunc">WDU_ResetDevice</code><span class="jfunc">()</span> is supported only on Windows.<br>

    The <strong class="japib"><code>WD_USB_CYCLE_PORT</code></strong> option is supported on Windows 7 and higher.
  </li><li class="listitem" style="list-style-type: disc">
    The function issues a request from the Windows USB driver to reset a hub
    port, provided the Windows USB driver supports this feature.

  </li></ul></div>
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WDU_SelectiveSuspend"></a>B.4.12. WDU_SelectiveSuspend</h3></div></div></div>
<h5><a name="idp46069374476272"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Submits a request to suspend a given device (selective suspend), or cancels a
previous suspend request.
</p>

<h5><a name="idp46069374477856"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD DLLCALLCONV WDU_SelectiveSuspend(
    WDU_DEVICE_HANDLE hDevice,
    DWORD dwOptions);
</pre>

<h5><a name="idp46069374479696"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_DEVICE_HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">dwOptions</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069374490448"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">A unique identifier for the device/interface.</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">dwOptions</td><td style="" align="left" valign="top">
    Can be set to either of the following
    <code class="japi">WDU_SELECTIVE_SUSPEND_OPTIONS</code> values: <br>
    &#8226; <strong class="japib"><code>WDU_SELECTIVE_SUSPEND_SUBMIT</code></strong> &#8212; submit a request
      to suspend the device. <br>
    &#8226; <strong class="japib"><code>WDU_SELECTIVE_SUSPEND_CANCEL</code></strong> &#8212; cancel a
      previous request to suspend the device.
  </td></tr></tbody></table></div>

  <h5><a name="idp46069374500944"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
   If the device is busy when a suspend request is
submitted (<strong class="japib"><code>dwOptions</code></strong><code class="japi">=WDU_SELECTIVE_SUSPEND_SUBMIT</code>), the function returns
<code class="japi">WD_OPERATION_FAILED</code>.


<h5><a name="idp46069374504880"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<p>
<code class="jfunc">WDU_SelectiveSuspend</code><span class="jfunc">()</span> is supported on Windows 7 and higher.
</p>
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WDU_Wakeup"></a>B.4.13. WDU_Wakeup</h3></div></div></div>
<h5><a name="idp46069374508816"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Enables/Disables the wakeup feature.
</p>

<h5><a name="idp46069374510272"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WDU_Wakeup(
    WDU_DEVICE_HANDLE hDevice,
    DWORD dwOptions);
</pre>

<h5><a name="idp46069374512080"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_DEVICE_HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">dwOptions</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069374522832"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">A unique identifier for the device/interface</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">dwOptions</td><td style="" align="left" valign="top">
    Can be either: <br>
    &#8226; <strong class="japib"><code>WDU_WAKEUP_ENABLE</code></strong> &#8212; enable wakeup<br>
    OR: <br>
    &#8226; <strong class="japib"><code>WDU_WAKEUP_DISABLE</code></strong> &#8212; disable wakeup
  </td></tr></tbody></table></div>

  <h5><a name="idp46069374532992"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  </div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WDU_GetLangIDs"></a>B.4.14. WDU_GetLangIDs</h3></div></div></div>
<h5><a name="idp46069374537248"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Reads a list of supported language IDs and/or the number of supported language
IDs from a device.
</p>

<h5><a name="idp46069374538432"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD DLLCALLCONV WDU_GetLangIDs(
    WDU_DEVICE_HANDLE hDevice,
    PBYTE pbNumSupportedLangIDs,
    WDU_LANGID *pLangIDs,
    BYTE bNumLangIDs);
</pre>

<h5><a name="idp46069374539936"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_DEVICE_HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pbNumSupportedLangIDs</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">PBYTE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pLangIDs</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_LANGID*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">bNumLangIDs</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">BYTE</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069374553840"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">A unique identifier for the device/interface</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pbNumSupportedLangIDs</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Parameter to receive number of supported language IDs</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pLangIDs</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Array of language IDs. If <strong class="japib"><code>bNumLangIDs</code></strong> is not zero the
    function will fill this array with the supported language IDs for the
    device.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">bNumLangIDs</td><td style="" align="left" valign="top">Number of IDs in the pLangIDs array</td></tr></tbody></table></div>


  
  <h5><a name="idp46069374565376"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  

<h5><a name="idp46069374568048"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    If <strong class="japib"><code>dwNumLangIDs</code></strong> is zero the function will return only the
    number of supported language IDs (in <strong class="japib"><code>pbNumSupportedLangIDs</code></strong>)
    but will not update the language IDs array (<strong class="japib"><code>pLangIDs</code></strong>) with
    the actual IDs. For this usage <strong class="japib"><code>pLangIDs</code></strong> can be
    <code class="japi">NULL</code> (since it is not referenced) but
    <strong class="japib"><code>pbNumSupportedLangIDs</code></strong> must not be <code class="japi">NULL</code>.
  </li><li class="listitem" style="list-style-type: disc"><strong class="japib"><code>pbNumSupportedLangIDs</code></strong> can be <code class="japi">NULL</code> if the user only wants
    to receive the list of supported language IDs and not the number of
    supported IDs.<br>
    In this case <strong class="japib"><code>bNumLangIDs</code></strong> cannot be zero and
    <strong class="japib"><code>pLangIDs</code></strong> cannot be <code class="japi">NULL</code>.
  </li><li class="listitem" style="list-style-type: disc">
    If the device does not support any language IDs the function will return
    success. The caller should therefore check the value of
    <strong class="japib"><code>*pbNumSupportedLangIDs</code></strong> after the function returns.
  </li><li class="listitem" style="list-style-type: disc">
    If the size of the <strong class="japib"><code>pLangIDs</code></strong> array
    (<strong class="japib"><code>bNumLangIDs</code></strong> ) is smaller than the number of IDs supported
    by the device (<strong class="japib"><code>*pbNumSupportedLangIDs</code></strong> ), the function will
    read and return only the first <strong class="japib"><code>bNumLangIDs</code></strong> supported
    language IDs.
  </li></ul></div>
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WDU_GetStringDesc"></a>B.4.15. WDU_GetStringDesc</h3></div></div></div>
<h5><a name="idp46069374581616"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Reads a string descriptor from a device by string index.
</p>

<h5><a name="idp46069374583152"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD DLLCALLCONV WDU_GetStringDesc(
    WDU_DEVICE_HANDLE hDevice,
    BYTE bStrIndex,
    PBYTE pbBuf,
    DWORD dwBufSize,
    WDU_LANGID langID,
    PDWORD pdwDescSize);
</pre>

<h5><a name="idp46069374585072"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_DEVICE_HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bStrIndex</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">BYTE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pbBuf</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">PBYTE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwBufSize</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">langID</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_LANGID</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pdwDescSize</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">PDWORD</td><td style="" align="left" valign="top">Output</td></tr></tbody></table></div>

<h5><a name="idp46069374602352"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hDevice</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">A unique identifier for the device/interface</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bStrIndex</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The index of the string descriptor to read</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pbBuf</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Pointer to a buffer to be filled with the string descriptor</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwBufSize</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The size of the <strong class="japib"><code>pbBuf</code></strong> buffer, in bytes</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">langID</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    The language ID to be used in the <span class="b"><strong>get string descriptor</strong></span> request. If
    this parameter is 0, the request will use the first supported language ID
    returned by the device.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pdwDescSize</td><td style="" align="left" valign="top">
    An optional DWORD pointer to be filled with the size of the string
    descriptor read from the device.<br>
    If <code class="japi">NULL</code>, the size of the string descriptor will not be returned.
  </td></tr></tbody></table></div>

  <h5><a name="idp46069374617504"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  
<h5><a name="idp46069374620048"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<p>
If the size of the <strong class="japib"><code>pbBuf</code></strong> buffer is smaller than the size of the
string descriptor (<strong class="japib"><code>dwBufSize*pdwDescSize</code></strong> ), the returned
descriptor will be truncated to the provided buffer size
(<strong class="japib"><code>dwBufSize</code></strong> ).
</p>
</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="usb_data_types"></a>B.5. USB Data Types</h2></div></div></div><p>
The types described in this section are declared in the
<span class="jprintfilename"><strong>WinDriver/include/windrvr.h</strong></span> header file, unless
otherwise specified in the documentation.
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WD_DEVICE_REGISTRY_PROPERTY"></a>B.5.1. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">WD_DEVICE_REGISTRY_PROPERTY Enumeration</span></h3></div></div></div><p>
Enumeration of device registry property identifiers.<br>
String properties are returned in NULL-terminated WCHAR array format.
</p><div class="info" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/info.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
For more information regarding the properties described in this enumaration,
refer to the description of the Windows
<code class="jfunc">IoGetDeviceProperty</code><span class="jfunc">()</span> function's <code class="japi">DeviceProperty</code>
parameter in the Microsoft Development Network (MSDN) documentation.
</td></tr></table></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Enum Value</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WdDevicePropertyDeviceDescription</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Device description</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WdDevicePropertyHardwareID</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The device's hardware IDs</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WdDevicePropertyCompatibleIDs</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The device's compatible IDs</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WdDevicePropertyBootConfiguration</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    The hardware resources assigned to the device by the firmware, in raw data
    form
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WdDevicePropertyBootConfigurationTranslated</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    The hardware resources assigned to the device by the firmware, in
    translated form
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WdDevicePropertyClassName</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The name of the device's setup class, in text format</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WdDevicePropertyClassGuid</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The GUID for the device's setup class (string format)</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WdDevicePropertyDriverKeyName</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The name of the driver-specific registry key</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WdDevicePropertyManufacturer</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Device manufacturer string</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WdDevicePropertyFriendlyName</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Friendly device name (typically defined by the class installer), which can
    be used to distinguish between two similar devices
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WdDevicePropertyLocationInformation</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Information about the device's Location on the bus (string format).<br>
    The interpertation of this information is bus-specific.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WdDevicePropertyPhysicalDeviceObjectName</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> The name of the Physical Device Object (PDO) for the device</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WdDevicePropertyBusTypeGuid</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The GUID for the bus to which the device is connected</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WdDevicePropertyLegacyBusType</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The bus type (e.g., PCIBus)</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WdDevicePropertyBusNumber</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    The legacy bus number of the bus to which the device is connected
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WdDevicePropertyEnumeratorName</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The name of the device's enumerator (e.g., "PCI" or "root")</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WdDevicePropertyAddress</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    The device's bus address.<br>
    The interpertation of this address is bus-specific.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WdDevicePropertyUINumber</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    A number associated with the device that can be displayed in the user
    interface
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WdDevicePropertyInstallState</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The device's installation state</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">WdDevicePropertyRemovalPolicy</td><td style="" align="left" valign="top">The device's current removal policy (Windows 7 and higher)</td></tr></tbody></table></div>
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sect_usb_structs"></a>B.5.2. USB Structures</h3></div></div></div><p>
The following figure depicts the structure hierarchy used by WinDriver's USB
API. The arrays situated in each level of the hierarchy may contain more
elements than are depicted in the diagram. Arrows are used to represent
pointers. In the interest of clarity, only one structure at each level of the
hierarchy is depicted in full detail (with all of its elements listed and
pointers from it pictured).
</p><div class="figure"><a name="wd_usb_structures"></a><p class="title"><b>Figure B.2. WinDriver USB Structures</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/wd_usb_structures.png" height="" alt="WinDriver USB Structures"></div></div></div><br class="figure-break"><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="WDU_MATCH_TABLE"></a>B.5.2.1. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">WDU_MATCH_TABLE Structure</span></h4></div></div></div>
<p>
USB match table structure.
</p>

<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
(*) For all field members, if value is set to zero &#8212; match all.
</td></tr></table></div>

<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Field</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">wVendorId</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Required USB Vendor ID to detect, as assigned by USB-IF (*)</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">wProductId</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Required USB Product ID to detect, as assigned by the product manufacturer
    (*)
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bDeviceClass</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">BYTE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The device's class code, as assigned by USB-IF (*)</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bDeviceSubClass</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">BYTE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The device's sub-class code, as assigned by USB-IF (*)</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bInterfaceClass</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">BYTE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The interface's class code, as assigned by USB-IF (*)</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bInterfaceSubClass</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">BYTE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The interface's sub-class code, as assigned by USB-IF (*)</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">bInterfaceProtocol</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">BYTE</td><td style="" align="left" valign="top">The interface's protocol code, as assigned by USB-IF (*)</td></tr></tbody></table></div>
</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="WDU_EVENT_TABLE"></a>B.5.2.2. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">WDU_EVENT_TABLE Structure</span></h4></div></div></div>
<p>
USB events table structure.<br>
<span xmlns:fo="http://www.w3.org/1999/XSL/Format">This structure is defined
    in <span class="jprintfilename"><strong>WinDriver/include/wdu_lib.h</strong></span>.</span>
</p>

<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Field</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pfDeviceAttach</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_ATTACH_CALLBACK</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Will be called by WinDriver when a device is attached</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pfDeviceDetach</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_DETACH_CALLBACK</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Will be called by WinDriver when a device is detached</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pfPowerChange</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_POWER_CHANGE_CALLBACK</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Will be called by WinDriver when there is a change in a device's power state
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pUserData</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">PVOID</td><td style="" align="left" valign="top">Pointer to user-mode data to be passed to the callbacks</td></tr></tbody></table></div>
</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="WDU_DEVICE"></a>B.5.2.3. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">WDU_DEVICE Structure</span></h4></div></div></div>
<p>
USB device information structure.
</p>

<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Field</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">Descriptor</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_DEVICE_DESCRIPTOR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Device descriptor information structure<a class="xref" href="#WDU_DEVICE_DESCRIPTOR" title="B.5.2.7. WDU_DEVICE_DESCRIPTOR Structure"><fo:inline> [B.5.2.7]</fo:inline></a>
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">Pipe0</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_PIPE_INFO</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Pipe information structure<a class="xref" href="#WDU_PIPE_INFO" title="B.5.2.11. WDU_PIPE_INFO Structure"><fo:inline> [B.5.2.11]</fo:inline></a> for the device's
    default control pipe (pipe 0)
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pConfigs</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_CONFIGURATION*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Pointer to the beginning of an array of configuration information
    structures<a class="xref" href="#WDU_CONFIGURATION" title="B.5.2.4. WDU_CONFIGURATION Structure"><fo:inline> [B.5.2.4]</fo:inline></a> describing the device's
    configurations
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pActiveConfig</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_CONFIGURATION*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Pointer to the device's active configuration information structure<a class="xref" href="#WDU_CONFIGURATION" title="B.5.2.4. WDU_CONFIGURATION Structure"><fo:inline> [B.5.2.4]</fo:inline></a>, stored in the <strong class="japib"><code>pConfigs</code></strong> array
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pActiveInterface</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">
    WDU_INTERFACE*<br>
    [WD_USB_MAX_INTERFACES]
  </td><td style="" align="left" valign="top">
    Array of pointers to interface information structures<a class="xref" href="#WDU_INTERFACE" title="B.5.2.5. WDU_INTERFACE Structure"><fo:inline> [B.5.2.5]</fo:inline></a>; the non-NULL elements in the array represent the
    device's active interfaces.<br>
      
    On <span class="b"><strong>Windows</strong></span>, the number of active interfaces is the number of
    interfaces supported by the active configuration, as stored in the
    <strong class="japib"><code>pActiveConfig-&gt;dwNumInterfaces</code></strong> field.<br>
      
    On <span class="b"><strong>Linux</strong></span>, the number of active interfaces is
    currently always 1, because the
    <span style=""><span style=""><code class="japi">WDU_ATTACH_CALLBACK</code></span><span> device&#65279;-&#65279;attach callback</span><a class="xref" href="#WDU_ATTACH_CALLBACK" title="B.3.1. WDU_ATTACH_CALLBACK"><fo:inline> [B.3.1]</fo:inline></a></span>
    is called for each device interface.
    
  </td></tr></tbody></table></div>
</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="WDU_CONFIGURATION"></a>B.5.2.4. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">WDU_CONFIGURATION Structure</span></h4></div></div></div>
<p>
Configuration information structure.
</p>

<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Field</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">Descriptor</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_CONFIGURATION_DESCRIPTOR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Configuration descriptor information structure<a class="xref" href="#WDU_CONFIGURATION_DESCRIPTOR" title="B.5.2.8. WDU_CONFIGURATION_DESCRIPTOR Structure"><fo:inline> [B.5.2.8]</fo:inline></a>
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwNumInterfaces</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Number of interfaces supported by this configuration</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pInterfaces</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">WDU_INTERFACE*</td><td style="" align="left" valign="top">
    Pointer to the beginning of an array of interface information
    structures<a class="xref" href="#WDU_INTERFACE" title="B.5.2.5. WDU_INTERFACE Structure"><fo:inline> [B.5.2.5]</fo:inline></a> for the configuration's interfaces
  </td></tr></tbody></table></div>
</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="WDU_INTERFACE"></a>B.5.2.5. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">WDU_INTERFACE Structure</span></h4></div></div></div>
<p>
Interface information structure.
</p>

<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Field</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pAlternateSettings</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_ALTERNATE_SETTING*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Pointer to the beginning of an array of alternate setting information
    structures<a class="xref" href="#WDU_ALTERNATE_SETTING" title="B.5.2.6. WDU_ALTERNATE_SETTING Structure"><fo:inline> [B.5.2.6]</fo:inline></a> for the interface's alternate
    settings
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwNumAltSettings</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Number of alternate settings supported by this interface</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pActiveAltSetting</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">WDU_ALTERNATE_SETTING*</td><td style="" align="left" valign="top">
    Pointer to an alternate setting information structure<a class="xref" href="#WDU_ALTERNATE_SETTING" title="B.5.2.6. WDU_ALTERNATE_SETTING Structure"><fo:inline> [B.5.2.6]</fo:inline></a> for the interface's active alternate setting
  </td></tr></tbody></table></div>
</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="WDU_ALTERNATE_SETTING"></a>B.5.2.6. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">WDU_ALTERNATE_SETTING Structure</span></h4></div></div></div>
<p>
Alternate setting information structure.
</p>

<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Field</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">Descriptor</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_INTERFACE_DESCRIPTOR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Interface descriptor information structure<a class="xref" href="#WDU_INTERFACE_DESCRIPTOR" title="B.5.2.9. WDU_INTERFACE_DESCRIPTOR Structure"><fo:inline> [B.5.2.9]</fo:inline></a>
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pEndpointDescriptors</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_ENDPOINT_DESCRIPTOR*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Pointer to the beginning of an array of endpoint descriptor information
    structures<a class="xref" href="#WDU_ENDPOINT_DESCRIPTOR" title="B.5.2.10. WDU_ENDPOINT_DESCRIPTOR Structure"><fo:inline> [B.5.2.10]</fo:inline></a> for the alternate setting's
    endpoints
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pPipes</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">WDU_PIPE_INFO*</td><td style="" align="left" valign="top">
    Pointer to the beginning of an array of pipe information structures<a class="xref" href="#WDU_PIPE_INFO" title="B.5.2.11. WDU_PIPE_INFO Structure"><fo:inline> [B.5.2.11]</fo:inline></a> for the alternate setting's pipes
  </td></tr></tbody></table></div>
</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="WDU_DEVICE_DESCRIPTOR"></a>B.5.2.7. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">WDU_DEVICE_DESCRIPTOR Structure</span></h4></div></div></div>
<p>
USB device descriptor information structure.
</p>

<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Field</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bLength</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Size, in bytes, of the descriptor (18 bytes)</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bDescriptorType</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Device descriptor (0x01)</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bcdUSB</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">USHORT</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Number of the USB specification with which the device complies</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bDeviceClass</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The device's class</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bDeviceSubClass</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The device's sub-class</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bDeviceProtocol</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The device's protocol</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bMaxPacketSize0</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Maximum size of transferred packets</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">idVendor</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">USHORT</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Vendor ID, as assigned by USB-IF</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">idProduct</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">USHORT</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Product ID, as assigned by the product manufacturer</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bcdDevice</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">USHORT</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Device release number</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">iManufacturer</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Index of manufacturer string descriptor</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">iProduct</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Index of product string descriptor</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">iSerialNumber</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Index of serial number string descriptor</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">bNumConfigurations</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="" align="left" valign="top">Number of possible configurations</td></tr></tbody></table></div>
</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="WDU_CONFIGURATION_DESCRIPTOR"></a>B.5.2.8. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">WDU_CONFIGURATION_DESCRIPTOR Structure</span></h4></div></div></div>
<p>
USB configuration descriptor information structure.
</p>

<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Field</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bLength</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Size, in bytes, of the descriptor</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bDescriptorType</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Configuration descriptor (0x02)</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">wTotalLength</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">USHORT</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Total length, in bytes, of data returned</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bNumInterfaces</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Number of interfaces</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bConfigurationValue</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Configuration number</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">iConfiguration</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Index of string descriptor that describes this configuration</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bmAttributes</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Power settings for this configuration: <br>
    &#8226; <code class="japi">D6</code> &#8212; self-powered<br>
    &#8226; <code class="japi">D5</code> &#8212; remote wakeup (allows device to wake up the
      host)
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">MaxPower</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="" align="left" valign="top">
    Maximum power consumption for this configuration, in 2<code class="japi">mA</code> units
  </td></tr></tbody></table></div>
</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="WDU_INTERFACE_DESCRIPTOR"></a>B.5.2.9. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">WDU_INTERFACE_DESCRIPTOR Structure</span></h4></div></div></div>
<p>
USB interface descriptor information structure.
</p>

<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Field</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bLength</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Size, in bytes, of the descriptor (9 bytes)</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bDescriptorType</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Interface descriptor (0x04)</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bInterfaceNumber</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Interface number</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bAlternateSetting</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Alternate setting number</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bNumEndpoints</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Number of endpoints used by this interface</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bInterfaceClass</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The interface's class code, as assigned by USB-IF</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bInterfaceSubClass</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The interface's sub-class code, as assigned by USB-IF</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bInterfaceProtocol</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The interface's protocol code, as assigned by USB-IF</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">iInterface</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="" align="left" valign="top">Index of string descriptor that describes this interface</td></tr></tbody></table></div>
</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="WDU_ENDPOINT_DESCRIPTOR"></a>B.5.2.10. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">WDU_ENDPOINT_DESCRIPTOR Structure</span></h4></div></div></div>
<p>
USB endpoint descriptor information structure.
</p>

<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Field</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bLength</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Size, in bytes, of the descriptor (7 bytes)</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bDescriptorType</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Endpoint descriptor (0x05)</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bEndpointAddress</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Endpoint address: Use bits 0&#8211;3 for endpoint number, set
    bits 4&#8211;6 to zero (0), and set bit 7 to zero (0) for
    outbound data and to one (1) for inbound data (ignored for control
    endpoints).
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">bmAttributes</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Specifies the transfer type for this endpoint (control, interrupt,
    isochronous or bulk). See the USB specification for further information.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">wMaxPacketSize</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">USHORT</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Maximum size of packets this endpoint can send or receive</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">bInterval</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">UCHAR</td><td style="" align="left" valign="top">
    Interval, in frame counts, for polling endpoint data transfers.<br>
    Ignored for bulk and control endpoints.<br>
    Must equal 1 for isochronous endpoints.<br>
    May range from 1 to 255 for interrupt endpoints.
  </td></tr></tbody></table></div>
</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="WDU_PIPE_INFO"></a>B.5.2.11. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">WDU_PIPE_INFO Structure</span></h4></div></div></div>
<p>
USB pipe information structure.
</p>

<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Field</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwNumber</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Pipe number; zero for the default control pipe</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwMaximumPacketSize</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Maximum size of packets that can be transferred using this pipe</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">type</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Transfer type for this pipe</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">direction</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Direction of the transfer: <br>
    &#8226; <strong class="japib"><code>WDU_DIR_IN</code></strong> or <strong class="japib"><code>WDU_DIR_OUT</code></strong> for
      isochronous, bulk or interrupt pipes. <br>
    &#8226; <strong class="japib"><code>WDU_DIR_IN_OUT</code></strong> for control pipes.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">dwInterval</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">
    Interval in milliseconds. <br>
    Relevant only to interrupt pipes.
  </td></tr></tbody></table></div>
</div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="wd_gen_funcs"></a>B.6. General WD_xxx Functions</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="Calling_Sequence_WD_General"></a>B.6.1. Calling Sequence WinDriver &#8212; General Use</h3></div></div></div><p>
The following is a typical calling sequence for the WinDriver API.
<span xmlns:fo="http://www.w3.org/1999/XSL/Format">
<div class="figure"><a name="wd_general_calling_sequence_usb"></a><p class="title"><b>Figure B.3. WinDriver-API Calling Sequence</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/wd_general_calling_sequence_usb.png" height="" alt="WinDriver-API Calling Sequence"></div></div></div><br class="figure-break">
</span>

</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    We recommend calling the WinDriver function <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_Version</code><span class="japi">()</span></span><a class="xref" href="#WD_Version" title="B.6.3. WD_Version()"><fo:inline> [B.6.3]</fo:inline></a></span> after
    calling <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_Open</code><span class="japi">()</span></span><a class="xref" href="#WD_Open" title="B.6.2. WD_Open()"><fo:inline> [B.6.2]</fo:inline></a></span> and before calling any other WinDriver function.
    Its purpose is to return the WinDriver kernel module version number, thus
    providing the means to verify that your application is version compatible
    with the WinDriver kernel module.
  </li><li class="listitem" style="list-style-type: disc"><span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_DebugAdd</code><span class="japi">()</span></span><a class="xref" href="#WD_DebugAdd" title="B.6.6. WD_DebugAdd()"><fo:inline> [B.6.6]</fo:inline></a></span> and <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_Sleep</code><span class="japi">()</span></span><a class="xref" href="#WD_Sleep" title="B.6.8. WD_Sleep()"><fo:inline> [B.6.8]</fo:inline></a></span> can be called anywhere
    after <code class="jfunc">WD_Open</code><span class="jfunc">()</span></li></ul></div></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WD_Open"></a>B.6.2. WD_Open()</h3></div></div></div>
<h5><a name="idp46069374932816"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Opens a handle to access the WinDriver kernel module.<br>
The handle is used by all WinDriver APIs, and therefore must be called before any
other WinDriver API is called.
</p>

<h5><a name="idp46069374934336"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">HANDLE WD_Open(void);</pre>

<h5><a name="idp46069374935712"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
<p>
The handle to the WinDriver kernel module.<br>
If device could not be opened, returns <code class="japi">INVALID_HANDLE_VALUE</code>.
</p>

<h5><a name="idp46069374937824"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<p>
If you are a registered user, please refer to the documentation of
<span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_License</code><span class="japi">()</span></span><a class="xref" href="#WD_License" title="B.6.9. WD_License()"><fo:inline> [B.6.9]</fo:inline></a></span> for an example of how to register your WinDriver license.
</p>

<h5><a name="idp46069374941808"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen"> HANDLE hWD;

hWD = WD_Open();
if (hWD == INVALID_HANDLE_VALUE)
{
    printf("Cannot open WinDriver device\n");
}
</pre>
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WD_Version"></a>B.6.3. WD_Version()</h3></div></div></div>
<h5><a name="idp46069374945632"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Returns the version number of the WinDriver kernel module currently running.
</p>

<h5><a name="idp46069374947184"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_Version(
    HANDLE hWD,
    WD_VERSION *pVer);
</pre>

<h5><a name="idp46069374948992"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pVer</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_VERSION*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwVer</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">cVer</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">CHAR[128]</td><td style="" align="left" valign="top">Output</td></tr></tbody></table></div>

<h5><a name="idp46069374964352"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="B.6.2. WD_Open()"><fo:inline> [B.6.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pVer</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Pointer to a WinDriver version information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwVer</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The version number</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">cVer</span></td><td style="" align="left" valign="top">
   Version information string. <br>
   The version string's size is limited to 128 characters (including the NULL
   terminator character).
 </td></tr></tbody></table></div>

  <h5><a name="idp46069374977728"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  
<h5><a name="idp46069374980272"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>
<pre class="screen">WD_VERSION ver;

BZERO(ver);
WD_Version(hWD, &amp;ver);
printf("%s\n", ver.cVer);
if (ver.dwVer &lt; WD_VER)
{
    printf("Error - incorrect WinDriver version\n");
}
</pre>
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WD_Close"></a>B.6.4. WD_Close()</h3></div></div></div>
<h5><a name="idp46069374984048"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Closes the access to the WinDriver kernel module.
</p>

<h5><a name="idp46069374985568"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">void WD_Close(HANDLE hWD);</pre>

<h5><a name="idp46069374987344"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069374996432"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="" align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="B.6.2. WD_Open()"><fo:inline> [B.6.2]</fo:inline></a></td></tr></tbody></table></div>

  <h5><a name="idp46069375004240"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  None
  </p>
  
<h5><a name="idp46069375005728"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<p>
This function must be called when you finish using WinDriver kernel module.
</p>

<h5><a name="idp46069375007520"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>
<pre class="screen">WD_Close(hWD);</pre>
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WD_Debug"></a>B.6.5. WD_Debug()</h3></div></div></div>
<h5><a name="idp46069375010992"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Sets debugging level for collecting debug messages.
</p>

<h5><a name="idp46069375012512"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_Debug(
    HANDLE hWD,
    WD_DEBUG *pDebug);
</pre>

<h5><a name="idp46069375014304"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pDebug</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_DEBUG*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwCmd</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwLevel</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwSection</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwLevelMessageBox</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwBufferSize</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069375037296"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>

<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="B.6.2. WD_Open()"><fo:inline> [B.6.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pDebug</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Pointer to a debug information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwCmd</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Debug command: Set filter, Clear buffer, etc. <br>
    For more details please refer to <code class="japi">DEBUG_COMMAND</code> in
    <span class="jprintfilename"><strong>windrvr.h</strong></span>.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwLevel</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Used for <code class="japi">dwCmd=DEBUG_SET_FILTER</code>. Sets the debugging level to
    collect: Error, Warning, Info, Trace.<br>
    For more details please refer to <code class="japi">DEBUG_LEVEL</code> in
    <span class="jprintfilename"><strong>windrvr.h</strong></span>.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwSection</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Used for <code class="japi">dwCmd=DEBUG_SET_FILTER</code>. Sets the sections to
    collect: I/&#65279;O, Memory, Interrupt, etc. Use <code class="japi">S_ALL</code> for all.
    <br>
    For more details please refer to <code class="japi">DEBUG_SECTION</code> in
    <span class="jprintfilename"><strong>windrvr.h</strong></span>.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwLevelMessageBox</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Used for <code class="japi">dwCmd=DEBUG_SET_FILTER</code>. Sets the debugging level to
    print in a message box. <br>
    For more details please refer to <code class="japi">DEBUG_LEVEL</code> in
    <span class="jprintfilename"><strong>windrvr.h</strong></span>.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwBufferSize</span></td><td style="" align="left" valign="top">
    Used for <code class="japi">dwCmd=DEBUG_SET_BUFFER</code>. The size of buffer in the
    kernel.
  </td></tr></tbody></table></div>

  <h5><a name="idp46069375063872"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  
<h5><a name="idp46069375066416"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen">WD_DEBUG dbg;

BZERO(dbg);
dbg.dwCmd = DEBUG_SET_FILTER;
dbg.dwLevel = D_ERROR;
dbg.dwSection = S_ALL;
dbg.dwLevelMessageBox = D_ERROR;

WD_Debug(hWD, &amp;dbg);
</pre>
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WD_DebugAdd"></a>B.6.6. WD_DebugAdd()</h3></div></div></div>
<h5><a name="idp46069375070176"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Sends debug messages to the debug log. Used by the driver code.
</p>

<h5><a name="idp46069375071712"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_DebugAdd(
    HANDLE hWD,
    WD_DEBUG_ADD *pData);
</pre>

<h5><a name="idp46069375073520"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pData</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_DEBUG_ADD*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwLevel</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwSection</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pcBuffer</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">CHAR[256]</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069375091280"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>

<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="B.6.2. WD_Open()"><fo:inline> [B.6.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pData</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
     Pointer to an additional debug information structure:
   </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwLevel</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
     Assigns the level in the Debug Monitor, in which the data will be
     declared. <br>
     If <code class="japi">dwLevel</code> is zero, <code class="japi">D_ERROR</code> will be declared.
     <br>
     For more details please refer to <code class="japi">DEBUG_LEVEL</code> in
     <span class="jprintfilename"><strong>windrvr.h</strong></span>.
   </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwSection</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
     Assigns the section in the Debug Monitor, in which the data will be
     declared. <br>
     If <code class="japi">dwSection</code> is zero, <code class="japi">S_MISC</code> section will be
     declared. <br>
     For more details please refer to <code class="japi">DEBUG_SECTION</code> in
     <span class="jprintfilename"><strong>windrvr.h</strong></span>.
   </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pcBuffer</span></td><td style="" align="left" valign="top">
    The string to copy into the message log.
  </td></tr></tbody></table></div>

  <h5><a name="idp46069375111280"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  
<h5><a name="idp46069375113824"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen">WD_DEBUG_ADD add;

BZERO(add);
add.dwLevel = D_WARN;
add.dwSection = S_MISC;
sprintf(add.pcBuffer, "This message will be displayed in "
    "the Debug Monitor\n");
WD_DebugAdd(hWD, &amp;add);
</pre>
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WD_DebugDump"></a>B.6.7. WD_DebugDump()</h3></div></div></div>
<h5><a name="idp46069375117648"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Retrieves debug messages buffer.
</p>

<h5><a name="idp46069375119152"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_DebugDump(
    HANDLE hWD,
    WD_DEBUG_DUMP *pDebugDump);
</pre>

<h5><a name="idp46069375120960"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pDebug</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_DEBUG_DUMP*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pcBuffer</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">PCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input/Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwSize</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069375136480"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="B.6.2. WD_Open()"><fo:inline> [B.6.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pDebugDump</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Pointer to a debug dump information structure:
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pcBuffer</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Buffer to receive debug messages
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">dwSize</td><td style="" align="left" valign="top">
    Size of buffer in bytes
  </td></tr></tbody></table></div>

  <h5><a name="idp46069375148784"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  
<h5><a name="idp46069375151328"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen">char buffer[1024];
WD_DEBUG_DUMP dump;
dump.pcBuffer=buffer;
dump.dwSize = sizeof(buffer);
WD_DebugDump(hWD, &amp;dump);
</pre>
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WD_Sleep"></a>B.6.8. WD_Sleep()</h3></div></div></div>
<h5><a name="idp46069375155008"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Delays execution for a specific duration of time.
</p>

<h5><a name="idp46069375156528"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_Sleep(
    HANDLE hWD,
    WD_SLEEP *pSleep);
</pre>

<h5><a name="idp46069375158320"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pSleep</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_SLEEP*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwMicroSeconds</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069375173680"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="B.6.2. WD_Open()"><fo:inline> [B.6.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pSleep</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Pointer to a sleep information structure</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwMicroSeconds</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Sleep time in microseconds &#8212; 1/1,000,000 of a second
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="" align="left" valign="top">
    A bit-mask, which can be set to either of the following values:
    <div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><strong class="japib"><code>Zero (0)</code></strong> &#8212; Delay execution by consuming CPU
        cycles <span style="white-space:nowrap">(busy sleep)</span>; this is the default.
      </li><li class="listitem" style="list-style-type: disc"><strong class="japib"><code>SLEEP_NON_BUSY</code></strong> &#8212; Delay execution without
        consuming CPU resources <span style="white-space:nowrap">(non-busy sleep)</span>.<br>
        
    Note: The accuracy of non-busy sleep is
    <span style="white-space:nowrap">machine-dependent</span> and cannot be guaranteed for short
    sleep intervals <span style="white-space:nowrap">(&lt; 1 millisecond)</span>.
      </li></ul></div>
  </td></tr></tbody></table></div>

  <h5><a name="idp46069375191872"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  
<h5><a name="idp46069375194416"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<p>
Example usage: to access slow response hardware.
</p>

<h5><a name="idp46069375195936"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>
<pre class="screen">WD_Sleep slp;

BZERO(slp);
slp.dwMicroSeconds = 200;
WD_Sleep(hWD, &amp;slp);
</pre>
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WD_License"></a>B.6.9. WD_License()</h3></div></div></div>
<h5><a name="idp46069375199536"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Transfers the license string to the WinDriver kernel module.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
When using the <code class="japi">WDU</code> USB APIs<a class="xref" href="#WDU_Overview" title="B.2. WinDriver USB (WDU) Library Overview"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.2]</fo:inline></a> your WinDriver
license registration is done via the call to <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WDU_Init</code><span class="japi">()</span></span><a class="xref" href="#WDU_Init" title="B.4.1. WDU_Init"><fo:inline> [B.4.1]</fo:inline></a></span>, so you do
not need to call <code class="jfunc">WD_License</code><span class="jfunc">()</span> directly from your code.
</td></tr></table></div>
<h5><a name="idp46069375205776"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_License(
    HANDLE hWD,
    WD_LICENSE *pLicense);
</pre>

<h5><a name="idp46069375207584"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pLicense</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_LICENSE*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">cLicense</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">CHAR[]</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069375220544"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="B.6.2. WD_Open()"><fo:inline> [B.6.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pLicense</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Pointer to a WinDriver license information structure:
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">cLicense</span></td><td style="" align="left" valign="top">
    A buffer to contain the license string that is to be transferred to the
    WinDriver kernel module. 
  </td></tr></tbody></table></div>

  <h5><a name="idp46069375231696"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  
<h5><a name="idp46069375234240"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<p>
When using a registered version, this function must be called before any other
WinDriver API call, apart from <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_Open</code><span class="japi">()</span></span><a class="xref" href="#WD_Open" title="B.6.2. WD_Open()"><fo:inline> [B.6.2]</fo:inline></a></span>, in order to register the
license from the code.
</p>

<h5><a name="idp46069375238640"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>
<p>
Example usage: Add registration routine to your application:

</p><pre class="screen">/* Use the returned handle when calling WinDriver API functions */
HANDLE WinDriverOpenAndRegister(void)
{
    HANDLE hWD;
    WD_LICENSE lic;
    DWORD dwStatus;

    hWD = WD_Open();
    if (hWD!=INVALID_HANDLE_VALUE)
    {
        BZERO(lic);
        /* Replace the following string with your license string: */
        strcpy(lic.cLicense, "12345abcde12345.CompanyName");
        dwStatus = WD_License(hWD, &amp;lic);
        if (dwStatus != WD_STATUS_SUCCESS)
        {
             WD_Close(hWD);
             hWD = INVALID_HANDLE_VALUE;
        }
    }
    
    return hWD;
}
</pre><p>
</p>
</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Function_Reference_Utils"></a>B.7. User-Mode Utility Functions</h2></div></div></div><p>
This section describes a number of user-mode utility functions you will find
useful for implementing various tasks. These utility functions are
multi-platform, implemented on all operating systems supported by WinDriver.
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="Stat2Str"></a>B.7.1. Stat2Str</h3></div></div></div>
<h5><a name="idp46069375247072"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Retrieves the status string that corresponds to a status code.
</p>

<h5><a name="idp46069375248224"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>

<pre class="screen">const char *Stat2Str(DWORD dwStatus);</pre>

<h5><a name="idp46069375249616"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">dwStatus</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069375258352"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwStatus</span></td><td style="" align="left" valign="top">A numeric status code</td></tr></tbody></table></div>

<h5><a name="idp46069375265840"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
<p>
Returns the verbal status description (string) that corresponds to the
specified numeric status code.
</p>

<h5><a name="idp46069375267024"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<p>
See <a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section B.8</fo:inline></a> for a complete list of status codes
and strings.
</p>
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="get_os_type"></a>B.7.2. get_os_type</h3></div></div></div>
<h5><a name="idp46069375271328"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Retrieves the type of the operating system.
</p>

<h5><a name="idp46069375272464"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">OS_TYPE get_os_type(void);</pre>

<h5><a name="idp46069375273856"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
<p>
Returns the type of the operating system.<br>
If the operating system type is not detected, returns
<code class="japi">OS_CAN_NOT_DETECT</code>.
</p>
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="check_secureBoot_enabled"></a>B.7.3. check_secureBoot_enabled</h3></div></div></div>
<h5><a name="idp46069375277872"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Checks whether the Secure Boot feature is enabled on the system.
Developing drivers while Secure Boot is enabled can result in driver installation problems.
</p>
<h5><a name="idp46069375279120"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD check_secureBoot_enabled(void);</pre>
<h5><a name="idp46069375280512"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
<p>
    <code class="japi">WD_STATUS_SUCCESS</code> (0) when Secure Boot is enabled.
    <code class="japi">WD_WINDRIVER_STATUS_ERROR</code> when Secure Boot is disabled.
    Any other status when Secure Boot is not supported.
</p>
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="ThreadStart"></a>B.7.4. ThreadStart</h3></div></div></div>
<h5><a name="idp46069375284736"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Creates a thread.
</p>

<h5><a name="idp46069375285840"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD ThreadStart(
    HANDLE *phThread,
    HANDLER_FUNC pFunc,
    void *pData);
</pre>

<h5><a name="idp46069375287280"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">phThread</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pFunc</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">
    typedef void (*HANDLER_FUNC)(<br>
    &#8194; void *pData);
  </td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pData</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">VOID*</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069375299568"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">phThread</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Returns the handle to the created thread</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pFunc</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Starting address of the code that the new thread is to execute. (The
    handler's prototype &#8212;
    <span><code class="japi">HANDLER_FUNC</code> &#8212;  is defined
    in <span class="jprintfilename"><strong>utils.h</strong></span>.</span>)
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pData</td><td style="" align="left" valign="top">Pointer to the data to be passed to the new thread</td></tr></tbody></table></div>


  
  <h5><a name="idp46069375310656"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="ThreadWait"></a>B.7.5. ThreadWait</h3></div></div></div>
<h5><a name="idp46069375315040"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Waits for a thread to exit.
</p>

<h5><a name="idp46069375316160"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">void ThreadWait(HANDLE hThread);</pre>

<h5><a name="idp46069375317552"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hThread</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069375326288"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hThread</td><td style="" align="left" valign="top">The handle to the thread whose completion is awaited</td></tr></tbody></table></div>


  
  <h5><a name="idp46069375333296"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  None
  </p>
  
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="OsEventCreate"></a>B.7.6. OsEventCreate</h3></div></div></div>
<h5><a name="idp46069375336624"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Creates an event object.
</p>

<h5><a name="idp46069375337744"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD OsEventCreate(HANDLE *phOsEvent);</pre>

<h5><a name="idp46069375339136"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">phOsEvent</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">HANDLE*</td><td style="" align="left" valign="top">Output</td></tr></tbody></table></div>

<h5><a name="idp46069375347872"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">phOsEvent</td><td style="" align="left" valign="top">
    The pointer to a variable that receives a handle to the newly created event
    object
  </td></tr></tbody></table></div>


  
  <h5><a name="idp46069375354928"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="OsEventClose"></a>B.7.7. OsEventClose</h3></div></div></div>
<h5><a name="idp46069375359312"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Closes a handle to an event object.
</p>

<h5><a name="idp46069375360432"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">void OsEventClose(HANDLE hOsEvent);</pre>

<h5><a name="idp46069375361824"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hOsEvent</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069375370560"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hOsEvent</td><td style="" align="left" valign="top">The handle to the event object to be closed</td></tr></tbody></table></div>


  
  <h5><a name="idp46069375377568"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  None
  </p>
  
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="OsEventWait"></a>B.7.8. OsEventWait</h3></div></div></div>
<h5><a name="idp46069375380896"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Waits until a specified event object is in the signaled state or the time-out
interval elapses.
</p>

<h5><a name="idp46069375382080"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD OsEventWait(
    HANDLE hOsEvent,
    DWORD dwSecTimeout);
</pre>

<h5><a name="idp46069375383504"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hOsEvent</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">dwSecTimeout</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069375393872"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hOsEvent</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The handle to the event object</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">dwSecTimeout</td><td style="" align="left" valign="top">
    Time-out interval of the event, in seconds. <br>
    For an infinite wait, set the timeout to <code class="japi">INFINITE</code>.
  </td></tr></tbody></table></div>


  
  <h5><a name="idp46069375403296"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="OsEventSignal"></a>B.7.9. OsEventSignal</h3></div></div></div>
<h5><a name="idp46069375407680"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Sets the specified event object to the signaled state.
</p>

<h5><a name="idp46069375408832"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD OsEventSignal(HANDLE hOsEvent);</pre>

<h5><a name="idp46069375410224"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hOsEvent</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069375418960"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hOsEvent</td><td style="" align="left" valign="top">The handle to the event object</td></tr></tbody></table></div>


  
  <h5><a name="idp46069375425952"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="OsEventReset"></a>B.7.10. OsEventReset</h3></div></div></div>
<h5><a name="idp46069375430336"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Resets the specified event object to the non-signaled state.
</p>

<h5><a name="idp46069375431488"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD OsEventReset(HANDLE hOsEvent);</pre>

<h5><a name="idp46069375432880"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hOsEvent</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069375441616"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hOsEvent</td><td style="" align="left" valign="top">The handle to the event object</td></tr></tbody></table></div>


  
  <h5><a name="idp46069375448608"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="OsMutexCreate"></a>B.7.11. OsMutexCreate</h3></div></div></div>
<h5><a name="idp46069375452992"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Creates a mutex object.
</p>

<h5><a name="idp46069375454112"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD OsMutexCreate(HANDLE *phOsMutex);</pre>

<h5><a name="idp46069375455504"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">phOsMutex</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">HANDLE*</td><td style="" align="left" valign="top">Output</td></tr></tbody></table></div>

<h5><a name="idp46069375464240"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">phOsMutex</td><td style="" align="left" valign="top">
    The pointer to a variable that receives a handle to the newly created mutex
    object
  </td></tr></tbody></table></div>


  
  <h5><a name="idp46069375471296"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="OsMutexClose"></a>B.7.12. OsMutexClose</h3></div></div></div>
<h5><a name="idp46069375475680"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Closes a handle to a mutex object.
</p>

<h5><a name="idp46069375476800"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">void OsMutexClose(HANDLE hOsMutex);</pre>

<h5><a name="idp46069375478192"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hOsMutex</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069375486928"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hOsMutex</td><td style="" align="left" valign="top">The handle to the mutex object to be closed</td></tr></tbody></table></div>


  
  <h5><a name="idp46069375493936"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  None
  </p>
  
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="OsMutexLock"></a>B.7.13. OsMutexLock</h3></div></div></div>
<h5><a name="idp46069375497264"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Locks the specified mutex object.
</p>

<h5><a name="idp46069375498384"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD OsMutexLock(HANDLE hOsMutex);</pre>

<h5><a name="idp46069375499776"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hOsMutex</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069375508512"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hOsMutex</td><td style="" align="left" valign="top">The handle to the mutex object to be locked</td></tr></tbody></table></div>


  
  <h5><a name="idp46069375515520"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="OsMutexUnlock"></a>B.7.14. OsMutexUnlock</h3></div></div></div>
<h5><a name="idp46069375519904"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Releases (unlocks) a locked mutex object.
</p>

<h5><a name="idp46069375521040"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD OsMutexUnlock(HANDLE hOsMutex);</pre>

<h5><a name="idp46069375522432"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hOsMutex</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069375531168"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hOsMutex</td><td style="" align="left" valign="top">The handle to the mutex object to be unlocked</td></tr></tbody></table></div>


  
  <h5><a name="idp46069375538176"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="PrintDbgMessage"></a>B.7.15. PrintDbgMessage</h3></div></div></div>
<h5><a name="idp46069375542560"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Sends debug messages to the Debug Monitor.
</p>

<h5><a name="idp46069375543696"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">void PrintDbgMessage(
    DWORD dwLevel,
    DWORD dwSection,
    const char *format
    [, argument]...);
</pre>

<h5><a name="idp46069375545168"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwLevel</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwSection</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">format</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">const char*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">argument</td><td style="border-right: 0.5pt solid ; " align="left" valign="top"> </td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069375558640"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwLevel</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Assigns the level in the Debug Monitor, in which the data will be declared.
    If zero, <code class="japi">D_ERROR</code> will be declared.<br>
    For more details please refer to <code class="japi">DEBUG_LEVEL</code> in
    <span class="jprintfilename"><strong>windrvr.h</strong></span>.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwSection</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Assigns the section in the Debug Monitor, in which the data will be
    declared. If zero, <code class="japi">S_MISC</code> will be declared.<br>
    For more details please refer to DEBUG_SECTION in
    <span class="jprintfilename"><strong>windrvr.h</strong></span>.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">format</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Format-control string</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">argument</td><td style="" align="left" valign="top">Optional arguments, limited to 256 bytes</td></tr></tbody></table></div>



  
  <h5><a name="idp46069375572880"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  None
  </p>
  
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WD_LogStart"></a>B.7.16. WD_LogStart</h3></div></div></div>
<h5><a name="idp46069375576112"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Opens a log file.
</p>

<h5><a name="idp46069375577216"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_LogStart(
    const char *sFileName,
    const char *sMode);
</pre>

<h5><a name="idp46069375578640"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">sFileName</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">const char*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">sMode</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">const char*</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069375589008"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">sFileName</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Name of log file to be opened</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">sMode</td><td style="" align="left" valign="top">
    Type of access permitted.<br>
    For example, NULL or <span class="b"><strong>w</strong></span> opens an empty file for writing, and if the
    given file exists, its contents are destroyed;<br>
    <span class="b"><strong>a</strong></span> opens a file for writing at the end of the file (i.e., append).
  </td></tr></tbody></table></div>


  
  <h5><a name="idp46069375598800"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  

<h5><a name="idp46069375601088"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<p>
Once a log file is opened, all API calls are logged in this file.<br>
You may add your own printouts to the log file by calling
<span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_LogAdd</code><span class="japi">()</span></span><a class="xref" href="#WD_LogAdd" title="B.7.18. WD_LogAdd"><fo:inline> [B.7.18]</fo:inline></a></span>.
</p>
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WD_LogStop"></a>B.7.17. WD_LogStop</h3></div></div></div>
<h5><a name="idp46069375607184"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Closes a log file.
</p>

<h5><a name="idp46069375608288"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">VOID WD_LogStop(void);</pre>


  
  <h5><a name="idp46069375609920"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  None
  </p>
  
</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="WD_LogAdd"></a>B.7.18. WD_LogAdd</h3></div></div></div>
<h5><a name="idp46069375613248"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Adds user printouts into log file.
</p>

<h5><a name="idp46069375614368"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">VOID DLLCALLCONV WD_LogAdd(
    const char *sFormat
    [, argument ]...);
</pre>

<h5><a name="idp46069375615808"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">sFormat</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">const char*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">argument</td><td style="border-right: 0.5pt solid ; " align="left" valign="top"> </td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46069375626016"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">sFormat</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Format-control string</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">argument</td><td style="" align="left" valign="top">Optional format arguments</td></tr></tbody></table></div>


  
  <h5><a name="idp46069375634224"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="B.8. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [B.8]</fo:inline></a>.
  </p>
  
</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Status_Strings"></a>B.8. WinDriver Status Codes</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="wd_status_codes_intro"></a>B.8.1. Introduction</h3></div></div></div><p>
Most of the WinDriver functions return a status code, where zero
(<code class="japi">WD_STATUS_SUCCESS</code>) means success and a non-zero value means
failure.<br>
The <code class="jfunc">Stat2Str</code><span class="jfunc">()</span> functions can be used to retrieve the status
description string for a given status code. The status codes and their
descriptive strings are listed below.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="wd_status_codes"></a>B.8.2. Status Codes Returned by WinDriver</h3></div></div></div><div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Status Code</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_STATUS_SUCCESS</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Success</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_STATUS_INVALID_WD_HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Invalid WinDriver handle</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_WINDRIVER_STATUS_ERROR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Error</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_INVALID_HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Invalid handle</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_INVALID_PIPE_NUMBER</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Invalid pipe number</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_READ_WRITE_CONFLICT</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Conflict between read and write operations</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_ZERO_PACKET_SIZE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Packet size is zero</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_INSUFFICIENT_RESOURCES</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Insufficient resources</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_UNKNOWN_PIPE_TYPE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Unknown pipe type</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_SYSTEM_INTERNAL_ERROR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Internal system error</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_DATA_MISMATCH</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Data mismatch</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_NO_LICENSE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">No valid license</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_NOT_IMPLEMENTED</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Function not implemented</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_FAILED_ENABLING_INTERRUPT</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Failed enabling interrupt</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_INTERRUPT_NOT_ENABLED</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Interrupt not enabled</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_RESOURCE_OVERLAP</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Resource overlap</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_DEVICE_NOT_FOUND</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Device not found</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_WRONG_UNIQUE_ID</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Wrong unique ID</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_OPERATION_ALREADY_DONE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Operation already done</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USB_DESCRIPTOR_ERROR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USB descriptor error</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_SET_CONFIGURATION_FAILED</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Set configuration operation failed</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_CANT_OBTAIN_PDO</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Cannot obtain PDO</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_TIME_OUT_EXPIRED</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Timeout expired</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_IRP_CANCELED</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">IRP operation canceled</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_FAILED_USER_MAPPING</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Failed to map in user space</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_FAILED_KERNEL_MAPPING</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Failed to map in kernel space</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_NO_RESOURCES_ON_DEVICE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">No resources on the device</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_NO_EVENTS</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">No events</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_INVALID_PARAMETER</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Invalid parameter</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_INCORRECT_VERSION</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Incorrect WinDriver version installed</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_TRY_AGAIN</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Try again</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_INVALID_IOCTL</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Received an invalid IOCTL</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_OPERATION_FAILED</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Operation failed</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_INVALID_32BIT_APP</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Received an invalid 32-&#65279;bit IOCTL</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_TOO_MANY_HANDLES</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">No room to add handle</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">WD_NO_DEVICE_OBJECT</td><td style="" align="left" valign="top">Driver not installed</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="usbd_status_codes"></a>B.8.3. Status Codes Returned by USBD</h3></div></div></div><p>
The following WinDriver status codes comply with USBD_XXX status codes
returned by the USB stack drivers.
</p><div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Status Code</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" align="left"><td style="border-bottom: 0.5pt solid ; " colspan="2" align="left" valign="top"><em class="it">USBD Status Types</em></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_SUCCESS</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USBD: Success</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_PENDING</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USBD: Operation pending</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_ERROR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USBD: Error</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_HALTED</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USBD: Halted</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" align="left"><td style="border-bottom: 0.5pt solid ; " colspan="2" align="left" valign="top">
  <em class="it">USBD Status Codes</em><br>
  (NOTE: The status codes consist of one of the status types above and an error
  code, i.e., <span style="white-space:nowrap">0xXYYYYYYYL</span>, where
  <span style="white-space:nowrap">X=status</span> type and
  <span style="white-space:nowrap">YYYYYYY=error code</span>. The same error codes may also
  appear with one of the other status types as well.)
</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" align="left"><td style="border-bottom: 0.5pt solid ; " colspan="2" align="left" valign="top">
  <em class="it">HC (Host Controller) Status Codes</em><br>
  (NOTE: These use the <code class="japi">WD_USBD_STATUS_HALTED</code> status type.)
</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_CRC</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">HC status: CRC</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_BTSTUFF</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">HC status: Bit stuffing </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_DATA_TOGGLE_MISMATCH</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">HC status: Data toggle mismatch</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_STALL_PID</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">HC status: PID stall</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_DEV_NOT_RESPONDING</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">HC status: Device not responding</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_PID_CHECK_FAILURE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">HC status: PID check failed</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_UNEXPECTED_PID</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">HC status: Unexpected PID</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_DATA_OVERRUN</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">HC status: Data overrun</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_DATA_UNDERRUN</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">HC status: Data underrun</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_RESERVED1</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">HC status: Reserved1</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_RESERVED2</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">HC status: Reserved2</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_BUFFER_OVERRUN</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">HC status: Buffer overrun</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_BUFFER_UNDERRUN</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">HC status: Buffer Underrun</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_NOT_ACCESSED</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">HC status: Not accessed</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_FIFO</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">HC status: FIFO</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" align="left"><td style="border-bottom: 0.5pt solid ; " colspan="2" align="left" valign="top"><em class="it">For Windows only:</em></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_XACT_ERROR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    HC status: The host controller has set the Transaction Error (XactErr)
    bit in the transfer descriptor's status field
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_BABBLE_DETECTED</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">HC status: Babble detected</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_DATA_BUFFER_ERROR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">HC status: Data buffer error</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_ISOCH</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USBD: Isochronous transfer failed</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_NOT_COMPLETE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USBD: Transfer not completed</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_CLIENT_BUFFER</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USBD: Cannot write to buffer</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" align="left"><td style="border-bottom: 0.5pt solid ; " colspan="2" align="left" valign="top"><em class="it">For all platforms:</em></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_CANCELED</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USBD: Transfer canceled</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" align="left"><td style="border-bottom: 0.5pt solid ; " colspan="2" align="left" valign="top"><em class="it">Returned by HCD (Host Controller
  Driver) if a transfer is submitted to an endpoint that is stalled:
</em></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_ENDPOINT_HALTED</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">HCD: Transfer submitted to stalled endpoint</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" align="left"><td style="border-bottom: 0.5pt solid ; " colspan="2" align="left" valign="top">
  <em class="it">Software Status Codes</em> (NOTE: Only the error bit is set):
</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_NO_MEMORY</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USBD: Out of memory</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_INVALID_URB_FUNCTION</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USBD: Invalid URB function</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_INVALID_PARAMETER</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USBD: Invalid parameter</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center" valign="top"><em class="it">Returned if client driver attempts to close an
  endpoint, interface, or configuration with outstanding transfers:
</em></td><td class="auto-generated" style="border-bottom: 0.5pt solid ; "> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_ERROR_BUSY</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
      USBD: Attempted to close endpoint/interface/configuration with
      outstanding transfer
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" align="left"><td style="border-bottom: 0.5pt solid ; " colspan="2" align="left" valign="top"><em class="it">Returned by USBD if it cannot
  complete a URB request. Typically this will be returned in the URB status
  field (when the IRP is completed) with a more specific error code. The IRP
  status codes are indicated in WinDriver's Debug Monitor tool
  (<span class="jprintfilename"><strong>wddebug_gui</strong></span> /
  <span class="jprintfilename"><strong>wddebug</strong></span>):
</em></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_REQUEST_FAILED</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USBD: URB request failed</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_INVALID_PIPE_HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USBD: Invalid pipe handle</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" align="left"><td style="border-bottom: 0.5pt solid ; " colspan="2" align="left" valign="top"><em class="it">Returned when there is not
  enough bandwidth available to open a requested endpoint:
</em></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_NO_BANDWIDTH</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USBD: Not enough bandwidth for endpoint</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" align="left"><td style="border-bottom: 0.5pt solid ; " colspan="2" align="left" valign="top"><em class="it">
  Generic HC (Host Controller) error:
</em></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_INTERNAL_HC_ERROR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USBD: Host controller error</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" align="left"><td style="border-bottom: 0.5pt solid ; " colspan="2" align="left" valign="top"><em class="it">Returned when a short packet
  terminates the transfer, i.e., USBD_SHORT_TRANSFER_OK bit not set:
</em></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_ERROR_SHORT_TRANSFER</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USBD: Transfer terminated with short packet</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" align="left"><td style="border-bottom: 0.5pt solid ; " colspan="2" align="left" valign="top"><em class="it">Returned if the requested start
  frame is not within <code class="japi">USBD_ISO_START_FRAME_RANGE</code> of the current
  USB frame</em> (NOTE: The stall bit is set):
</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_BAD_START_FRAME</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USBD: Start frame outside range</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" align="left"><td style="border-bottom: 0.5pt solid ; " colspan="2" align="left" valign="top"><em class="it">Returned by HCD (Host Controller
  Driver) if all packets in an isochronous transfer complete with an error:
</em></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_ISOCH_REQUEST_FAILED</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">HCD: Isochronous transfer completed with error</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" align="left"><td style="border-bottom: 0.5pt solid ; " colspan="2" align="left" valign="top"><em class="it">Returned by USBD if the frame
  length control for a given HC (Host Controller) is already taken by another
  driver:
</em></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_FRAME_CONTROL_OWNED</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USBD: Frame length control already taken</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" align="left"><td style="border-bottom: 0.5pt solid ; " colspan="2" align="left" valign="top"><em class="it">Returned by USBD if the caller
  does not own frame length control and attempts to release or modify the HC
  frame length:
</em></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_FRAME_CONTROL_NOT_OWNED</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    USBD: Attempted operation on frame length control not owned by caller
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" align="left"><td style="border-bottom: 0.5pt solid ; " colspan="2" align="left" valign="top"><em class="it">
  Additional software error codes added for USB 2.0 (for Windows only):
</em></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_NOT_SUPPORTED</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USBD: API not supported/ implemented</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_INAVLID_CONFIGURATION_DESCRIPTOR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USBD: Invalid configuration descriptor</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_INSUFFICIENT_RESOURCES</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USBD: Insufficient resources</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_SET_CONFIG_FAILED</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USBD: Set configuration failed</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_BUFFER_TOO_SMALL</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USBD: Buffer too small</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_INTERFACE_NOT_FOUND</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USBD: Interface not found</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_INAVLID_PIPE_FLAGS</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USBD: Invalid pipe flags</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_TIMEOUT</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USBD: Timeout</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_DEVICE_GONE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USBD: Device gone</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_STATUS_NOT_MAPPED</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USBD: Status not mapped</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" align="left"><td style="border-bottom: 0.5pt solid ; " colspan="2" align="left" valign="top">
  <em class="it">Extended isochronous error codes returned by USBD</em><br>
  These errors appear in the packet status field of an isochronous transfer:
</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_ISO_NOT_ACCESSED_BY_HW</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    USBD: The controller did not access the TD associated with this packet
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_ISO_TD_ERROR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USBD: Controller reported an error in the TD</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_ISO_NA_LATE_USBPORT</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    USBD: The packet was submitted in time by the client but failed to reach
    the miniport in time
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">WD_USBD_STATUS_ISO_NOT_ACCESSED_LATE</td><td style="" align="left" valign="top">
    USBD: The packet was not sent because the client submitted it too late to
    transmit
  </td></tr></tbody></table></div></div></div></div><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a name="troubleshooting_n_support"></a>Appendix C. Troubleshooting and Support</h1></div></div></div><p>
Please refer to the online WinDriver support page &#8212; <a class="ulink" href="https://www.jungo.com/st/support/windriver/" target="_top">https://www.jungo.com/st/support/windriver/</a> &#8212;
for additional resources for developers, including

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    Technical documents
  </li><li class="listitem" style="list-style-type: disc">
    FAQs
  </li><li class="listitem" style="list-style-type: disc">
    Samples
  </li><li class="listitem" style="list-style-type: disc">
    Quick start guides
  </li></ul></div><p>
</p></div><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a name="Appendix_Limitations"></a>Appendix D. Evaluation Version Limitations</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="winpnp_eval_limits"></a>D.1. Windows WinDriver Evaluation Limitations</h2></div></div></div>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    Each time WinDriver is activated, an <em class="guilabel">Unregistered</em>
    message appears.
  </li><li class="listitem" style="list-style-type: disc">
    When using DriverWizard, a dialogue box with a message stating that an
    evaluation version is being run appears on every interaction with the
    hardware.
  </li><li class="listitem" style="list-style-type: disc">
    DriverWizard<a class="xref" href="#driverwizard" title="Chapter 5. Using DriverWizard"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [5]</fo:inline></a>:

    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
        Each time DriverWizard is activated, an
        <em class="guilabel">Unregistered</em> message appears.
      </li><li class="listitem">
        An evaluation message is displayed on every interaction with the
        hardware using DriverWizard.
      </li></ul></div></li><li class="listitem" style="list-style-type: disc">
    WinDriver will function for only 30 days after the original installation.
  </li></ul></div>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="linux_eval_limits"></a>D.2. Linux WinDriver Evaluation Limitations</h2></div></div></div>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    Each time WinDriver is activated, an <em class="guilabel">Unregistered</em>
    message appears.
  </li><li class="listitem" style="list-style-type: disc">
    DriverWizard<a class="xref" href="#driverwizard" title="Chapter 5. Using DriverWizard"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [5]</fo:inline></a>:

    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
        Each time DriverWizard is activated, an
        <em class="guilabel">Unregistered</em> message appears.
      </li><li class="listitem" style="list-style-type: disc">
        An evaluation message is displayed on every interaction with the
        hardware using DriverWizard.
      </li></ul></div></li><li class="listitem" style="list-style-type: disc"><p>
  WinDriver's kernel module will work for no more than 60 minutes at a time. To
  continue working, the WinDriver kernel module must be reloaded (unload and load
  the module) using the following commands:
    

  </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
  The following commands must be executed with root privileges.
  </td></tr></table></div><p>
  </p><p>
    To unload &#8212;<br>
    <strong class="jcmd"><code># /sbin/modprobe -r windrvr1281</code></strong>
      
    </p><p>
    To load &#8212;<br>
    <strong class="jcmd"><code># &lt;path to wdreg&gt; windrvr1281</code></strong>
    </p><p>
    <span class="jprintfilename"><strong>wdreg</strong></span> is provided in the
  <span class="jdirectory"><strong>WinDriver/util</strong></span>
  directory.

    </p></li></ul></div>
</div></div><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a name="purchasing_wd"></a>Appendix E. Purchasing WinDriver</h1></div></div></div><p>
Visit the WinDriver order page on our web site &#8212; <a class="ulink" href="https://www.jungo.com/st/order_wd/" target="_top">https://www.jungo.com/st/order_wd/</a> &#8212;
to select your WinDriver product(s) and receive a quote. Then fill in the WinDriver
order form &#8212; available for download from the order page &#8212; and send
it to Jungo by email or fax (see details in the order form and in the
online order page). If you have installed the evaluation version of WinDriver, you
can also find the order form in the
<span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>WinDriver/docs</strong></span></span> directory, or
access it via
<span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jmenupath"><strong>Start | WinDriver | Order Form</strong></span></span> on
Windows.
</p><p>
The WinDriver license string will be emailed to you immediately.<br>
Your WinDriver package will be sent to you via courier or registered mail.
</p><p>
Feel free to contact us with any question you may have. For full contact
information, visit our contact web page: <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><a class="ulink" href="https://www.jungo.com/st/company/contact-us/" target="_top">https://www.jungo.com/st/company/contact-us/</a></span>.
</p></div><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a name="Distrib_Legal"></a>Appendix F. Distributing Your Driver &#8212; Legal Issues</h1></div></div></div><p>
WinDriver is licensed per-seat. The WinDriver license allows one developer on a single
machine to develop a device driver for a single device (VID/DID (PCI) or 
VID/PID (USB)), and to freely distribute the created driver without royalties,
as outlined in the license agreement in the <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>WinDriver/docs/</strong></span><span class="jprintfilename"><strong>wd_license.pdf</strong></span></span> file.
</p></div><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a name="additional_doc"></a>Appendix G. Additional Documentation</h1></div></div></div><h4><a name="idp46069375866384"></a></h4><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.5em"><span class="bridgehead">Updated Manuals</span></div><p>
The most updated WinDriver user manuals can be found on Jungo's site at
<span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><a class="ulink" href="https://www.jungo.com/st/support/windriver/" target="_top">https://www.jungo.com/st/support/windriver/</a></span>.
</p><h4><a name="idp46069375868176"></a></h4><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.5em"><span class="bridgehead">Version History</span></div><p>
If you wish to view WinDriver version history, refer to the WinDriver release notes,
available online at <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><a class="ulink" href="https://www.jungo.com/st/support/windriver/wdver/" target="_top">https://www.jungo.com/st/support/windriver/wdver/</a></span>. The release notes include a list of the
new features, enhancements and fixes that have been added in each WinDriver
version.
</p><h4><a name="idp46069375870208"></a></h4><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.5em"><span class="bridgehead">Technical Documents</span></div><p>
For additional information, refer to the WinDriver Technical Documents
database:<br>
<a class="ulink" href="https://www.jungo.com/st/support/tech_docs_indexes/main_index.html" target="_top">https://www.jungo.com/st/support/tech_docs_indexes/main_index.html</a>.<br>
This database includes detailed descriptions of WinDriver's features,
utilities and APIs and their correct usage, troubleshooting of common
problems, useful tips and answers to frequently asked questions.
</p></div></div><HR><table class="footer" width="100%"><tr><td width="33.33%" align="left"><span xmlns:fo="http://www.w3.org/1999/XSL/Format" class="j_footer_copyright">
  © 2018 Jungo Connectivity Ltd.
</span></td><td width="33.33%" align="right">CONFIDENTIAL</td></tr></table></body></html>
