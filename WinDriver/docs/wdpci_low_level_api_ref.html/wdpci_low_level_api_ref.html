<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>WinDriver&#8482; PCI&#65279;/&#65279;ISA Low&#65279;-&#65279;Level API Reference</title><link rel="stylesheet" type="text/css" href="html_theme.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div style="margin-top: 1.25em; margin-bottom: 2.5em;"><div xmlns:fo="http://www.w3.org/1999/XSL/Format" id="j_vendor_logos"><img src="images/logo_jungo_site.png" alt="Jungo Connectivity Ltd."></div></div><div class="book"><div class="titlepage"><div><div><h1 class="title"><a name="idp46958329679472"></a>WinDriver&#8482; PCI&#65279;/&#65279;ISA
  <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap">Low&#65279;-&#65279;Level API Reference</span></h1></div><div><div class="author"><h3 class="author"><span class="firstname">Jungo Connectivity Ltd.</span></h3></div></div><div><p class="releaseinfo"><span class="book_releaseinfo">
    Version 12.8.1
  </span></p></div><div><p class="copyright">Copyright ©  2018 Jungo Connectivity Ltd. All Rights Reserved
    </p></div><div><div class="legalnotice"><a name="idp46958329478784"></a><p>
    Information in this document is subject to change without notice. The
    software described in this document is furnished under a license agreement.
    The software may be used, copied or distributed only in accordance with
    that agreement. No part of this publication may be reproduced, stored in a
    retrieval system, or transmitted in any form or any means, electronically
    or mechanically, including photocopying and recording for any purpose
    without the written permission of Jungo Connectivity Ltd.
    </p><p>
    Brand and product names mentioned in this document are trademarks of their
    respective owners and are used here only for identification purposes.
    </p></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="chapter"><a href="#wdpci_api_low_overview">1. Overview</a></span></dt><dt><span class="chapter"><a href="#PCI_ISA_WD_FUNC_REF">2. WD_xxx PCI&#65279;/&#65279;ISA Functions</a></span></dt><dd><dl><dt><span class="section"><a href="#Calling_Sequence_PCI">2.1. API Calling Sequence &#8212; PCI&#65279;/&#65279;ISA</a></span></dt><dt><span class="section"><a href="#WD_PciScanCards">2.2. WD_PciScanCards()</a></span></dt><dt><span class="section"><a href="#WD_PciScanCaps">2.3. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">WD_PciScanCaps()</span></a></span></dt><dt><span class="section"><a href="#WD_PciGetCardInfo">2.4. WD_PciGetCardInfo()</a></span></dt><dt><span class="section"><a href="#WD_PciConfigDump">2.5. WD_PciConfigDump()</a></span></dt><dt><span class="section"><a href="#WD_CardRegister">2.6. WD_CardRegister()</a></span></dt><dt><span class="section"><a href="#WD_CardCleanupSetup">2.7. WD_CardCleanupSetup()</a></span></dt><dt><span class="section"><a href="#WD_CardUnregister">2.8. WD_CardUnregister()</a></span></dt><dt><span class="section"><a href="#WD_Transfer">2.9. WD_Transfer()</a></span></dt><dt><span class="section"><a href="#WD_MultiTransfer">2.10. WD_MultiTransfer()</a></span></dt><dt><span class="section"><a href="#WD_DMALock">2.11. WD_DMALock()</a></span></dt><dt><span class="section"><a href="#WD_DMAUnlock">2.12. WD_DMAUnlock()</a></span></dt><dt><span class="section"><a href="#WD_KernelBufLock">2.13. WD_KernelBufLock()</a></span></dt><dt><span class="section"><a href="#WD_KernelBufUnlock">2.14. WD_KernelBufUnlock()</a></span></dt><dt><span class="section"><a href="#WD_DMASyncCpu">2.15. WD_DMASyncCpu()</a></span></dt><dt><span class="section"><a href="#WD_DMASyncIo">2.16. WD_DMASyncIo()</a></span></dt><dt><span class="section"><a href="#InterruptEnable">2.17. InterruptEnable()</a></span></dt><dt><span class="section"><a href="#InterruptDisable">2.18. InterruptDisable()</a></span></dt></dl></dd><dt><span class="chapter"><a href="#Function_Reference_Low_Level">3. Low&#65279;-&#65279;Level WD_xxx Interrupt Functions</a></span></dt><dd><dl><dt><span class="section"><a href="#lowlevel_int_calling_seq">3.1. WinDriver Low&#65279;-&#65279;Level Interrupt Calling Sequence</a></span></dt><dt><span class="section"><a href="#WD_IntEnable">3.2. WD_IntEnable()</a></span></dt><dt><span class="section"><a href="#WD_IntWait">3.3. WD_IntWait()</a></span></dt><dt><span class="section"><a href="#WD_IntCount">3.4. WD_IntCount()</a></span></dt><dt><span class="section"><a href="#WD_IntDisable">3.5. WD_IntDisable()</a></span></dt></dl></dd><dt><span class="chapter"><a href="#wd_low_pnp_funcs">4. Plug&#65279;-&#65279;and&#65279;-&#65279;Play and Power Management Functions</a></span></dt><dd><dl><dt><span class="section"><a href="#wd_low_pnp_calling_seq">4.1. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">Calling_Sequence</span></a></span></dt><dt><span class="section"><a href="#PciEventCreate">4.2. PciEventCreate()</a></span></dt><dt><span class="section"><a href="#EventRegister">4.3. EventRegister()</a></span></dt><dt><span class="section"><a href="#EventUnregister">4.4. EventUnregister()</a></span></dt></dl></dd><dt><span class="chapter"><a href="#wd_gen_funcs">5. General WD_xxx Functions</a></span></dt><dd><dl><dt><span class="section"><a href="#Calling_Sequence_WD_General">5.1. Calling Sequence WinDriver &#8212; General Use</a></span></dt><dt><span class="section"><a href="#WD_Open">5.2. WD_Open()</a></span></dt><dt><span class="section"><a href="#WD_Version">5.3. WD_Version()</a></span></dt><dt><span class="section"><a href="#WD_Close">5.4. WD_Close()</a></span></dt><dt><span class="section"><a href="#WD_Debug">5.5. WD_Debug()</a></span></dt><dt><span class="section"><a href="#WD_DebugAdd">5.6. WD_DebugAdd()</a></span></dt><dt><span class="section"><a href="#WD_DebugDump">5.7. WD_DebugDump()</a></span></dt><dt><span class="section"><a href="#WD_Sleep">5.8. WD_Sleep()</a></span></dt><dt><span class="section"><a href="#WD_License">5.9. WD_License()</a></span></dt></dl></dd><dt><span class="chapter"><a href="#KPUSERFUNC">6. Kernel PlugIn User-Mode Functions</a></span></dt><dd><dl><dt><span class="section"><a href="#WD_KernelPlugInOpen">6.1. WD_KernelPlugInOpen()</a></span></dt><dt><span class="section"><a href="#WD_KernelPlugInClose">6.2. WD_KernelPlugInClose()</a></span></dt><dt><span class="section"><a href="#WD_KernelPlugInCall">6.3. WD_KernelPlugInCall()</a></span></dt><dt><span class="section"><a href="#WD_IntEnable_KP">6.4. WD_IntEnable()</a></span></dt></dl></dd><dt><span class="appendix"><a href="#Status_Strings">A. WinDriver Status Codes</a></span></dt><dd><dl><dt><span class="section"><a href="#wd_status_codes_intro">A.1. Introduction</a></span></dt><dt><span class="section"><a href="#wd_status_codes">A.2. Status Codes Returned by WinDriver</a></span></dt></dl></dd><dt><span class="appendix"><a href="#troubleshooting_n_support">B. Troubleshooting and Support</a></span></dt><dt><span class="appendix"><a href="#purchasing_wd">C. Purchasing WinDriver</a></span></dt><dt><span class="appendix"><a href="#additional_doc">D. Additional Documentation</a></span></dt></dl></div><div class="list-of-figures"><p><b>List of Figures</b></p><dl><dt>2.1. <a href="#wd_pci_calling_sequence">WinDriver PCI&#65279;/&#65279;ISA Calling Sequence</a></dt><dt>3.1. <a href="#lowlevel_int_calling_sequence">Low&#65279;-&#65279;Level WinDriver Interrupt API Calling Sequence</a></dt><dt>4.1. <a href="#pnp_calling_sequence">Plug&#65279;-&#65279;and&#65279;-&#65279;Play Calling Sequence</a></dt><dt>5.1. <a href="#wd_general_calling_sequence_pci">WinDriver-API Calling Sequence</a></dt></dl></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="wdpci_api_low_overview"></a>Chapter 1. Overview</h1></div></div></div><p>
The present guide provides an overview of the low&#65279;-&#65279;level <code class="japi">WD_xxx</code>
PCI&#65279;/&#65279;ISA WinDriver APIs. While you are still free to use these
APIs, it is recommended, instead, to use the high&#65279;-&#65279;level <span class="b"><strong>WDC</strong></span> library
APIs, which provide convenient wrappers to the low&#65279;-&#65279;level APIs. The
<span class="b"><strong>WDC</strong></span> APIs are described in detail in the <span class="jprintfilename"><strong>WinDriver PCI Manual</strong></span> (<span class="jprintfilename"><strong>wdpci_man.html</strong></span>).
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
     This function reference is C oriented. The WinDriver C&#65279;#
     
     APIs have been implemented as closely as possible to the C APIs, therefore
     .NET programmers can also use this reference to better understand the
     WinDriver APIs for their selected development language. For the exact API
     implementation and usage examples for your selected language, refer to the
     WinDriver .NET source code.
   </td></tr></table></div><p>
</p></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="PCI_ISA_WD_FUNC_REF"></a>Chapter 2. WD_xxx PCI&#65279;/&#65279;ISA Functions</h1></div></div></div><p>
This chapter describes the basic <code class="jfunc">WD_xxx</code><span class="jfunc">()</span> PCI&#65279;/&#65279;ISA
WinDriver functions.
</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Calling_Sequence_PCI"></a>2.1. API Calling Sequence &#8212; PCI&#65279;/&#65279;ISA</h2></div></div></div><p>
<a class="xref" href="#wd_pci_calling_sequence" title="Figure 2.1. WinDriver PCI&#65279;/&#65279;ISA Calling Sequence"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Figure 2.1</fo:inline></a> demonstrates typical calling sequences
using the basic WinDriver <code class="jfunc">WD_xxx</code><span class="jfunc">()</span> PCI&#65279;/&#65279;ISA functions.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
    Memory addresses can be accessed directly, using the user-mode mapping of
    the address returned by <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_CardRegister</code><span class="japi">()</span></span><a class="xref" href="#WD_CardRegister" title="2.6. WD_CardRegister()"><fo:inline> [2.6]</fo:inline></a></span> (or the kernel
    mapping, when accessing memory from the Kernel PlugIn). Direct memory
    access is more efficient than using <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_Transfer</code><span class="japi">()</span></span><a class="xref" href="#WD_Transfer" title="2.9. WD_Transfer()"><fo:inline> [2.9]</fo:inline></a></span>.
  </li><li class="listitem">
    It is possible (although not recommended) to replace the use of the
    high&#65279;-&#65279;level <code class="jfunc">InterruptEnable</code><span class="jfunc">()</span> convenience
    function<a class="xref" href="#InterruptEnable" title="2.17. InterruptEnable()"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [2.17]</fo:inline></a> with the low&#65279;-&#65279;level
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_IntEnable</code><span class="japi">()</span></span><a class="xref" href="#WD_IntEnable" title="3.2. WD_IntEnable()"><fo:inline> [3.2]</fo:inline></a></span>, <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_IntWait</code><span class="japi">()</span></span><a class="xref" href="#WD_IntWait" title="3.3. WD_IntWait()"><fo:inline> [3.3]</fo:inline></a></span> and
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_IntCount</code><span class="japi">()</span></span><a class="xref" href="#WD_IntCount" title="3.4. WD_IntCount()"><fo:inline> [3.4]</fo:inline></a></span> functions, and replace the call to
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">InterruptDisable</code><span class="japi">()</span></span><a class="xref" href="#InterruptDisable" title="2.18. InterruptDisable()"><fo:inline> [2.18]</fo:inline></a></span>
    with a call to the low&#65279;-&#65279;level
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_IntDisable</code><span class="japi">()</span></span><span> function</span><a class="xref" href="#WD_IntDisable" title="3.5. WD_IntDisable()"><fo:inline> [3.5]</fo:inline></a></span>.<br>
    For more information on the low&#65279;-&#65279;level WinDriver interrupt handling API,
    refer to <a class="xref" href="#Function_Reference_Low_Level" title="Chapter 3. Low&#65279;-&#65279;Level WD_xxx Interrupt Functions"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Chapter 3</fo:inline></a> of the manual.
  </li><li class="listitem">
    WinDriver's general-use APIs, such as <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_DebugAdd</code><span class="japi">()</span></span><a class="xref" href="#WD_DebugAdd" title="5.6. WD_DebugAdd()"><fo:inline> [5.6]</fo:inline></a></span> or
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_Sleep</code><span class="japi">()</span></span><a class="xref" href="#WD_Sleep" title="5.8. WD_Sleep()"><fo:inline> [5.8]</fo:inline></a></span>, can be called anywhere between the calls to
    <code class="jfunc">WD_Open</code><span class="jfunc">()</span> and <code class="jfunc">WD_Close</code><span class="jfunc">()</span>. For more details, refer
    to <a class="xref" href="#wd_gen_funcs" title="Chapter 5. General WD_xxx Functions"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Chapter 5</fo:inline></a>.
  </li></ol></div></td></tr></table></div><div class="figure"><a name="wd_pci_calling_sequence"></a><p class="title"><b>Figure 2.1. WinDriver PCI&#65279;/&#65279;ISA Calling Sequence</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/wd_pci_calling_sequence.png" height="" alt="WinDriver PCI&#65279;/&#65279;ISA Calling Sequence"></div></div></div><br class="figure-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_PciScanCards"></a>2.2. WD_PciScanCards()</h2></div></div></div>
<h5><a name="idp46958323603520"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Detects PCI devices installed on the PCI bus, which conform to the input
criteria (vendor ID and/&#65279;or card ID), and returns the number and location
(bus, slot and function) of the detected devices.
</p>

<h5><a name="idp46958328583040"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_PciScanCards(
    HANDLE hWD,
    WD_PCI_SCAN_CARDS *pPciScan);
</pre>

<h5><a name="idp46958328584656"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pPciScan</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_PCI_SCAN_CARDS*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">searchId</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_PCI_ID</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwVendorId</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwDeviceId</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwCards</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">cardId</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_PCI_ID[WD_PCI_CARDS]</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwVendorId</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwDeviceId</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">cardSlot</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_PCI_SLOT[WD_PCI_CARDS]</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwBus</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwSlot</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwFunction</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46958328623504"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pPciScan</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Pointer to a PCI bus scan information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">searchId</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">PCI card ID information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwVendorId</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    The vendor ID of the PCI cards to detect. If 0, the function will search
    for all PCI card vendor IDs.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwDeviceId</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    The card ID of the PCI cards to detect. If 0, the function will search for
    all PCI card IDs.<br>
    If both <strong class="japib"><code>dwVendorId</code></strong> and <strong class="japib"><code>dwDeviceId</code></strong> are set to
    0 the function will return information regarding all connected PCI cards.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwCards</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Number of cards detected for the specified search criteria set in the
    <strong class="japib"><code>searchId</code></strong> field
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">cardId</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Array of PCI card ID information structures for the detected PCI cards that
    match the search criteria set in the <strong class="japib"><code>searchId</code></strong> field:
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dId.dwVendorId</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Vendor ID</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dId.dwDeviceId</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Card ID</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">cardSlot</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Array of PCI slot information structures for the detected PCI cards that
    match the search criteria set in the <strong class="japib"><code>searchId</code></strong> field:
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwBus</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Bus number (0 based)</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwSlot</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Slot number (0 based)</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwFunction</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Function number (0 based)</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="" align="left" valign="top">
    PCI bus scan options. Can be set to any of the
    <strong class="japib"><code>WD_PCI_SCAN_OPTIONS</code></strong> flags:
    <div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><strong class="japib"><code>WD_PCI_SCAN_DEFAULT</code></strong> &#8212; Scan all PCI buses and
        slots. <span style="white-space:nowrap">This is the default scan option.</span></li><li class="listitem" style="list-style-type: disc"><strong class="japib"><code>WD_PCI_SCAN_BY_TOPOLOGY</code></strong> &#8212; Scan the PCI bus by
        topology.
      </li><li class="listitem" style="list-style-type: disc"><strong class="japib"><code>WD_PCI_SCAN_REGISTERED</code></strong> &#8212; Scan all PCI buses and
        slots but only look for devices that have been registered to work with
        WinDriver.
      </li></ul></div>
  </td></tr></tbody></table></div>

  <h5><a name="idp46958328664096"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958328666448"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen">WD_PCI_SCAN_CARDS pciScan;
WD_PCI_SLOT pciSlot;

BZERO(pciScan);
pciScan.searchId.dwVendorId = 0x12bc;
pciScan.searchId.dwDeviceId = 0x1;
WD_PciScanCards(hWD, &amp;pciScan);
if (pciScan.dwCards &gt; 0) /* Found at least one device */
    pciSlot = pciScan.cardSlot[0]; /* Use the first card found */
else
    printf("No matching PCI devices found\n");
</pre>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_PciScanCaps"></a>2.3. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">WD_PciScanCaps()</span></h2></div></div></div>
<h5><a name="idp46958328671376"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Scans the specified PCI capabilities group of the given PCI slot for the
specified capability (or for all capabilities).
</p>

<h5><a name="idp46958328672976"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_PciScanCaps(
    HANDLE hWD,
    WD_PCI_SCAN_CAPS *pPciScanCaps);
</pre>

<h5><a name="idp46958328674704"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pPciScanCaps</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_PCI_SCAN_CAPS*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pciSlot</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_PCI_SLOT</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwBus</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwSlot</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwFunction</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwCapId</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwNumCaps</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pciCaps</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_PCI_CAP[WD_PCI_MAX_CAPS]</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwCapId</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwCapOffset</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">Output</td></tr></tbody></table></div>

<h5><a name="idp46958331227216"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pPciScanCaps</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Pointer to a PCI capabilities scan structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pciSlot</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">PCI slot information structure</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwBus</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Bus number (0 based)</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwSlot</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Slot number (0 based)</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwFunction</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Function number (0 based)</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwCapId</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    ID of the PCI capability for which to search, or
    <code class="japi">WD_PCI_CAP_ID_ALL</code> to search for all PCI capabilities
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    PCI capabilities scan options. Can be set to any of the
    <strong class="japib"><code>WD_PCI_SCAN_CAPS_OPTIONS</code></strong> flags:<br>
    <div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><strong class="japib"><code>WD_PCI_SCAN_CAPS_BASIC</code></strong> &#8212; Scan the basic PCI
        capabilities. <span style="white-space:nowrap">This is the default scan option.</span></li><li class="listitem" style="list-style-type: disc"><strong class="japib"><code>WD_PCI_SCAN_CAPS_EXTENDED</code></strong> &#8212; Scan the extended
        (PCI Express) PCI capabilities.
      </li></ul></div>
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwNumCaps</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Number of PCI capabilities that match the search criteria set in the
    <strong class="japib"><code>dwCapId</code></strong> and <strong class="japib"><code>dwOptions</code></strong>  fields
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pciCaps</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Array of PCI capability structures for PCI capabilities that match the
    search criteria set in the <strong class="japib"><code>dwCapId</code></strong> and
    <strong class="japib"><code>dwOptions</code></strong>  fields
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwCapId</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">PCI capability ID</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwCapOffset</span></td><td style="" align="left" valign="top">PCI capability register offset</td></tr></tbody></table></div>


  
  <h5><a name="idp46958331260592"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  

<h5><a name="idp46958331262992"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen">WD_PCI_SCAN_CAPS pciScanCaps;
WD_PCI_CAP pciCap;

BZERO(pciScanCaps);
pciScanCaps.pciSlot = pciSlot; /* pciSlot = a WD_PCI_SLOT struct returned by
                                  WD_PciScanCards() in pPciScan-&gt;cardSlot */
pciScanCaps.dwCapId = 0x05; /* Search for the MSI capability */
pciScanCaps.dwOptions = WD_PCI_SCAN_CAPS_BASIC; /* Scan the basic PCI
                                                   capabilities */
WD_PciScanCaps(hWD, &amp;pciScanCaps);
if (pciScanCaps.dwNumCaps &gt; 0) /* Found a matching capability */
{
    pciCap = pciScanCaps.pciCaps[0]; /* Use the first capability found */
}
else
{
    printf("PCI capability 0x%lx not found in the basic PCI capabilities\n",
      pciScanCaps.dwCapId);
}
</pre>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_PciGetCardInfo"></a>2.4. WD_PciGetCardInfo()</h2></div></div></div>
<h5><a name="idp46958331267472"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Retrieves PCI device's resource information (i.e., Memory ranges, I/&#65279;O
ranges, Interrupt lines).
</p>

<h5><a name="idp46958331269088"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_PciGetCardInfo(
    HANDLE hWD,
    WD_PCI_CARD_INFO *pPciCard);
</pre>
<h5><a name="idp46958331270560"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div><div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pPciCard</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_PCI_CARD_INFO*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pciSlot</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_PCI_SLOT</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwBus</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwSlot</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwFunction</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">Card</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_CARD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwItems</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">Item</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_ITEMS[WD_CARD_ITEMS]</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">  &#8226; <span style="">item</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">  &#8226; <span style="">fNotSharable</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">  &#8226; <span style="">I</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">union</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">   * <span style="">Mem</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">struct</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">pPhysicalAddr</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">PHYS_ADDR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">qwBytes</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UINT64</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">pTransAddr</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">KPTR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">pUserDirectAddr</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UPTR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwBar</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwOptions</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">pReserved</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">KPTR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">   * <span style="">IO</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">struct</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">pAddr</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">KPTR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwBytes</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwBar</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">   * <span style="">Int</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">struct</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwInterrupt</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwOptions</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">hInterrupt</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwReserved1</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">pReserved2</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">KPTR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">   * <span style="">Bus</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_BUS</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwBusType</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_BUS_TYPE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwBusNum</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwSlotFunc</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">Output</td></tr></tbody></table></div><h5><a name="idp46958331354480"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div><div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pPciCard</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Pointer to a PCI card information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pciSlot</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">PCI slot information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwBus</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">PCI bus number (0 based)</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwSlot</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">PCI slot number (0 based)</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwFunction</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">PCI function number (0 based)</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">Card</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Card information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwItems</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Number of items detected on the card</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">Item</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Card items information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">  &#8226; <span style="">item</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Item type &#8212; <code class="japi">ITEM_MEMORY</code>, <code class="japi">ITEM_IO</code>,
    <code class="japi">ITEM_INTERRUPT</code>, or <code class="japi">ITEM_BUS</code>
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">  &#8226; <span style="">fNotSharable</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><span class="b"><strong>1</strong></span> &#8212;
          Non-sharable resource; should be locked for exclusive use</li><li class="listitem" style="list-style-type: disc"><span class="b"><strong>0</strong></span> &#8212;
          Sharable resource</li></ul></div>Note: You can modify the value of this field before registering
      the card and its resources using <span style=""><span style=""><code class="japi">WD_CardRegister</code><span class="japi">()</span></span><a class="xref" href="#WD_CardRegister" title="2.6. WD_CardRegister()"><fo:inline> [2.6]</fo:inline></a></span>.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">  &#8226; <span style="">I</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Specific data according to the item type
    <span style="white-space:nowrap">(<strong class="japib"><code>pPciCard-&gt;Card.Item.item</code></strong>)</span>
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">   * <span style="">Mem</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Memory-item descriptor
    <span style="white-space:nowrap">(type=<code class="japi">ITEM_MEMORY</code>)</span>
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">pPhysicalAddr</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    First address of the physical memory range.<br>
    NOTE: For 64-&#65279;bit BARs the value stored in this field may be incorrect,
    due to the 32-&#65279;bit field size.
    
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">qwBytes</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Length of the memory range, in bytes</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwBar</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Base Address Register (BAR) number of the memory range</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">   * <span style="">IO</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    I/&#65279;O-item descriptor <span style="white-space:nowrap">(type=<code class="japi">ITEM_IO</code>)</span>
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">pAddr</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">First address of the I/&#65279;O range</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwBytes</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Length of the I/&#65279;O range, in bytes</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwBar</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Base Address Register (BAR) number for the I/&#65279;O range</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">   * <span style="">Int</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Interrupt-item descriptor
    <span style="white-space:nowrap">(type=<code class="japi">ITEM_INTERRUPT</code>)</span>
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwInterrupt</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Physical interrupt request (IRQ) number</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwOptions</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Interrupt options bit-mask, which can consist of a combination of any of
    the following flags for indicating the interrupt types supported by the
    device.<br>
    The default interrupt type, when none of the following flags is set, is
    legacy edge-triggered interrupts.<br>
    &#8226; <strong class="japib"><code>INTERRUPT_MESSAGE_X</code></strong> &#8212;
  Indicates that the hardware supports Extended Message-Signaled Interrupts (MSI-&#65279;X).<br>
  This option is applicable only to PCI cards on Linux &#8212; see
  information in <span>the <span class="jprintfilename"><strong>WinDriver PCI Manual</strong></span></span>.<br>
    &#8226; <strong class="japib"><code>INTERRUPT_MESSAGE</code></strong> &#8212; On
  Linux, indicates that the hardware supports Message-Signaled Interrupts (MSI).<br>
  On Windows, indicates that the hardware supports MSI or
  MSI-&#65279;X.<br>
  This option is applicable only to PCI cards on Linux and Windows 7 and higher &#8212; see
  information in <span>the <span class="jprintfilename"><strong>WinDriver PCI Manual</strong></span></span>.<br>
    &#8226; <strong class="japib"><code>INTERRUPT_LEVEL_SENSITIVE</code></strong>
  &#8212; Indicates that the hardware supports level-sensitive interrupts.
    
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">   * <span style="">Bus</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Bus-item descriptor <span style="white-space:nowrap">(type=<code class="japi">ITEM_BUS</code>)</span>
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwBusType</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    The card's bus type. For a PCI card the bus type is
    <strong class="japib"><code>WD_BUS_PCI</code></strong>.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwBusNum</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The card's bus number</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwSlotFunc</span></td><td style="" align="left" valign="top">
    A combination of the card's bus slot and function numbers: the lower three
    bits represent the function number and the remaining bits represent the
    slot number. For example: a value of 0x80 (&lt;=&gt; 10000000 binary)
    corresponds to a function number of 0 (lower 3 bits: 000) and a slot number
    of 0x10 (remaining bits: 10000).
  </td></tr></tbody></table></div>
  <h5><a name="idp46958331430704"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958331433056"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    For PCI devices, if the I/&#65279;O, memory and IRQ information is available
    from the Plug&#65279;-&#65279;and&#65279;-&#65279;Play Manager, the information is obtained from there. Otherwise,
    the information is read directly from the PCI configuration registers.
    Note: for Windows, you must have an <span class="jprintfilename"><strong>inf</strong></span>
    file installed.
  </li><li class="listitem" style="list-style-type: disc">
    If the IRQ is obtained from the Plug&#65279;-&#65279;and&#65279;-&#65279;Play Manager, it is mapped and therefore
    may differ from the physical IRQ.
  </li></ul></div>

<h5><a name="idp46958331436720"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen">WD_PCI_CARD_INFO pciCardInfo;
WD_CARD Card;

BZERO(pciCardInfo);
pciCardInfo.pciSlot = pciSlot;
WD_PciGetCardInfo(hWD, &amp;pciCardInfo);
if (pciCardInfo.Card.dwItems!=0) /* At least one item was found */
{
    Card = pciCardInfo.Card;
}
else
{
    printf("Failed fetching PCI card information\n");
}
</pre>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_PciConfigDump"></a>2.5. WD_PciConfigDump()</h2></div></div></div>
<h5><a name="idp46958331440976"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Reads/writes from/to the PCI configuration space of a selected PCI card or the
extended configuration space of a selected PCI Express card.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
  Access to the PCI Express extended configuration space is supported on
target platforms that support such access (e.g., Windows and Linux). For such platforms, all <em class="it">PCI</em> references in the
  following documentation include PCI Express as well.
  </td></tr></table></div>
<h5><a name="idp46958331443568"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_PciConfigDump(
    HANDLE hWD,
    WD_PCI_CONFIG_DUMP *pConfig);
</pre>

<h5><a name="idp46958331445296"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pConfig</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_PCI_CONFIG_DUMP*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pciSlot</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_PCI_SLOT</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwBus</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwSlot</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwFunction</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pBuffer</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">PVOID</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input/Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOffset</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwBytes</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">fIsRead</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwResult</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">Output</td></tr></tbody></table></div>

<h5><a name="idp46958331475600"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pConfig</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Pointer to a PCI configuration space information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pciSlot</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">PCI slot information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwBus</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">PCI bus number (0 based)</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwSlot</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">PCI slot number (0 based)</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwFunction</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">PCI function number (0 based)</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pBuffer</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    A pointer to the data that is read from the PCI configuration space (if
    <strong class="japib"><code>fIsRead</code></strong> is <code class="japi">TRUE</code>) or a pointer to the data to
    write to the PCI configuration space (if <strong class="japib"><code>fIsRead</code></strong> is
    <code class="japi">FALSE</code>)
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOffset</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    The offset of the specific register(s) in the PCI configuration space to
    read/write from/to
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwBytes</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Number of bytes to read/write</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">fIsRead</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    If <strong class="japib"><code>TRUE</code></strong> &#8212; read from the PCI configuration space;
    <br>
    If <strong class="japib"><code>FALSE</code></strong> &#8212; write to the PCI configuration space
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwResult</span></td><td style="" align="left" valign="top">
    Result of the PCI configuration space read/write. Can be any of the
    following <code class="japi">PCI_ACCESS_RESULT</code> enumeration values:<br>
    &#8226; <strong class="japib"><code>PCI_ACCESS_OK</code></strong> &#8212; read/write succeeded<br>
    &#8226; <strong class="japib"><code>PCI_ACCESS_ERROR</code></strong> &#8212; read/write failed<br>
    &#8226; <strong class="japib"><code>PCI_BAD_BUS</code></strong> &#8212; the specified bus does not exist
      <br>
    &#8226; <strong class="japib"><code>PCI_BAD_SLOT</code></strong> &#8212; the specified slot or function
      does not exist
  </td></tr></tbody></table></div>

  <h5><a name="idp46958331507616"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958331509968"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen">WD_PCI_CONFIG_DUMP pciConfig;
DWORD dwStatus;
WORD aBuffer[2];

BZERO(pciConfig);
pciConfig.pciSlot.dwBus = 0;
pciConfig.pciSlot.dwSlot = 3;
pciConfig.pciSlot.dwFunction = 0;
pciConfig.pBuffer = aBuffer;
pciConfig.dwOffset = 0;
pciConfig.dwBytes = sizeof(aBuffer);
pciConfig.fIsRead = TRUE;

dwStatus = WD_PciConfigDump(hWD, &amp;pciConfig);
if (dwStatus)
{
    printf("WD_PciConfigDump failed: %s\n", Stat2Str(dwStatus));
}
else
{
    printf("Card in Bus 0, Slot 3, Funcion 0 has Vendor ID %x "
        "Device ID %x\n", aBuffer[0], aBuffer[1]);
}
</pre>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_CardRegister"></a>2.6. WD_CardRegister()</h2></div></div></div>
<h5><a name="idp46958331514048"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Card registration function.<br>
The function
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    Maps the physical memory ranges to be accessed by kernel-mode processes and
    user-mode applications.
  </li><li class="listitem" style="list-style-type: disc">
    Verifies that none of the registered device resources (set in
    <strong class="japib"><code>pCardReg-&#65279;&gt;Card.Item</code></strong>) are already locked for
    exclusive use.

    <div class="info" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/info.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
    A resource can be locked for exclusive use by setting the
    <code class="japi">fNotSharable</code> field of its <code class="japi">WD_ITEMS</code> structure
    (<strong class="japib"><code>pCardReg-&#65279;&gt;Card.Item[i]</code></strong>) to 1, before calling
    <code class="jfunc">WD_CardRegister</code><span class="jfunc">()</span>.
    </td></tr></table></div></li><li class="listitem" style="list-style-type: disc">
    Saves data regarding the interrupt request (IRQ) number and the interrupt
    type in internal data structures; this data will later be used by
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">InterruptEnable</code><span class="japi">()</span></span><a class="xref" href="#InterruptEnable" title="2.17. InterruptEnable()"><fo:inline> [2.17]</fo:inline></a></span> and/&#65279;or <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_IntEnable</code><span class="japi">()</span></span><a class="xref" href="#WD_IntEnable" title="3.2. WD_IntEnable()"><fo:inline> [3.2]</fo:inline></a></span>.
  </li></ul></div><p>
</p>

<h5><a name="idp46958331525376"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_CardRegister(
    HANDLE hWD,
    WD_CARD_REGISTER *pCardReg);
</pre>
<h5><a name="idp46958331527264"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div><div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pCardReg</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_CARD_REGISTER*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">Card</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_CARD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwItems</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">Item</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_ITEMS[WD_CARD_ITEMS]</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">  &#8226; <span style="">item</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">  &#8226; <span style="">fNotSharable</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">  &#8226; <span style="">I</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">union</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">   * <span style="">Mem</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">struct</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">pPhysicalAddr</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">PHYS_ADDR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">qwBytes</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UINT64</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">pTransAddr</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">KPTR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">pUserDirectAddr</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UPTR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwBar</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwOptions</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">pReserved</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">KPTR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">   * <span style="">IO</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">struct</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">pAddr</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">KPTR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwBytes</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwBar</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">   * <span style="">Int</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">struct</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwInterrupt</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwOptions</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">hInterrupt</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwReserved1</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">pReserved2</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">KPTR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">   * <span style="">Bus</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_BUS</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwBusType</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_BUS_TYPE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwBusNum</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwSlotFunc</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">fCheckLockOnly</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hCard</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">cName</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">CHAR[32]</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">cDescription</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">CHAR[100]</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div><h5><a name="idp46958331614368"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div><div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pCardReg</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Pointer to a card registration information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">Card</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Card information structure. For a PCI device it is recommended to
    pass the card structure received from a previous call to
    <span style=""><span style=""><code class="japi">WD_PciGetCardInfo</code><span class="japi">()</span></span><a class="xref" href="#WD_PciGetCardInfo" title="2.4. WD_PciGetCardInfo()"><fo:inline> [2.4]</fo:inline></a></span> &#8212; refer to
    <a class="xref" href="#pci_get_info_before_reg"><fo:inline>Remark 1</fo:inline></a> in this section.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwItems</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Number of items detected on the card</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">Item</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Card items information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">  &#8226; <span style="">item</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Item type &#8212; <code class="japi">ITEM_MEMORY</code>, <code class="japi">ITEM_IO</code>,
    <code class="japi">ITEM_INTERRUPT</code>, or <code class="japi">ITEM_BUS</code>
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">  &#8226; <span style="">fNotSharable</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><span class="b"><strong>1</strong></span> &#8212;
          Non-sharable resource; should be locked for exclusive use</li><li class="listitem" style="list-style-type: disc"><span class="b"><strong>0</strong></span> &#8212;
          Sharable resource</li></ul></div></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">  &#8226; <span style="">I</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Specific data according to the item type
    <span style="white-space:nowrap">(<strong class="japib"><code>pCardReg-&gt;Card.Item.item</code></strong>)</span>
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">   * <span style="">Mem</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Memory-item descriptor
    <span style="white-space:nowrap">(type=<code class="japi">ITEM_MEMORY</code>)</span>
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">pPhysicalAddr</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    First address of the physical memory range.<br>
    For PCI, this field is ignored and the physical address is retrieved
    directly from the card, because the 32-&#65279;bit field size cannot correctly
    store 64-&#65279;bit addresses.
      
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">qwBytes</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Length (in bytes) of the memory range</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">pTransAddr</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Kernel-mode mapping of the memory range's physical base address.<br>
    This address should be used when setting the memory address in calls to
    <span style=""><span style=""><code class="japi">WD_Transfer</code><span class="japi">()</span></span><a class="xref" href="#WD_Transfer" title="2.9. WD_Transfer()"><fo:inline> [2.9]</fo:inline></a></span> or <span style=""><span style=""><code class="japi">WD_MultiTransfer</code><span class="japi">()</span></span><a class="xref" href="#WD_MultiTransfer" title="2.10. WD_MultiTransfer()"><fo:inline> [2.10]</fo:inline></a></span> or when
    accessing memory directly from a Kernel PlugIn driver.
   </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">pUserDirectAddr</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    User-mode mapping of the memory range's physical base address.<br>
    This address should be used for accessing a memory address directly from a
    user-mode process.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwBar</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Base Address Register number of PCI card</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwOptions</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    
    A bit-mask of memory-item registration flags &#8212; a combination of any of the of the following
    <code class="japi">WD_ITEM_MEM_OPTIONS</code> enumeration values:
    
    <div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
        <strong class="japib"><code>WD_ITEM_MEM_DO_NOT_MAP_KERNEL</code></strong>: Avoid mapping the item's
        physical memory to the kernel address space
        (<code class="japi">I.Mem.pTransAddr</code> not set); map the memory only to the
        user-mode virtual address space (mapped base address:
        <code class="japi">I.Mem.pUserDirectAddr</code>). For more information, refer to
        <span>
          <a class="xref" href="#card_reg_remark_WD_ITEM_MEM_DO_NOT_MAP_KERNEL"><fo:inline>Remark 2</fo:inline></a>
          in this section.
        </span>
        
        <br>
        NOTE: This flag is applicable only to memory items.
        </li><li class="listitem" style="list-style-type: disc">
        <strong class="japib"><code>WD_ITEM_MEM_ALLOW_CACHE</code></strong> (Windows): Map the item's
        physical memory (base address: <code class="japi">I.Mem.pPhysicalAddr</code>) as
        cached.<br>
        NOTE: This flag is applicable only to memory items that pertain to the
        host's RAM, as opposed to local memory on the card.
        </li></ul></div>
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">   * <span style="">IO</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    I/&#65279;O-item descriptor <span style="white-space:nowrap">(type=<code class="japi">ITEM_IO</code>)</span>
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">pAddr</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">First address of the I/&#65279;O range</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwBytes</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Length of the I/&#65279;O range, in bytes</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwBar</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Base Address Register (BAR) number for the I/&#65279;O range</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">   * <span style="">Int</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Interrupt-item descriptor
    <span style="white-space:nowrap">(type=<code class="japi">ITEM_INTERRUPT</code>)</span>
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwInterrupt</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Physical interrupt request (IRQ) number</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwOptions</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Interrupt options bit-mask, which can consist of a combination of any of
    the following flags:<br>
    <span class="b"><strong><span class="underline">Interrupt type flags:</span></strong></span><br>
    NOTE: In the call to <code class="jfunc">WD_CardRegister</code><span class="jfunc">()</span> the interrupt type
    flags are appliable only to ISA devices. For Plug&#65279;-&#65279;and&#65279;-&#65279;Play hardware (PCI) the 
    function retrieves the supported interrupt types independently.<br>
    &#8226; <strong class="japib"><code>INTERRUPT_LEVEL_SENSITIVE</code></strong> &#8212; indicates that the
      device supports level-sensitive interrupts.<br>
    &#8226; <strong class="japib"><code>INTERRUPT_LATCHED</code></strong> &#8212; indicates that the device
      supports legacy edge-triggered interrupts.<br>
      The value of this flag is zero, therefore it is applicable only when no
      other interrupt flag is set.<br>
      
    <span class="b"><strong><span class="underline">Miscellaneous interrupt flags:</span></strong></span>
    <br>
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">hInterrupt</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    An interrupt handle to be used in calls to <span style=""><span style=""><code class="japi">InterruptEnable</code><span class="japi">()</span></span><a class="xref" href="#InterruptEnable" title="2.17. InterruptEnable()"><fo:inline> [2.17]</fo:inline></a></span> or
    <span style=""><span style=""><code class="japi">WD_IntEnable</code><span class="japi">()</span></span><a class="xref" href="#WD_IntEnable" title="3.2. WD_IntEnable()"><fo:inline> [3.2]</fo:inline></a></span>.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">   * <span style="">Bus</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Bus-item descriptor <span style="white-space:nowrap">(type=<code class="japi">ITEM_BUS</code>)</span>
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwBusType</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    The card's bus type &#8212; any of the following <code class="japi">WD_BUS_TYPE</code>
    enumeration values:<br>
    &#8226; <strong class="japib"><code>WD_BUS_PCI</code></strong> &#8212; PCI bus<br>
    &#8226; <strong class="japib"><code>WD_BUS_ISA</code></strong> &#8212; ISA bus <br>
    &#8226; <strong class="japib"><code>WD_BUS_EISA</code></strong> &#8212; EISA bus
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwBusNum</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Bus number</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">    &#8226; <span style="">dwSlotFunc</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    A combination of the card's bus slot/socket and function numbers: the
    lower three bits represent the function number and the remaining bits
    represent the slot/socket number. For example: a value of 0x80 (&lt;=&gt;
    10000000 binary) corresponds to a function number of 0 (lower 3 bits:
    000) and a slot/socket number of 0x10 (remaining bits: 10000).
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">fCheckLockOnly</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Set to <strong class="japib"><code>TRUE</code></strong> to check if the defined card resources can be
    locked (in which case <strong class="japib"><code>hCard</code></strong> will be set to 1), or whether
    they are already locked for exclusive use. When this flag is set to
    <code class="japi">TRUE</code> the function doesn't actually locking the specified
    resources.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hCard</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Handle to the card resources defined in the <strong class="japib"><code>Card</code></strong> field.
    This handle should later be passed to <span style=""><span style=""><code class="japi">WD_CardUnregister</code><span class="japi">()</span></span><a class="xref" href="#WD_CardUnregister" title="2.8. WD_CardUnregister()"><fo:inline> [2.8]</fo:inline></a></span>
    in order to free the resources. If the card registration fails, this field
    is set to 0.<br> When <strong class="japib"><code>fCheckLockOnly</code></strong> is set to
    <code class="japi">TRUE</code>, <code class="japi">hCard</code> is set to 1 if the card's resources
    can be be locked successfully (i.e., the resources aren't currently locked
    for exclusive use), or 0 otherwise.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Should always be set to zero</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">cName</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Card name (optional)
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">cDescription</span></td><td style="" align="left" valign="top">Card description (optional)</td></tr></tbody></table></div>
  <h5><a name="idp46958331727568"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  <h5><a name="idp46958331729664"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><a name="pci_get_info_before_reg"></a>
     For PCI the <code class="japi">cardReg.Card</code> input resources information should be
     retrieved from the Plug&#65279;-&#65279;and&#65279;-&#65279;Play Manager via <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_PciGetCardInfo</code><span class="japi">()</span></span><a class="xref" href="#WD_PciGetCardInfo" title="2.4. WD_PciGetCardInfo()"><fo:inline> [2.4]</fo:inline></a></span>.
    </li><li class="listitem"><p><a name="card_reg_remark_WD_ITEM_MEM_DO_NOT_MAP_KERNEL"></a>
    If your card has a large memory range that cannot be fully mapped to the
    kernel address space, you can set the
    <strong class="japib"><code>WD_ITEM_MEM_DO_NOT_MAP_KERNEL</code></strong> flag in the
    <code class="japi">I.Mem.dwOptions</code> field of the relevant <code class="japi">WD_ITEMS</code>
    memory resource structure
        that you pass to the card registration function
        (<code class="japi">pCardReg-&#65279;&gt;Card.Item[i].I.Mem.dwOptions</code>).
      
    This flag instructs the function to map the memory range only to the
    user-mode virtual address space, and not to the kernel address space.
    
      (For PCI devices, you can modify the relevant item in the
      card information structure (<code class="japi">pCard</code>) that you received from
      <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_PciGetCardInfo</code><span class="japi">()</span></span><a class="xref" href="#WD_PciGetCardInfo" title="2.4. WD_PciGetCardInfo()"><fo:inline> [2.4]</fo:inline></a></span>
      before passing this structure to <code class="jfunc">WD_CardRegister</code><span class="jfunc">()</span>.)
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
    Note that if you select to set the
    <code class="japi">WD_ITEM_MEM_DO_NOT_MAP_KERNEL</code> flag,
    <code class="jfunc">WD_CardRegister</code><span class="jfunc">()</span> will not update the item's
        <code class="japi">pTransAddr</code> field with a kernel mapping of the memory's
        base address,
      
    and you will therefore not be able to rely on this mapping in calls to
    WinDriver APIs &#8212; namely interrupt handling APIs or any API called from a
    Kernel PlugIn driver.
    </td></tr></table></div></li><li class="listitem">
    <code class="jfunc">WD_CardRegister</code><span class="jfunc">()</span> enables the user to map the card memory
    resources into virtual memory and access them as regular pointers.
    </li></ol></div>
<h5><a name="idp46958331745568"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen">WD_CARD_REGISTER cardReg;
BZERO(cardReg);
cardReg.Card.dwItems = 1;
cardReg.Card.Item[0].item = ITEM_IO;
cardReg.Card.Item[0].fNotSharable = 1;
cardReg.Card.Item[0].I.IO.pAddr = 0x378;
cardReg.Card.Item[0].I.IO.dwBytes = 8;
WD_CardRegister(hWD, &amp;cardReg);
if (cardReg.hCard == 0)
{
    printf("Failed locking device\n");
    return FALSE;
}
</pre>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_CardCleanupSetup"></a>2.7. WD_CardCleanupSetup()</h2></div></div></div>
<h5><a name="idp46958331749232"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Sets a list of transfer cleanup commands to be performed for the specified card
on any of the following occasions:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    The application exits abnormally.
  </li><li class="listitem" style="list-style-type: disc">
    The application exits normally but without unregistering the specified
    card.
  </li><li class="listitem" style="list-style-type: disc">
    If the <code class="japi">WD_FORCE_CLEANUP</code> flag is set in the
    <code class="japi">dwOptions</code> parameter, the cleanup commands will also be
    performed when the specified card is unregistered.
  </li></ul></div><p>
</p>

<h5><a name="idp46958331753520"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_CardCleanupSetup(
    HANDLE hWD,
    WD_CARD_CLEANUP *pCardCleanup)
</pre>

<h5><a name="idp46958331755248"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pCardCleanup</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_CARD_CLEANUP*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hCard</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">Cmds</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_TRANSFER*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwCmds</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46958331774320"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pCardCleanup</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Pointer to a card clean-up information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hCard</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Handle to the relevant card as received from <span style=""><span style=""><code class="japi">WD_CardRegister</code><span class="japi">()</span></span><a class="xref" href="#WD_CardRegister" title="2.6. WD_CardRegister()"><fo:inline> [2.6]</fo:inline></a></span>
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">Cmds</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Pointer to an array of cleanup transfer commands to be performed
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwCmds</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Number of cleanup commands in the <strong class="japib"><code>Cmds</code></strong> array</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">bForceCleanup</span></td><td style="" align="left" valign="top">
    <p>
    If <strong class="japib"><code>0</code></strong>: The cleanup transfer commands (<code class="japi">Cmd</code>) will
    be performed in either of the following cases:<br>
    &#8226; When the application exist abnormally.<br>
    &#8226; When the application exits normally but without calling
      <span style=""><span style=""><code class="japi">WD_CardUnregister</code><span class="japi">()</span></span><a class="xref" href="#WD_CardUnregister" title="2.8. WD_CardUnregister()"><fo:inline> [2.8]</fo:inline></a></span> to unregister the card.<br>
    </p>
    <p>
    If the <strong class="japib"><code>WD_FORCE_CLEANUP</code></strong> flag is set: The cleanup transfer
    commands will be performed both in the two cases described above, as well
    as in the following case:<br>
    &#8226; When <span style=""><span style=""><code class="japi">WD_CardUnregister</code><span class="japi">()</span></span><a class="xref" href="#WD_CardUnregister" title="2.8. WD_CardUnregister()"><fo:inline> [2.8]</fo:inline></a></span> is called to unregister the
      card.
    </p>
  </td></tr></tbody></table></div>

  <h5><a name="idp46958331801728"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958331804080"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<p>
You should call this function right after calling <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_CardRegister</code><span class="japi">()</span></span><a class="xref" href="#WD_CardRegister" title="2.6. WD_CardRegister()"><fo:inline> [2.6]</fo:inline></a></span>.
</p>

<h5><a name="idp46958331807920"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>
<pre class="screen">WD_CARD_CLEANUP cleanup;
BZERO(cleanup);

/* Set-up the cleanup struct with the cleanup information */

dwStatus = WD_CardCleanupSetup(hWD, &amp;cleanup);
if (dwStatus)
{
    printf("WD_CardCleanupSetup failed: %s\n", Stat2Str(dwStatus));
}
</pre>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_CardUnregister"></a>2.8. WD_CardUnregister()</h2></div></div></div>
<h5><a name="idp46958331811376"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Unregisters a device and frees the resources allocated to it.
</p>

<h5><a name="idp46958331812848"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_CardUnregister(
    HANDLE hWD,
    WD_CARD_REGISTER *pCardReg);
</pre>

<h5><a name="idp46958331814576"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pCardReg</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_CARD_REGISTER*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">Card</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_CARD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">fCheckLockOnly</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hCard</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">cName</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">CHAR[32]</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">cDescription</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">CHAR[100]</td><td style="" align="left" valign="top">N/&#65279;A</td></tr></tbody></table></div>

<h5><a name="idp46958331838192"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pCardReg</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
     Pointer to a card registration information structure
   </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hCard</span></td><td style="" align="left" valign="top">
     Handle to the card to unregister, as received from
     <span style=""><span style=""><code class="japi">WD_CardRegister</code><span class="japi">()</span></span><a class="xref" href="#WD_CardRegister" title="2.6. WD_CardRegister()"><fo:inline> [2.6]</fo:inline></a></span>.
   </td></tr></tbody></table></div>

  <h5><a name="idp46958331851264"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958331853616"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen">WD_CardUnregister(hWD, &amp;cardReg);</pre>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_Transfer"></a>2.9. WD_Transfer()</h2></div></div></div>
<h5><a name="idp46958331857024"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Executes a single read/write instruction to an I/&#65279;O port or to a memory
address.
</p>

<h5><a name="idp46958331858608"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_Transfer(
    HANDLE hWD,
    WD_TRANSFER *pTrans);
</pre>

<h5><a name="idp46958331860320"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pTrans</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_TRANSFER*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">cmdTrans</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pPort</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">KPTR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwBytes</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">fAutoinc</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">Data</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">union</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">Byte</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">BYTE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input/Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">Word</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input/Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">Dword</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UINT32</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input/Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">Qword</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UINT64</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input/Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top"> * <span style="">pBuffer</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">PVOID</td><td style="" align="left" valign="top">Input/Output</td></tr></tbody></table></div>

<h5><a name="idp46958331895168"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pTrans</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Pointer to a transfer information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">cmdTrans</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    <p>
    A value indicating the type of transfer to perform &#8212; see definition
    of the <code class="japi">WD_TRANSFER_CMD</code> enumeration in
    <span class="jprintfilename"><strong>windrvr.h</strong></span>.<br>
    </p>
    <p>
    In calls to <code class="jfunc">WD_Transfer</code><span class="jfunc">()</span> the transfer command should be
    a read/write transfer command that conforms to the following
  format: <strong class="japib"><code>&lt;dir&gt;&lt;p&gt;_[S]&lt;size&gt;</code></strong><br>
  Explanation:<br><strong class="japib"><code>&lt;dir&gt;</code></strong>: <strong class="japib"><code>R</code></strong> for read, <strong class="japib"><code>W</code></strong> for
  write <br><strong class="japib"><code>&lt;p&gt;</code></strong>: <strong class="japib"><code>P</code></strong> for I/&#65279;O, <strong class="japib"><code>M</code></strong> for
  memory <br><strong class="japib"><code>&lt;S&gt;</code></strong>: signifies a string (block) transfer, as opposed to
  a single transfer <br><strong class="japib"><code>&lt;size&gt;</code></strong>: BYTE, WORD, DWORD or QWORD
.
    </p>
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pPort</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    <p>
    The memory or I/&#65279;O address to access.<br>
    </p>
    <p>
    For a memory transfer, use the kernel-mapping of the base address received
    from <span style=""><span style=""><code class="japi">WD_CardRegister</code><span class="japi">()</span></span><a class="xref" href="#WD_CardRegister" title="2.6. WD_CardRegister()"><fo:inline> [2.6]</fo:inline></a></span> in
    <code class="japi">pCardReg-&#65279;&gt;Card.Item[i]I.Mem.pTransAddr</code> (where 'i' is
    the index of the relevant memory item) + the desired offset from the
    beginning of the address range.
    </p>
    <p>
    For an I/&#65279;O transfer, use the base address received from
    <span style=""><span style=""><code class="japi">WD_CardRegister</code><span class="japi">()</span></span><a class="xref" href="#WD_CardRegister" title="2.6. WD_CardRegister()"><fo:inline> [2.6]</fo:inline></a></span> in
    <code class="japi">pCardReg-&#65279;&gt;Card.Item[i]I.IO.pAddr</code> (where 'i' is the
    index of the relevant I/&#65279;O item) + the desired offset from the beginning
    of the address range.
    </p>
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwBytes</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Used in string transfers &#8212; number of bytes to transfer
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">fAutoinc</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Used for string transfers.<br>
    If <strong class="japib"><code>TRUE</code></strong>, I/&#65279;O or memory address should be incremented for
    transfer.<br>
    If <strong class="japib"><code>FALSE</code></strong>, all data is transferred to the same port/address.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Must be set to 0</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">Data</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    The transfer data &#8212; input for read transfers, output for write
    transfers:
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">Byte</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Used for 8-bit transfers
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">Word</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Used for 16-bit transfers</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">Dword</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Used for 32-&#65279;bit transfers</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">Qword</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Used for 64-&#65279;bit transfers</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top"> * <span style="">pBuffer</span></td><td style="" align="left" valign="top">Used for string (block) transfers</td></tr></tbody></table></div>

  <h5><a name="idp46958331941232"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958331943584"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    64-&#65279;bit data transfers (QWORD) are available only for memory string
    transfers.<br>
    Such transfers require 64-&#65279;bit enabled PCI device, a 64-&#65279;bit PCI bus, and
    an x86 CPU running under any of the operating systems supported by WinDriver.
    (Note: 64-&#65279;bit data transfers performed with <code class="jfunc">WD_Transfer</code><span class="jfunc">()</span> do
    not require 64-&#65279;bit operating system/CPU).
  </li><li class="listitem" style="list-style-type: disc">
    When using <code class="jfunc">WD_Transfer</code><span class="jfunc">()</span>, it is important to align the base
    address according to the size of the data type, especially when issuing
    string transfer commands. Otherwise, the transfers are split into smaller
    portions. The easiest way to align data is to use basic types when defining
    a buffer, i.e.:

<pre class="screen">BYTE buf[len];    /* For BYTE transfers - not aligned */
WORD buf[len];    /* For WORD transfers - aligned on 2-byte boundary */
UINT32 buf[len];  /* For DWORD transfers - aligned on 4-byte boundary */
UINT64 buf[len];  /* For QWORD transfers - aligned on 8-byte boundary */
</pre></li></ul></div>

<h5><a name="idp46958331948992"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen">WD_TRANSFER Trans;
BYTE read_data;

BZERO(Trans);
Trans.cmdTrans = RP_BYTE; /* Read Port BYTE */
Trans.pPort = 0x210;
WD_Transfer(hWD, &amp;Trans);
read_data = Trans.Data.Byte;
</pre>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_MultiTransfer"></a>2.10. WD_MultiTransfer()</h2></div></div></div>
<h5><a name="idp46958331952432"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Executes multiple read/write instructions to I/&#65279;O ports and/&#65279;or memory
addresses.
</p>

<h5><a name="idp46958331954256"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_MultiTransfer(
    HANDLE hWD,
    WD_TRANSFER *pTransferArray,
    DWORD dwNumTransfers);
</pre>

<h5><a name="idp46958331956000"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pTransferArray</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_TRANSFER*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">cmdTrans</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pPort</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">KPTR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwBytes</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">fAutoinc</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">Data</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">union</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">Byte</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">BYTE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input/Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">Word</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input/Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">Dword</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UINT32</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input/Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">Qword</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UINT64</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input/Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">pBuffer</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">PVOID</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input/Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">dwNumTransfers</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46958331992384"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pTransferArray</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Pointer to a beginning of an array of transfer information structures:
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">cmdTrans</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    <p>
    A value indicating the type of transfer to perform &#8212; see definition
    of the <code class="japi">WD_TRANSFER_CMD</code> enumeration in
    <span class="jprintfilename"><strong>windrvr.h</strong></span>.
    </p>
    <p>
    In calls to <code class="jfunc">WD_MultiTransfer</code><span class="jfunc">()</span> the transfer command should be
    a read/write transfer command that conforms to the following
  format: <strong class="japib"><code>&lt;dir&gt;&lt;p&gt;_[S]&lt;size&gt;</code></strong><br>
  Explanation:<br><strong class="japib"><code>&lt;dir&gt;</code></strong>: <strong class="japib"><code>R</code></strong> for read, <strong class="japib"><code>W</code></strong> for
  write <br><strong class="japib"><code>&lt;p&gt;</code></strong>: <strong class="japib"><code>P</code></strong> for I/&#65279;O, <strong class="japib"><code>M</code></strong> for
  memory <br><strong class="japib"><code>&lt;S&gt;</code></strong>: signifies a string (block) transfer, as opposed to
  a single transfer <br><strong class="japib"><code>&lt;size&gt;</code></strong>: BYTE, WORD, DWORD or QWORD
.
    </p>
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pPort</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    <p>
    The memory or I/&#65279;O address to access.
    </p>
    <p>
    For a memory transfer, use the kernel-mapping of the base address received
    from <span style=""><span style=""><code class="japi">WD_CardRegister</code><span class="japi">()</span></span><a class="xref" href="#WD_CardRegister" title="2.6. WD_CardRegister()"><fo:inline> [2.6]</fo:inline></a></span> in
    <code class="japi">pCardReg-&#65279;&gt;Card.Item[i]I.Mem.pTransAddr</code> (where 'i' is
    the index of the relevant memory item) + the desired offset from the
    beginning of the address range.<br>
    </p>
    <p>
    For an I/&#65279;O transfer, use the base address received from
    <span style=""><span style=""><code class="japi">WD_CardRegister</code><span class="japi">()</span></span><a class="xref" href="#WD_CardRegister" title="2.6. WD_CardRegister()"><fo:inline> [2.6]</fo:inline></a></span> in
    <code class="japi">pCardReg-&#65279;&gt;Card.Item[i]I.IO.pAddr</code> (where 'i' is the
    index of the relevant I/&#65279;O item) + the desired offset from the beginning
    of the address range.
    </p>
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwBytes</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Used in string transfers &#8212; number of bytes to transfer
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">fAutoinc</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Used for string transfers.<br>
    If <strong class="japib"><code>TRUE</code></strong>, I/&#65279;O or memory address should be incremented for
    transfer.<br>
    If <strong class="japib"><code>FALSE</code></strong>, all data is transferred to the same port/address.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Must be set to 0</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">Data</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    The transfer data &#8212; input for read transfers, output for write
    transfers:
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">Byte</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Used for 8-bit transfers</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">Word</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Used for 16-bit transfers</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">Dword</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Used for 32-&#65279;bit transfers</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">Qword</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Used for 64-&#65279;bit transfers</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">pBuffer</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Used for string (block) transfers</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">dwNumTransfers</td><td style="" align="left" valign="top">
    The number of transfers to perform (the <strong class="japib"><code>pTransferArray</code></strong>
    array should contain at least <code class="japi">dwNumTransfers</code> elements)
  </td></tr></tbody></table></div>

  <h5><a name="idp46958332040208"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958332042560"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    See <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_Transfer</code><span class="japi">()</span></span><a class="xref" href="#WD_Transfer" title="2.9. WD_Transfer()"><fo:inline> [2.9]</fo:inline></a></span> remarks.
  </li><li class="listitem" style="list-style-type: disc">
    This function is not supported in Visual Basic.
  </li></ul></div>

<h5><a name="idp46958332047536"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen">WD_TRANSFER Trans[4];
DWORD dwResult;
char *cData = "Message to send\n";

BZERO(Trans);
Trans[0].cmdTrans = WP_WORD;  /* Write Port WORD */
Trans[0].pPort = 0x1e0;
Trans[0].Data.Word = 0x1023;

Trans[1].cmdTrans = WP_WORD;
Trans[1].pPort = 0x1e0;
Trans[1].Data.Word = 0x1022;

Trans[2].cmdTrans = WP_SBYTE; /* Write Port String BYTE */
Trans[2].pPort = 0x1f0;
Trans[2].dwBytes = strlen(cdata);
Trans[2].fAutoinc = FALSE;
Trans[2].dwOptions = 0;
Trans[2].Data.pBuffer = cData;

Trans[3].cmdTrans = RP_DWORD; /* Read Port Dword */
Trans[3].pPort = 0x1e4;

WD_MultiTransfer(hWD, &amp;Trans, 4);
dwResult = Trans[3].Data.Dword;
</pre>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_DMALock"></a>2.11. WD_DMALock()</h2></div></div></div>
<h5><a name="idp46958332051856"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Enables contiguous-buffer or Scatter/&#65279;Gather DMA.
</p>
<p>
For contiguous-buffer DMA, the function allocates a DMA buffer and returns mappings
of the allocated buffer to physical address space and to user-mode and kernel
virtual address spaces.
</p><p>
For Scatter/&#65279;Gather DMA, the function receives the address of a data buffer allocated in
the user-mode, locks it for DMA, and returns the corresponding physical
mappings of the locked DMA pages. On Windows the function also returns a
kernel-mode mapping of the buffer.
</p>
<h5><a name="idp46958332054912"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_DMALock(
    HANDLE hWD,
    WD_DMA *pDma);
</pre>

<h5><a name="idp46958332056544"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pDma</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_DMA*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hDma</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pUserAddr</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">PVOID</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input/Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pKernelAddr</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">KPTR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwBytes</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwPages</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input/Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hCard</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">Page</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_DMA_PAGE[WD_DMA_PAGES]</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">pPhysicalAddr</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DMA_ADDR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwBytes</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">Output</td></tr></tbody></table></div>
<h5><a name="idp46958332088864"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div><div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pDma</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Pointer to a DMA information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hDma</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    DMA buffer handle, which should be passed to
    <span style=""><span style=""><code class="japi">WD_DMAUnlock</code><span class="japi">()</span></span><a class="xref" href="#WD_DMAUnlock" title="2.12. WD_DMAUnlock()"><fo:inline> [2.12]</fo:inline></a></span> when
    unlocking the DMA buffer, or 0 if the DMA lock failed
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pUserAddr</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Virtual user-mode mapped DMA buffer address. Input in the case of Scatter/&#65279;Gather
    and output in the case of contiguous buffer DMA.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pKernelAddr</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Kernel-mode mapped DMA buffer address. Relevant only for contiguous-buffer DMA
    (<code class="japi">dwOptions | DMA_KERNEL_BUFFER_ALLOC</code>) and for Scatter/&#65279;Gather DMA on
    Windows.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwBytes</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    The size of the DMA buffer, in bytes
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    DMA options bit-mask, which can consist of a combination of any of the
    following flags:<br>
    &#8226; <strong class="japib"><code>DMA_FROM_DEVICE</code></strong>: Synchronize the DMA buffer for
      transfers from the device to memory.<br>
    &#8226; <strong class="japib"><code>DMA_TO_DEVICE</code></strong>: Synchronize the DMA buffer for
      transfers from memory to the device.<br>
    &#8226; <strong class="japib"><code>DMA_TO_FROM_DEVICE</code></strong>: Synchronize the DMA buffer for
      transfers in both directions &#8212; i.e., from the device to memory and
      from memory to the device (&lt;=&gt; <code class="japi">DMA_FROM_DEVICE |
      DMA_TO_DEVICE</code>).<br>
    &#8226; <strong class="japib"><code>DMA_KERNEL_BUFFER_ALLOC</code></strong>: Allocate a contiguous DMA
      buffer in the physical memory.<br>
      The default behavior (when this flag is not set) is to allocate a
      Scatter/&#65279;Gather DMA buffer.<br>
    &#8226; <strong class="japib"><code>DMA_KBUF_BELOW_16M</code></strong>: Allocate the physical DMA buffer
      within the first 16MB of the main memory.<br>
      This flag is applicable only to contiguous-buffer DMA, i.e., only when the
      <code class="japi">DMA_KERNEL_BUFFER_ALLOC</code> flag is also set.<br>
    &#8226; <strong class="japib"><code>DMA_LARGE_BUFFER</code></strong>: Enable locking of a large DMA
      buffer &#8212; <code class="japi">dwBytes &gt; 1MB</code>.<br>
      This flag is applicable only to Scatter/&#65279;Gather DMA (i.e., when the
      <code class="japi">DMA_KERNEL_BUFFER_ALLOC</code> flag is not set). <br>
    &#8226; <strong class="japib"><code>DMA_ALLOW_CACHE</code></strong>: Allow caching of the DMA buffer.
    <br>
    &#8226; <strong class="japib"><code>DMA_KERNEL_ONLY_MAP</code></strong>: Do not map the allocated DMA
      buffer to the user mode (i.e., map it to kernel-mode only).<br>
      This flag is applicable only in cases where the
      <code class="japi">DMA_KERNEL_BUFFER_ALLOC</code> flag is applicable &#8212; see
      above.<br>
    &#8226; <strong class="japib"><code>DMA_ALLOW_64BIT_ADDRESS</code></strong>: Allow allocation of 64-&#65279;bit
      DMA addresses. This flag is supported on Windows and and Linux.
    
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwPages</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    The number of pages allocated for the DMA buffer.<br>
    For contiguous-buffer DMA this field is always set to 1.<br>
    For a large (&gt; 1MB) Scatter/&#65279;Gather DMA buffer
    <span style="white-space:nowrap">(<code class="japi">dwOptions | DMA_LARGE_BUFFER</code>)</span> this
    field is used both as an input and an output parameter (otherwise only
    output) &#8212; see
    <a class="link" href="#dma_dwPages_sg_large_buf_remark">remark</a> below for
    details.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hCard</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Handle to a card for which the DMA buffer is locked, as received from
    <span style=""><span style=""><code class="japi">WD_CardRegister</code><span class="japi">()</span></span><a class="xref" href="#WD_CardRegister" title="2.6. WD_CardRegister()"><fo:inline> [2.6]</fo:inline></a></span>.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">Page</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Array of DMA page structures:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">pPhysicalAddr</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Pointer to the physical address of the beginning of the page</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwBytes</span></td><td style="" align="left" valign="top">Page size, in bytes</td></tr></tbody></table></div>
  <h5><a name="idp46958332136192"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958332138544"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    WinDriver supports both Scatter/&#65279;Gather and contiguous-buffer DMA on Windows
    and Linux.<br>
    On Linux, Scatter/&#65279;Gather DMA is only supported for 2.4 kernels and above (since the
    2.2 Linux kernels require a patch to support this type of DMA).
  </li><li class="listitem" style="list-style-type: disc"><p>
    You should NOT use the physical memory address returned by the function
    (<code class="japi">dma.Page[i].pPhysicalAddr</code>) directly in order to access the
    DMA buffer from your driver.
    </p><p>
    To access the memory directly from a user-mode process, use the user-mode
    virtual mapping of the DMA buffer &#8212; <code class="japi">dma.pUserAddr</code>.
    </p><p>
    To access the memory in the kernel, either directly from within a Kernel
    PlugIn driver (see the <span class="jprintfilename"><strong>WinDriver PCI Manual</strong></span>) or when calling
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_Transfer</code><span class="japi">()</span></span><a class="xref" href="#WD_Transfer" title="2.9. WD_Transfer()"><fo:inline> [2.9]</fo:inline></a></span> / <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_MultiTransfer</code><span class="japi">()</span></span><a class="xref" href="#WD_MultiTransfer" title="2.10. WD_MultiTransfer()"><fo:inline> [2.10]</fo:inline></a></span>, use the kernel
    mapping of the DMA buffer. For contiguous-buffer DMA
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap">(<code class="japi">dma.dwOptions | DMA_KERNEL_BUFFER_ALLOC</code>)</span>
    and for Scatter/&#65279;Gather DMA on Windows, this mapping is returned by
    <code class="jfunc">WD_DMALock</code><span class="jfunc">()</span> within the <code class="japi">dma.pKernelAddr</code> field.
    For Scatter/&#65279;Gather DMA on other platforms, you can acquire a kernel mapping of the
    buffer by calling <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_CardRegister</code><span class="japi">()</span></span><a class="xref" href="#WD_CardRegister" title="2.6. WD_CardRegister()"><fo:inline> [2.6]</fo:inline></a></span> with a card structure that
    contains a memory item defined with the physical DMA buffer address
    returned from <code class="jfunc">WD_DMALock</code><span class="jfunc">()</span>
    (<code class="japi">dma.Page[i].pPhysicalAddr</code>).
    <code class="jfunc">WD_CardRegister</code><span class="jfunc">()</span> will return a kernel mapping of the physical
    buffer within the
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><code class="japi">pCardReg-&gt;Card.Item[i].I.Mem.pTransAddr</code></span>
    field.
    </p></li><li class="listitem" style="list-style-type: disc">
    On Windows x86 and x86_64 platforms, you should normally set the
    <code class="japi">DMA_ALLOW_CACHE</code> flag in the DMA options bitmask parameter
    (<code class="japi">pDma-&gt;dwOptions</code>).
    </li><li class="listitem" style="list-style-type: disc">
    If the device supports 64-&#65279;bit DMA addresses, it is recommended to set the
    <code class="japi">DMA_ALLOW_64BIT_ADDRESS</code> flag in
    <code class="japi"><span xmlns:fo="http://www.w3.org/1999/XSL/Format">pDma-&gt;</span>dwOptions</code>.
    Otherwise, when the physical memory on the target platform is larger than
    4GB, the operating system may only allow allocation of relatively small
    32-bit DMA buffers (such as 1MB buffers, or even smaller).
    </li><li class="listitem" style="list-style-type: disc"><a name="dma_dwPages_sg_large_buf_remark"></a>
    When using the <code class="japi">DMA_LARGE_BUFFER</code> flag, <code class="japi">dwPages</code> is
    an input/output parameter. As input to <code class="jfunc">WD_DMALock</code><span class="jfunc">()</span>,
    <code class="japi">dwPages</code> should be set to the maximum number of pages that can
    be used for the DMA buffer (normally this would be the number of elements
    in the <code class="japi">dma.Page</code> array). As an output value of
    <code class="jfunc">WD_DMALock</code><span class="jfunc">()</span>, <code class="japi">dwPages</code> holds the number of actual
    physical blocks allocated for the DMA buffer. The returned
    <code class="japi">dwPages</code> may be smaller than the input value because adjacent
    pages are returned as one block.
  </li></ul></div>

<h5><a name="idp46958332163936"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>
<p>
The following code demonstrates Scatter/&#65279;Gather DMA allocation:

</p><pre class="screen">WD_DMA dma;
DWORD dwStatus;
PVOID pBuffer = malloc(20000);

BZERO(dma);
dma.dwBytes = 20000;
dma.pUserAddr = pBuffer;
dma.dwOptions = fIsRead ? DMA_FROM_DEVICE : DMA_TO_DEVICE;
/* Initialization of dma.hCard, value obtained from WD_CardRegister call: */
dma.hCard = cardReg.hCard;
dwStatus = WD_DMALock(hWD, &amp;dma);
if (dwStatus)
{
    printf("Could not lock down buffer\n");
}
else
{
    /* On successful return dma.Page has the list of
       physical addresses.
       To access the memory from your user mode
       application, use dma.pUserAddr. */
}

</pre><p>
</p>

<p>
The following code demonstrates contiguous kernel buffer DMA allocation:

</p><pre class="screen">WD_DMA dma;
DWORD dwStatus;

BZERO(dma);
dma.dwBytes = 20 * 4096; /* 20 pages */
dma.dwOptions = DMA_KERNEL_BUFFER_ALLOC |
    ( fIsRead ? DMA_FROM_DEVICE : DMA_TO_DEVICE);
/* Initialization of dma.hCard, value obtained from WD_CardRegister call: */
dma.hCard = cardReg.hCard;
dwStatus = WD_DMALock(hWD, &amp;dma);
if (dwStatus)
{
   printf("Failed allocating kernel buffer for DMA\n");
}
else
{
    /* On return dma.pUserAddr holds the user mode virtual
       mapping of the allocated memory and dma.pKernelAddr
       holds the kernel mapping of the physical memory.
       dma.Page[0].pPhysicalAddr points to the allocated
       physical address. */
}
</pre><p>
</p>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_DMAUnlock"></a>2.12. WD_DMAUnlock()</h2></div></div></div>
<h5><a name="idp46958332171248"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Unlocks a DMA buffer.
</p>

<h5><a name="idp46958332172640"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_DMAUnlock(
    HANDLE hWD,
    WD_DMA *pDMA);
</pre>

<h5><a name="idp46958332174272"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pDma</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_DMA*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hDma</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pUserAddr</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">PVOID</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pKernelAddr</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">KPTR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwBytes</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwPages</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hCard</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">Page</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">WD_DMA_PAGE[WD_DMA_PAGES]</td><td style="" align="left" valign="top">N/&#65279;A</td></tr></tbody></table></div>

<h5><a name="idp46958332202432"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pDMA</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Pointer to a DMA information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hDma</span></td><td style="" align="left" valign="top">DMA buffer handle, received from <span style=""><span style=""><code class="japi">WD_DMALock</code><span class="japi">()</span></span><a class="xref" href="#WD_DMALock" title="2.11. WD_DMALock()"><fo:inline> [2.11]</fo:inline></a></span>.</td></tr></tbody></table></div>

  <h5><a name="idp46958332215344"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958332217696"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen">WD_DMAUnlock(hWD, &amp;dma);</pre>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_KernelBufLock"></a>2.13. WD_KernelBufLock()</h2></div></div></div>
<h5><a name="idp46958332220848"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Allocates a contiguous or non-contiguous non-paged kernel buffer, and maps it
to user address space. This buffer should be used ONLY for shared buffer
purposes (The buffer should NOT be used for DMA).
</p>

<h5><a name="idp46958332222464"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_KernelBufLock(
    HANDLE hWD,
    WD_KERNEL_BUFFER *pKerBuf);
</pre>

<h5><a name="idp46958332224192"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pKerBuf</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_KERNEL_BUFFER*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hKerBuf</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">qwBytes</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UINT64</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pKernelAddr</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">KPTR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pUserAddr</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">UPTR</td><td style="" align="left" valign="top">Output</td></tr></tbody></table></div>
<h5><a name="idp46958332245280"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div><div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pKerBuf</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Pointer to a KERNEL_BUFFER information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hKerBuf</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Kernel buffer handle which should be passed to 
    <span style=""><span style=""><code class="japi">WD_KernelBufUnlock</code><span class="japi">()</span></span><a class="xref" href="#WD_KernelBufUnlock" title="2.14. WD_KernelBufUnlock()"><fo:inline> [2.14]</fo:inline></a></span>  when freeing the kernel buffer, or 0 if 
    the kernel buffer lock failed
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Kernel buffer options bit-mask, which can consist of a combination of any 
    of the following flags:<br>
    &#8226; <strong class="japib"><code>ALLOCATE_CONTIG_BUFFER</code></strong>:Allocates a physically 
      contiguous buffer<br>
    &#8226; <strong class="japib"><code>ALLOCATE_CACHED_BUFFER</code></strong>:Allocates a cached buffer
      <br>
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">qwBytes</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    The size of the kernel buffer, in bytes.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pKernelAddr</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Pointer to the physical address of the beginning of the buffer</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pUserAddr</span></td><td style="" align="left" valign="top">Pointer to the virtual address of the beginning of the buffer</td></tr></tbody></table></div>
  <h5><a name="idp46958332268192"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958332270544"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>
<p>
The following code demonstrates allocation of contiguous cached buffer:

</p><pre class="screen">WD_KERNEL_BUFFER buf;
DWORD dwStatus;

BZERO(buf);
buf.qwBytes = 200000;
buf.dwOptions = ALLOCATE_CONTIG_BUFFER | ALLOCATE_CACHED_BUFFER;
dwStatus = WD_KernelBufLock(hWD, &amp;buf);
if (dwStatus)
{
    printf("Could not lock down buffer\n");
}
else
{
    / * To access the memory from your user mode
        application, use buf.pUserAddr. */
}
</pre><p>
</p>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_KernelBufUnlock"></a>2.14. WD_KernelBufUnlock()</h2></div></div></div>
<h5><a name="idp46958332274544"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Frees kernel buffer.
</p>

<h5><a name="idp46958332275936"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_KernelBufUnlock(
    HANDLE hWD,
    WD_KERNEL_BUFFER *pKerBuf);
</pre>

<h5><a name="idp46958332277664"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pKerBuf</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_KERNEL_BUFFER*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hKerBuf</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">qwBytes</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">UINT64</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pKernelAddr</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">KPTR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pUserAddr</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">UPTR</td><td style="" align="left" valign="top">N/&#65279;A</td></tr></tbody></table></div>
<h5><a name="idp46958332298752"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div><div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pKerBuf</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Pointer to a KERNEL_BUFFER information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hKerBuf</span></td><td style="" align="left" valign="top">
    Kernel buffer handle
  </td></tr></tbody></table></div>
  <h5><a name="idp46958332309664"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958332312016"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    This API is currently not support on WinCE.
  </li></ul></div>

<h5><a name="idp46958332314032"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>
<pre class="screen">WD_KernelBufUnlock(hWD, &amp;buf);</pre>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_DMASyncCpu"></a>2.15. WD_DMASyncCpu()</h2></div></div></div>
<h5><a name="idp46958332317184"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Synchronizes the cache of all CPUs with the DMA buffer, by flushing the data
from the CPU caches.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
This function should be called before performing a DMA transfer (see Remarks
below).
</td></tr></table></div>
<h5><a name="idp46958332319168"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_DMASyncCpu(
    HANDLE hWD,
    WD_DMA *pDMA);
</pre>

<h5><a name="idp46958332320880"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pDMA</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">WD_DMA*</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46958332330992"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pDMA</td><td style="" align="left" valign="top">
    Pointer to a DMA information structure, received from a previous call to
    <span style=""><span style=""><code class="japi">WD_DMALock</code><span class="japi">()</span></span><a class="xref" href="#WD_DMALock" title="2.11. WD_DMALock()"><fo:inline> [2.11]</fo:inline></a></span>
  </td></tr></tbody></table></div>

  <h5><a name="idp46958332342112"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958332344464"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    An asynchronous DMA read or write operation accesses data in memory, not in
    the processor (CPU) cache, which resides between the CPU and the host's
    physical memory. Unless the CPU cache has been flushed, by calling
    <code class="jfunc">WD_DMASyncCpu</code><span class="jfunc">()</span>, just before a read transfer, the data
    transferred into system memory by the DMA operation could be overwritten
    with stale data if the CPU cache is flushed later. Unless the CPU cache has
    been flushed by calling <code class="jfunc">WD_DMASyncCpu</code><span class="jfunc">()</span> just before a write
    transfer, the data in the CPU cache might be more up-to-date than the copy
    in memory.
  </li></ul></div>

<h5><a name="idp46958332347872"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen">WD_DMASyncCpu(hWD, &amp;dma);</pre>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_DMASyncIo"></a>2.16. WD_DMASyncIo()</h2></div></div></div>
<h5><a name="idp46958332351024"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Synchronizes the I/&#65279;O caches with the DMA buffer, by flushing the data from
the I/&#65279;O caches and updating the CPU caches.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
This function should be called after performing a DMA transfer (see Remarks
below).
</td></tr></table></div>
<h5><a name="idp46958332353168"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_DMASyncIo(
    HANDLE hWD,
    WD_DMA *pDMA);
</pre>

<h5><a name="idp46958332354800"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pDMA</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">WD_DMA*</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46958332364912"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pDMA</td><td style="" align="left" valign="top">
    Pointer to a DMA information structure, received from a previous call to
    <span style=""><span style=""><code class="japi">WD_DMALock</code><span class="japi">()</span></span><a class="xref" href="#WD_DMALock" title="2.11. WD_DMALock()"><fo:inline> [2.11]</fo:inline></a></span>
  </td></tr></tbody></table></div>

  <h5><a name="idp46958332376032"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958332378384"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    After a DMA transfer has been completed, the data can still be in the
    I/&#65279;O cache, which resides between the host's physical memory and the
    bus-master DMA device, but not yet in the host's main memory. If the CPU
    accesses the memory, it might read the wrong data from the CPU cache. To
    ensure a consistent view of the memory for the CPU, you should call
    <code class="jfunc">WD_DMASyncIo</code><span class="jfunc">()</span> after a DMA transfer in order to flush the data
    from the I/&#65279;O cache and update the CPU cache with the new data. The
    function also flushes additional caches and buffers between the device and
    memory, such as caches associated with bus extenders or bridges.
  </li></ul></div>

<h5><a name="idp46958332382128"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen">WD_DMASyncIo(hWD, &amp;dma);</pre>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="InterruptEnable"></a>2.17. InterruptEnable()</h2></div></div></div>
<h5><a name="idp46958332385280"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
A convenient function for setting up interrupt handling.
</p>

<h5><a name="idp46958332386752"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD InterruptEnable(
    HANDLE *phThread,
    HANDLE hWD,
    WD_INTERRUPT *pInt,
    INT_HANDLER func,
    PVOID pData);
</pre>

<h5><a name="idp46958332388528"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">phThread</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pInt</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_INTERRUPT*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hInterrupt</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">Cmd</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_TRANSFER*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwCmds</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">kpCall</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_KERNEL_PLUGIN_CALL</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">hKernelPlugIn</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwMessage</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">pData</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">PVOID</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwResult</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">fEnableOk</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwCounter</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwLost</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">fStopped</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwLastMessage</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwEnabledIntType</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">func</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">typedef void (*INT_HANDLER)(PVOID pData);</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pData</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">PVOID</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>
<h5><a name="idp46958332437072"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div><div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">phThread</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Pointer to the handle to the spawned interrupt thread, which should be
    passed to <span style=""><span style=""><code class="japi">InterruptDisable</code><span class="japi">()</span></span><a class="xref" href="#InterruptDisable" title="2.18. InterruptDisable()"><fo:inline> [2.18]</fo:inline></a></span> when disabling the interrupt
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pInt</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Pointer to an interrupt information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hInterrupt</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Internal interrupt handle, as received from <span style=""><span style=""><code class="japi">WD_CardRegister</code><span class="japi">()</span></span><a class="xref" href="#WD_CardRegister" title="2.6. WD_CardRegister()"><fo:inline> [2.6]</fo:inline></a></span>
    in <code class="japi">I.Int.hInterrupt</code>
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    
    A bit mask of interrupt handling flags &#8212; can be set to zero for no
    options, or to a combination of any of the following flags:
    <div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><strong class="japib"><code>INTERRUPT_CMD_COPY</code></strong>: If set, WinDriver will copy any data
        read in the kernel as a result of a read transfer command, and return
        it to the user within the relevant transfer command structure.<br>
        The user will be able to access the data from his user-mode interrupt
        handler routine<span>
          (<strong class="japib"><code>func</code></strong>).</span></li></ul></div>
    
    
    The following flags are applicable only to PCI interrupts on <span class="b"><strong>Linux</strong></span>.
    If set, these flags determine the types of interrupts that may be enabled
    for the device &#8212; the function will attempt to enable only interrupts
    of the specified types, using the following precedence order, provided the
    type is reported as supported by the device:
    
    <div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><strong class="japib"><code>INTERRUPT_MESSAGE_X</code></strong>: Extended Message-Signaled Interrupts (MSI-&#65279;X)
      </li><li class="listitem" style="list-style-type: disc"><strong class="japib"><code>INTERRUPT_MESSAGE</code></strong>: Message-Signaled Interrupts (MSI)
      </li><li class="listitem" style="list-style-type: disc"><strong class="japib"><code>INTERRUPT_LEVEL_SENSITIVE</code></strong> &#8212; Legacy level-sensitive
        interrupts<br></li></ul></div>
    
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">Cmd</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    <p>
    An array of transfer commands information structures that define the
    operations to be performed at the kernel level upon the detection of an
    interrupt, or <code class="japi">NULL</code> if no transfer commands are required.
    </p>
    <p>
    NOTE:<br>
    &#8226; Memory allocated for the transfer commands must remain available
  until the interrupts are disabled
.<br>
    &#8226; When handling level-sensitive interrupts (such as PCI interrupts) in
      the user mode (without a Kernel PlugIn driver), you must use this array
      to define the hardware-specific commands for acknowledging the interrupts
      in the kernel, immediately when they are received.<br>
    </p>
    <p>
    The commands in the array can be either of the following:<br>
    &#8226; A read/write transfer command that conforms to the following format:
      <strong class="japib"><code>&lt;dir&gt;&lt;p&gt;_[S]&lt;size&gt;</code></strong> &#8212; see the
      description of <span style="white-space:nowrap"><code class="japi">pTrans-&gt;cmdTrans</code></span> in
      <a class="xref" href="#WD_Transfer" title="2.9. WD_Transfer()"><fo:inline>Section 2.9</fo:inline></a>.
    </p>
    &#8226; <strong class="japib"><code>CMD_MASK</code></strong>: 
  an interrupt mask command for determining the source of the interrupt: When
  this command is set, upon the arrival of an interrupt in the kernel WinDriver
  masks the value of the previous read command in the <code class="japi">WD_TRANSFER</code>
  commands array with the mask that is set in the relevant <code class="japi">Data</code>
  field union member of the mask transfer command. For example, for a
  <code class="japi">Cmd </code><code class="japi">WD_TRANSFER</code> array, if
  <code class="japi">Cmd[i-1].cmdTrans</code>
  is <code class="japi">RM_BYTE</code>, WinDriver performs the following mask:
   <span style="white-space:nowrap"><code class="japi">Cmd[i-1].Data.Byte
    &amp;
  Cmd[i].Data.Byte</code></span>.
  If the mask is successful, the driver claims ownership of the interrupt and
  when the control is returned to the user mode, the interrupt handler routine
  that was passed to the interrupt enable function is invoked; otherwise, the
  driver rejects ownership of the interrupt, the interrupt handler routine is
  not invoked and the subsequent transfer commands in the array are not
  executed.<br>
  (Acceptance and rejection of the interrupt is relevant only when handling
  legacy interrupts; since MSI/MSI-&#65279;X interrupts are not shared, WinDriver will
  always accept control of such interrupts.)<br>
  NOTE: A <code class="japi">CMD_MASK</code> command must be preceded by a read transfer
  command (<code class="japi">RM_XXX</code> / <code class="japi">RP_XXX</code>).

  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwCmds</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Number of transfer commands in the <strong class="japib"><code>Cmd</code></strong> array</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">kpCall</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Kernel PlugIn message information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">hKernelPlugIn</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Handle to Kernel PlugIn returned from <span style=""><span style=""><code class="japi">WD_KernelPlugInOpen</code><span class="japi">()</span></span><a class="xref" href="#WD_KernelPlugInOpen" title="6.1. WD_KernelPlugInOpen()"><fo:inline> [6.1]</fo:inline></a></span>.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwEnabledIntType</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    <p>
    Updated by the function to indicate the type of interrupt enabled for the
    device. Can be set to any of the following values:<br>
    &#8226; <strong class="japib"><code>INTERRUPT_MESSAGE_X</code></strong>: Extended Message-Signaled Interrupts (MSI-&#65279;X).
      <sup style="
        color:
        red;
      ">*</sup><br>
    &#8226; <strong class="japib"><code>INTERRUPT_MESSAGE</code></strong>: Message-Signaled Interrupts (MSI).
      <sup style="
        color:
        red;
      ">*</sup><br>
    &#8226; <strong class="japib"><code>INTERRUPT_LEVEL_SENSITIVE</code></strong>: Legacy level-sensitive
      interrupts.<br>
    &#8226; <strong class="japib"><code>0</code></strong>: Default interrupt type &#8212; Legacy
      edge-triggered interrupts.
    </p>
    <p>
    <span class="b"><strong>NOTE:</strong></span><br>
    
    <sup style="
        color:
        red;
      ">*</sup> The Windows APIs do not
  distinguish between MSI and MSI-&#65279;X; therefore, on this OS the WinDriver
  functions set the <strong class="japib"><code>INTERRUPT_MESSAGE</code></strong> flag for both MSI and
  MSI-&#65279;X.<br>
    <sup style="
        color:
        red;
      ">**</sup> This field normally relevant only in the case of
      PCI devices that support more than one type of interrupt.
    </p>
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">func</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    The interrupt handler routine, which will be called once for every
    interrupt occurrence. (Note: The function type
    <span><code class="japi">INT_HANDLER</code> is defined
    in <span class="jprintfilename"><strong>windrvr_int_thread.h</strong></span>.</span>)
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pData</td><td style="" align="left" valign="top">
    Pointer to the data to be passed as the argument to the interrupt handler
    routine (<strong class="japib"><code>func</code></strong>)
  </td></tr></tbody></table></div>
  <h5><a name="idp46958332508768"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958332511120"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    You can view the implementation of this function in
    <span class="jdirectory"><strong>WinDriver/src/wdapi/windrvr_int_thread.c</strong></span>.
  </li><li class="listitem" style="list-style-type: disc"><code class="jfunc">InterruptEnable</code><span class="jfunc">()</span> uses the low&#65279;-&#65279;level
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_IntEnable</code><span class="japi">()</span></span><a class="xref" href="#WD_IntEnable" title="3.2. WD_IntEnable()"><fo:inline> [3.2]</fo:inline></a></span>, <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_IntWait</code><span class="japi">()</span></span><a class="xref" href="#WD_IntWait" title="3.3. WD_IntWait()"><fo:inline> [3.3]</fo:inline></a></span> and
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_IntCount</code><span class="japi">()</span></span><a class="xref" href="#WD_IntCount" title="3.4. WD_IntCount()"><fo:inline> [3.4]</fo:inline></a></span> functions and replaces the need to call these
    functions separately, although this is still possible.
  </li><li class="listitem" style="list-style-type: disc">
    
  WinDriver must be registered with the OS as the driver of the device before
  enabling interrupts. For Plug&#65279;-&#65279;and&#65279;-&#65279;Play hardware (PCI&#65279;/&#65279;PCI Express) on
  Windows platforms, this association is made by installing an INF file for the
  device<span xmlns:fo="http://www.w3.org/1999/XSL/Format"></span>.
  If the INF file is not installed, <code class="jfunc">InterruptEnable</code><span class="jfunc">()</span>
  will fail with a <code class="japi">WD_NO_DEVICE_OBJECT</code> error<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
 To
    improve the interrupt handling rate on Windows and Linux, consider
    using WinDriver's Kernel PlugIn feature (see the <span class="jprintfilename"><strong>WinDriver PCI Manual</strong></span>).
  </li></ul></div>

<h5><a name="idp46958332525136"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen">VOID DLLCALLCONV interrupt_handler(PVOID pData)
{
    WD_INTERRUPT *pIntrp = (WD_INTERRUPT *)pData;
    /* Implement your interrupt handler routine here */

    printf("Got interrupt %d\n", pIntrp-&gt;dwCounter);
}

....
main()
{
    WD_CARD_REGISTER cardReg;
    WD_INTERRUPT Intrp;
    HANDLE hWD, thread_handle;

    ....
    hWD = WD_Open();
    BZERO(cardReg);
    cardReg.Card.dwItems = 1;
    cardReg.Card.Item[0].item = ITEM_INTERRUPT;
    cardReg.Card.Item[0].fNotSharable = 1;
    cardReg.Card.Item[0].I.Int.dwInterrupt = MY_IRQ;
    cardReg.Card.Item[0].I.Int.dwOptions = 0;
    ....
    WD_CardRegister(hWd, &amp;cardReg);
    ....
    PVOID pdata = NULL;
    BZERO (Intrp);
    Intrp.hInterrupt = cardReg.Card.Item[0].I.Int.hInterrupt;
    Intrp.Cmd = NULL;
    Intrp.dwCmds = 0;
    Intrp.dwOptions = 0;
    printf("starting interrupt thread\n");
    pData = &amp;Intrp;

    if (InterruptEnable(&amp;thread_handle, hWD, &amp;Intrp,
        interrupt_handler, pdata))
    {
        printf ("failed enabling interrupt\n")
    }
    else
    {
        printf("Press Enter to uninstall interrupt\n");
        fgets(line, sizeof(line), stdin);
        InterruptDisable(thread_handle); /* Calls WD_IntDisable() */
    }
    WD_CardUnregister(hWD, &amp;cardReg);
    ....
}
</pre>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="InterruptDisable"></a>2.18. InterruptDisable()</h2></div></div></div>
<h5><a name="idp46958332529936"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
A convenient function for shutting down interrupt handling.
</p>

<h5><a name="idp46958332531408"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD InterruptDisable(HANDLE hThread);</pre>

<h5><a name="idp46958332533040"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hThread</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46958332541616"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hThread</td><td style="" align="left" valign="top">
    Interrupt thread handle, as received from <span style=""><span style=""><code class="japi">InterruptEnable</code><span class="japi">()</span></span><a class="xref" href="#InterruptEnable" title="2.17. InterruptEnable()"><fo:inline> [2.17]</fo:inline></a></span>
    (<code class="japi">*phThread</code>)
  </td></tr></tbody></table></div>

  <h5><a name="idp46958332551168"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958332553520"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    You can view the implementation of this function in
    <span class="jdirectory"><strong>WinDriver/src/wdapi/windrvr_int_thread.c</strong></span>.
  </li><li class="listitem" style="list-style-type: disc"><code class="jfunc">InterruptDisable</code><span class="jfunc">()</span> uses the low&#65279;-&#65279;level
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_IntDisable</code><span class="japi">()</span></span><span> function</span><a class="xref" href="#WD_IntDisable" title="3.5. WD_IntDisable()"><fo:inline> [3.5]</fo:inline></a></span>. When using
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">InterruptEnable</code><span class="japi">()</span></span><a class="xref" href="#InterruptEnable" title="2.17. InterruptEnable()"><fo:inline> [2.17]</fo:inline></a></span> to enable interrupts, instead of calling the
    low&#65279;-&#65279;level <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_IntEnable</code><span class="japi">()</span></span><a class="xref" href="#WD_IntEnable" title="3.2. WD_IntEnable()"><fo:inline> [3.2]</fo:inline></a></span>, <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_IntWait</code><span class="japi">()</span></span><a class="xref" href="#WD_IntWait" title="3.3. WD_IntWait()"><fo:inline> [3.3]</fo:inline></a></span> and
    <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_IntCount</code><span class="japi">()</span></span><a class="xref" href="#WD_IntCount" title="3.4. WD_IntCount()"><fo:inline> [3.4]</fo:inline></a></span> functions separately, the interrupts should be
    disabled using <code class="jfunc">InterruptDisable</code><span class="jfunc">()</span> and not
    <code class="jfunc">WD_IntDisable</code><span class="jfunc">()</span></li></ul></div>

<h5><a name="idp46958332570576"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen">main()
{
    ....
    if (InterruptEnable(&amp;thread_handle, hWD, &amp;Intrp,
        interrupt_handler, pData))
    {
        printf("failed enabling interrupt\n");
    }
    else
    {
        printf("Press Enter to uninstall interrupt\n");
        fgets(line, sizeof(line), stdin);
        InterruptDisable(thread_handle); /* Calls WD_IntDisable() */
    }
    ....
}
</pre>
</div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="Function_Reference_Low_Level"></a>Chapter 3. Low&#65279;-&#65279;Level WD_xxx Interrupt Functions</h1></div></div></div><p>
This chapter describes low&#65279;-&#65279;level <code class="japi">WD_xxx</code>
PCI&#65279;/&#65279;ISA WinDriver functions.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
It is recommended to use the API from WinDriver's <span class="b"><strong>WDC</strong></span> library, which
provides convenient wrappers to the basic <code class="japi">WD_xxx</code>
PCI&#65279;/&#65279;ISA API (see the <span class="jprintfilename"><strong>WinDriver PCI Manual</strong></span>).<br>
If you decide not to use the WDC API, consider using the high&#65279;-&#65279;level
<span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">InterruptEnable</code><span class="japi">()</span></span><a class="xref" href="#InterruptEnable" title="2.17. InterruptEnable()"><fo:inline> [2.17]</fo:inline></a></span> and <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">InterruptDisable</code><span class="japi">()</span></span><a class="xref" href="#InterruptDisable" title="2.18. InterruptDisable()"><fo:inline> [2.18]</fo:inline></a></span> functions
instead of directly using the low&#65279;-&#65279;level functions described below.
</td></tr></table></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="lowlevel_int_calling_seq"></a>3.1. WinDriver Low&#65279;-&#65279;Level Interrupt Calling Sequence</h2></div></div></div><p>
The following is a typical calling sequence of the WinDriver API, used for
servicing interrupts. The <code class="jfunc">InterruptEnable</code><span class="jfunc">()</span> and
<code class="jfunc">InterruptDisable</code><span class="jfunc">()</span> functions enable interrupt handling in a more
convenient manner.

</p><div class="figure"><a name="lowlevel_int_calling_sequence"></a><p class="title"><b>Figure 3.1. Low&#65279;-&#65279;Level WinDriver Interrupt API Calling Sequence</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/lowlevel_int_calling_sequence.png" height="" alt="Low&#65279;-&#65279;Level WinDriver Interrupt API Calling Sequence"></div></div></div><p><br class="figure-break">
</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_IntEnable"></a>3.2. WD_IntEnable()</h2></div></div></div>
<h5><a name="idp46958332591424"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Registers an interrupt service routine (ISR) to be called upon interrupt.
</p>

<h5><a name="idp46958332592912"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_IntEnable(
   HANDLE hWD,
   WD_INTERRUPT *pInterrupt);
</pre>
<h5><a name="idp46958332594368"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div><div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pInterrupt</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_INTERRUPT*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hInterrupt</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">Cmd</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_TRANSFER*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwCmds</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">kpCall</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_KERNEL_PLUGIN_CALL</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">hKernelPlugIn</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwMessage</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">pData</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">PVOID</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwResult</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">fEnableOk</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwCounter</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwLost</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">fStopped</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwLastMessage</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwEnabledIntType</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">Output</td></tr></tbody></table></div><h5><a name="idp46958332637920"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div><div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pInterrupt</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Pointer to an interrupt information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hInterrupt</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Interrupt handle. The handle is returned by <span style=""><span style=""><code class="japi">WD_CardRegister</code><span class="japi">()</span></span><a class="xref" href="#WD_CardRegister" title="2.6. WD_CardRegister()"><fo:inline> [2.6]</fo:inline></a></span>
    in <code class="japi">pCardReg-&gt;Card.Item[i].I.Int.hInterrupt</code>.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    A bit mask flag. May be 0 for no option, or:<br>
    &#8226; <strong class="japib"><code>INTERRUPT_CMD_COPY</code></strong>: if set, WinDriver will copy the data
      received from the read commands that were used to acknowledge the
      interrupt in the kernel, back to the user mode. The data will be
      available when <span style=""><span style=""><code class="japi">WD_IntWait</code><span class="japi">()</span></span><a class="xref" href="#WD_IntWait" title="3.3. WD_IntWait()"><fo:inline> [3.3]</fo:inline></a></span> returns.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">Cmd</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    An array of transfer commands information structures that define the
    operations to be performed at the kernel level upon the detection of an
    interrupt, or <code class="japi">NULL</code> if no transfer commands are required.<br>
    NOTE: <br>
    &#8226; Memory allocated for the transfer commands must remain available
  until the interrupts are disabled
. <br>
    &#8226; When handling level-sensitive interrupts (such as PCI interrupts) in
      the user mode (without a Kernel PlugIn driver), you must use this array
      to define the hardware-specific commands for acknowledging the interrupts
      in the kernel, immediately when they are received. <br>
      The commands in the array can be either of the following:<br>
    &#8226; A read/write transfer command that conforms to the following format:
      <strong class="japib"><code>&lt;dir&gt;&lt;p&gt;_[S]&lt;size&gt;</code></strong> &#8212; see the
      description of <code class="japi">pTrans-&gt;cmdTrans</code> in
      <a class="xref" href="#WD_Transfer" title="2.9. WD_Transfer()"><fo:inline>Section 2.9</fo:inline></a>.<br>
    &#8226; <strong class="japib"><code>CMD_MASK</code></strong>: 
  an interrupt mask command for determining the source of the interrupt: When
  this command is set, upon the arrival of an interrupt in the kernel WinDriver
  masks the value of the previous read command in the <code class="japi">WD_TRANSFER</code>
  commands array with the mask that is set in the relevant <code class="japi">Data</code>
  field union member of the mask transfer command. For example, for a
  <code class="japi">Cmd </code><code class="japi">WD_TRANSFER</code> array, if
  <code class="japi">Cmd[i-1].cmdTrans</code>
  is <code class="japi">RM_BYTE</code>, WinDriver performs the following mask:
   <span style="white-space:nowrap"><code class="japi">Cmd[i-1].Data.Byte
    &amp;
  Cmd[i].Data.Byte</code></span>.
  If the mask is successful, the driver claims ownership of the interrupt and
  when the control is returned to the user mode, the interrupt handler routine
  that was passed to the interrupt enable function is invoked; otherwise, the
  driver rejects ownership of the interrupt, the interrupt handler routine is
  not invoked and the subsequent transfer commands in the array are not
  executed.<br>
  (Acceptance and rejection of the interrupt is relevant only when handling
  legacy interrupts; since MSI/MSI-&#65279;X interrupts are not shared, WinDriver will
  always accept control of such interrupts.)<br>
  NOTE: A <code class="japi">CMD_MASK</code> command must be preceded by a read transfer
  command (<code class="japi">RM_XXX</code> / <code class="japi">RP_XXX</code>).

  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwCmds</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Number of transfer commands in <strong class="japib"><code>Cmd</code></strong> array</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">kpCall</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Pointer to a Kernel PlugIn message information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">hKernelPlugIn</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Handle to Kernel PlugIn returned from <span style=""><span style=""><code class="japi">WD_KernelPlugInOpen</code><span class="japi">()</span></span><a class="xref" href="#WD_KernelPlugInOpen" title="6.1. WD_KernelPlugInOpen()"><fo:inline> [6.1]</fo:inline></a></span>
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">fEnableOk</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Set by the function to <code class="japi">TRUE</code> if <span style=""><span style=""><code class="japi">WD_IntEnable</code><span class="japi">()</span></span><a class="xref" href="#WD_IntEnable" title="3.2. WD_IntEnable()"><fo:inline> [3.2]</fo:inline></a></span>
    succeeds
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwEnabledIntType</span></td><td style="" align="left" valign="top">
    Updated by the function to indicate the type of interrupt enabled for the
    device. Can be set to any of the following values:<br>
    &#8226; <strong class="japib"><code>INTERRUPT_MESSAGE_X</code></strong>: Extended Message-Signaled Interrupts (MSI-X).
      <sup style="
        color:
        red;
      ">*</sup><br>
    &#8226; <strong class="japib"><code>INTERRUPT_MESSAGE</code></strong>: Message-Signaled Interrupts (MSI).
      <sup style="
        color:
        red;
      ">*</sup><br>
    &#8226; <strong class="japib"><code>INTERRUPT_LEVEL_SENSITIVE</code></strong>: Legacy level-sensitive
      interrupts.<br>
    &#8226; <strong class="japib"><code>0</code></strong>: Default interrupt type &#8212; Legacy
      edge-triggered interrupts.<br>
    <span class="b"><strong>NOTE:</strong></span> <br>
    
    <sup style="
        color:
        red;
      ">*</sup> The Windows APIs do not
  distinguish between MSI and MSI-&#65279;X; therefore, on this OS the WinDriver
  functions set the <strong class="japib"><code>INTERRUPT_MESSAGE</code></strong> flag for both MSI and
  MSI-&#65279;X.<br>
    <sup style="
        color:
        red;
      ">**</sup> This field normally relevant only in the case of
    PCI devices that support more than one type of interrupt.
  </td></tr></tbody></table></div>
  <h5><a name="idp46958332693232"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958332695584"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    For more information regarding interrupt handling please refer to the
    "ISA/EISA and PCI Interrupts" section in the <span class="jprintfilename"><strong>WinDriver PCI Manual</strong></span>.
  </li><li class="listitem" style="list-style-type: disc"><code class="japi">kpCall</code> is relevant for Kernel PlugIn implementation.
  </li><li class="listitem" style="list-style-type: disc">
    
  WinDriver must be registered with the OS as the driver of the device before
  enabling interrupts. For Plug&#65279;-&#65279;and&#65279;-&#65279;Play hardware (PCI&#65279;/&#65279;PCI Express) on
  Windows platforms, this association is made by installing an INF file for the
  device<span xmlns:fo="http://www.w3.org/1999/XSL/Format"></span>.
  If the INF file is not installed, <code class="jfunc">WD_IntEnable</code><span class="jfunc">()</span>
  will fail with a <code class="japi">WD_NO_DEVICE_OBJECT</code> error<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.

  </li></ul></div>

<h5><a name="idp46958332701584"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><pre class="screen">WD_INTERRUPT Intrp;
    WD_CARD_REGISTER cardReg;

    BZERO(cardReg);
    cardReg.Card.dwItems = 1;
    cardReg.Card.Item[0].item = ITEM_INTERRUPT;
    cardReg.Card.Item[0].fNotSharable = 1;
    cardReg.Card.Item[0].I.Int.dwInterrupt = 10; /* IRQ 10 */
     /* INTERRUPT_LEVEL_SENSITIVE - set to level-sensitive
        interrupts, otherwise should be 0.
        ISA cards are usually Edge Triggered while PCI cards
        are usually Level Sensitive. */
    cardReg.Card.Item[0].I.Int.dwOptions =
        INTERRUPT_LEVEL_SENSITIVE;
    cardReg.fCheckLockOnly = FALSE;
    WD_CardRegister(hWD, &amp;cardReg);
    if (cardReg.hCard == 0)
        printf("Could not lock device\n");
    else
    {
        BZERO(Intrp);
        Intrp.hInterrupt =
            cardReg.Card.Item[0].I.Int.hInterrupt;
        Intrp.Cmd = NULL;
        Intrp.dwCmds = 0;
        Intrp.dwOptions = 0;
        WD_IntEnable(hWD, &amp;Intrp);
    }
    if (!Intrp.fEnableOk)
    {
        printf("Failed enabling interrupt\n");
    }</pre></li><li class="listitem" style="list-style-type: disc">
    For another example please refer to
    <span class="jprintfilename"><strong>WinDriver/samples/pci_diag/pci_lib.c</strong></span>.
  </li></ul></div>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_IntWait"></a>3.3. WD_IntWait()</h2></div></div></div>
<h5><a name="idp46958332707728"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Waits for an interrupt.
</p>

<h5><a name="idp46958332709120"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_IntWait(
    HANDLE hWD,
    WD_INTERRUPT *pInterrupt);
</pre>

<h5><a name="idp46958332710832"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pInterrupt</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_INTERRUPT*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hInterrupt</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">Cmd</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_TRANSFER*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwCmds</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">kpCall</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_KERNEL_PLUGIN_CALL</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">fEnableOk</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwCounter</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwLost</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">fStopped</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwLastMessage</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwEnabledIntType</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">N/&#65279;A</td></tr></tbody></table></div>

<h5><a name="idp46958332745808"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>

<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pInterrupt</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Pointer to an interrupt information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hInterrupt</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Interrupt handle. The handle is returned by <span style=""><span style=""><code class="japi">WD_CardRegister</code><span class="japi">()</span></span><a class="xref" href="#WD_CardRegister" title="2.6. WD_CardRegister()"><fo:inline> [2.6]</fo:inline></a></span>
    in <code class="japi">pCardReg-&gt;Card.Item[i].I.Int.hInterrupt</code>.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwCounter</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Number of interrupts received</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwLost</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Number of interrupts that were acknowledged in the kernel mode but not yet
    handled in the user mode
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">fStopped</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Set by the function to any of the following values:<br>
    &#8226; 0 &#8212; an interrupt occurred. <br>
    &#8226; <strong class="japib"><code>INTERRUPT_STOPPED</code></strong> &#8212; an interrupt was disabled
      while waiting for interrupts. <br>
    &#8226; <strong class="japib"><code>INTERRUPT_INTERRUPTED</code></strong> &#8212; while waiting for an
      interrupt, <span style=""><span style=""><code class="japi">WD_IntWait</code><span class="japi">()</span></span><a class="xref" href="#WD_IntWait" title="3.3. WD_IntWait()"><fo:inline> [3.3]</fo:inline></a></span> was interrupted without an actual
      hardware interrupt (refer also to the
      <a class="link" href="#INTERRUPT_INTERRUPTED_remark">remark</a> below).
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwLastMessage</span></td><td style="" align="left" valign="top">
    Relevant only for MSI/MSI-X interrupts on Windows 7 and higher (see information in
    the <span class="jprintfilename"><strong>WinDriver PCI Manual</strong></span>):<br>
    When an interrupt occurs, WinDriver's kernel-mode interrupt handler sets this
    field to the interrupt's message data.
  </td></tr></tbody></table></div>

  <h5><a name="idp46958332772912"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958332775264"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>

<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><a name="INTERRUPT_INTERRUPTED_remark"></a>
    The <code class="japi">INTERRUPT_INTERRUPTED</code> status (set in
    <strong class="japib"><code>pInterrupt-&gt;fStopped</code></strong>) can occur on Linux if the
    application that waits on the interrupt is stopped (e.g., by pressing
    CTRL+Z).
  </li></ul></div>

<h5><a name="idp46958332779120"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen">for (;;)
{
    WD_IntWait(hWD, &amp;Intrp);
    if (Intrp.fStopped)
        break;

    ProcessInterrupt(Intrp.dwCounter);
}
</pre>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_IntCount"></a>3.4. WD_IntCount()</h2></div></div></div>
<h5><a name="idp46958332782592"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Retrieves the interrupts count since the call to
  <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_IntEnable</code><span class="japi">()</span></span><a class="xref" href="#WD_IntEnable" title="3.2. WD_IntEnable()"><fo:inline> [3.2]</fo:inline></a></span>.
</p>

<h5><a name="idp46958332786432"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">void WD_IntCount(
    HANDLE hWD,
    WD_INTERRUPT *pInterrupt);
</pre>

<h5><a name="idp46958332788144"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pInterrupt</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_INTERRUPT*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hInterrupt</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">Cmd</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_TRANSFER*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwCmds</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">kpCall</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_KERNEL_PLUGIN_CALL</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">fEnableOk</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwCounter</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwLost</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">fStopped</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwLastMessage</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwEnabledIntType</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">N/&#65279;A</td></tr></tbody></table></div>

<h5><a name="idp46958332823120"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>

<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pInterrupt</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Pointer to an interrupt information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hInterrupt</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Handle of interrupt, returned by <span style=""><span style=""><code class="japi">WD_CardRegister</code><span class="japi">()</span></span><a class="xref" href="#WD_CardRegister" title="2.6. WD_CardRegister()"><fo:inline> [2.6]</fo:inline></a></span> in
    <code class="japi">I.Int.hInterrupt</code>.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwCounter</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Number of interrupts received</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwLost</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Number of interrupts not yet handled</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">fStopped</span></td><td style="" align="left" valign="top">
    Set by the function to <code class="japi">TRUE</code> if interrupt was disabled while
    waiting for interrupts
  </td></tr></tbody></table></div>

  <h5><a name="idp46958332842544"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958332844896"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen">DWORD dwNumInterrupts;
WD_IntCount(hWD, &amp;Intrp);
dwNumInterrupts = Intrp.dwCounter;
</pre>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_IntDisable"></a>3.5. WD_IntDisable()</h2></div></div></div>
<h5><a name="idp46958332848320"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Disables interrupt processing.
</p>

<h5><a name="idp46958332849712"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_IntDisable(
    HANDLE hWD,
    WD_INTERRUPT *pInterrupt);
</pre>

<h5><a name="idp46958332851424"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pInterrupt</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_INTERRUPT</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hInterrupt</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">Cmd</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_TRANSFER*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwCmds</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">kpCall</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_KERNEL_PLUGIN_CALL</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">fEnableOk</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwCounter</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwLost</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">fStopped</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwLastMessage</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwEnabledIntType</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">N/&#65279;A</td></tr></tbody></table></div>

<h5><a name="idp46958332886400"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pInterrupt</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Pointer to an interrupt information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hInterrupt</span></td><td style="" align="left" valign="top">
    Handle of interrupt, returned by <span style=""><span style=""><code class="japi">WD_CardRegister</code><span class="japi">()</span></span><a class="xref" href="#WD_CardRegister" title="2.6. WD_CardRegister()"><fo:inline> [2.6]</fo:inline></a></span> in
    <code class="japi">I.Int.hInterrupt</code>.
  </td></tr></tbody></table></div>

  <h5><a name="idp46958332899696"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958332901968"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen">WD_IntDisable(hWD, &amp;Intrp);</pre>
</div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="wd_low_pnp_funcs"></a>Chapter 4. Plug&#65279;-&#65279;and&#65279;-&#65279;Play and Power Management Functions</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="wd_low_pnp_calling_seq"></a>4.1. <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="">Calling_Sequence</span></h2></div></div></div><p>
The following is a typical calling sequence of the WinDriver API, used for
handling Plug&#65279;-&#65279;and&#65279;-&#65279;Play and power management events. (Note: the use of the
<code class="jfunc">PciEventCreate</code><span class="jfunc">()</span> function, which appears in the sequence below, is
optional).
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
It is recommended to use the high&#65279;-&#65279;level <code class="jfunc">WDC_EventRegister</code><span class="jfunc">()</span>
and <code class="jfunc">WDC_EventUnregister</code><span class="jfunc">()</span> Plug&#65279;-&#65279;and&#65279;-&#65279;Play and power management APIs (see
the <span class="jprintfilename"><strong>WinDriver PCI Manual</strong></span>), instead of using the low&#65279;-&#65279;level APIs described in this
chapter.
</td></tr></table></div><div class="figure"><a name="pnp_calling_sequence"></a><p class="title"><b>Figure 4.1. Plug&#65279;-&#65279;and&#65279;-&#65279;Play Calling Sequence</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/pnp_calling_sequence.png" height="" alt="Plug&#65279;-&#65279;and&#65279;-&#65279;Play Calling Sequence"></div></div></div><br class="figure-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="PciEventCreate"></a>4.2. PciEventCreate()</h2></div></div></div>
<h5><a name="idp46958332916432"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Convenience function for allocating and initializing a PCI Plug&#65279;-&#65279;and&#65279;-&#65279;Play and power
management event structure.
</p>

<h5><a name="idp46958332918096"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">WD_EVENT * DLLCALLCONV PciEventCreate(
    WD_PCI_ID cardId,
    WD_PCI_SLOT pciSlot,
    DWORD dwOptions,
    DWORD dwAction);
</pre>

<h5><a name="idp46958332919872"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">cardId</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_PCI_ID </td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwVendorId</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwDeviceId</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pciSlot</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_PCI_SLOT</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwBus</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwSlot</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwFunction</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwOptions</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">dwAction</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46958332944160"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">cardId</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">PCI card information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwVendorId</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    PCI vendor ID to register to. If zero, register to all PCI vendor IDs.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwDeviceId</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    PCI card ID to register to. If zero, register to all PCI device IDs.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pciSlot</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">PCI slot information:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwBus</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    PCI bus number to register to. If zero, register to all PCI buses.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwSlot</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">PCI slot to register to. If zero, register to all slots.</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwFunction</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    PCI function to register to. If zero, register to all functions.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwOptions</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
     Can be either zero or:<br>
     &#8226; <strong class="japib"><code>WD_ACKNOWLEDGE</code></strong> &#8212; If set, the user can perform
       actions on the requested event before acknowledging it. The OS waits on
       the event until the user calls <code class="jfunc">WD_EventSend</code><span class="jfunc">()</span> If
       <span style=""><span style=""><code class="japi">EventRegister</code><span class="japi">()</span></span><a class="xref" href="#EventRegister" title="4.3. EventRegister()"><fo:inline> [4.3]</fo:inline></a></span> is called, <code class="jfunc">WD_EventSend</code><span class="jfunc">()</span> will
       be called automatically after the callback function exits.
   </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">dwAction</td><td style="" align="left" valign="top">
    A bit-mask indicating which events to register to:<br>
    <span class="b"><strong>Plug&#65279;-&#65279;and&#65279;-&#65279;Play events:</strong></span><br>
    &#8226; <strong class="japib"><code>WD_INSERT</code></strong> &#8212; Device was attached and configured
      by the operating system's Plug&#65279;-&#65279;and&#65279;-&#65279;Play Manager<br>
    &#8226; <strong class="japib"><code>WD_REMOVE</code></strong> &#8212; Device was unconfigured and
      detached by the operating system's Plug&#65279;-&#65279;and&#65279;-&#65279;Play Manager<br>
    <span class="b"><strong>Device power state:</strong></span><br>
    &#8226; <strong class="japib"><code>WD_POWER_CHANGED_D0</code></strong> &#8212; Full power<br>
    &#8226; <strong class="japib"><code>WD_POWER_CHANGED_D1</code></strong> &#8212; Low sleep<br>
    &#8226; <strong class="japib"><code>WD_POWER_CHANGED_D2</code></strong> &#8212; Medium sleep<br>
    &#8226; <strong class="japib"><code>WD_POWER_CHANGED_D3</code></strong> &#8212; Full sleep<br>
    &#8226; <strong class="japib"><code>WD_POWER_SYSTEM_WORKING</code></strong> &#8212; Fully on<br>
      <span class="b"><strong>Systems power state:</strong></span><br>
    &#8226; <strong class="japib"><code>WD_POWER_SYSTEM_SLEEPING1</code></strong> &#8212; Fully on but
      sleeping <br>
    &#8226; <strong class="japib"><code>WD_POWER_SYSTEM_SLEEPING2</code></strong> &#8212; CPU off, memory on,
      PCI on<br>
    &#8226; <strong class="japib"><code>WD_POWER_SYSTEM_SLEEPING3</code></strong> &#8212; CPU off, memory is
      in refresh, PCI on aux power<br>
    &#8226; <strong class="japib"><code>WD_POWER_SYSTEM_HIBERNATE</code></strong> &#8212; OS saves context
      before shutdown<br>
    &#8226; <strong class="japib"><code>WD_POWER_SYSTEM_SHUTDOWN</code></strong> &#8212; No context saved
  </td></tr></tbody></table></div>

<h5><a name="idp46958332978656"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
<p>
Returns a new structure for handling PCI Plug&#65279;-&#65279;and&#65279;-&#65279;Play and power management events,
or <code class="japi">NULL</code> if the allocation failed.
</p>

<h5><a name="idp46958332980896"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<p>
It is the responsibility of the caller to free the event structure returned by
the function (using <code class="jfunc">free</code><span class="jfunc">()</span>) when it is no longer needed.
</p>

<h5><a name="idp46958332983024"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>
<pre class="screen">PciEventCreate(cardId, pciSlot, WD_ACKNOWLEDGE, WD_INSERT | WD_REMOVE);</pre>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="EventRegister"></a>4.3. EventRegister()</h2></div></div></div>
<h5><a name="idp46958332986256"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Registers your application to receive Plug&#65279;-&#65279;and&#65279;-&#65279;Play and power management event
notifications, according to a predefined set of criteria.<br>
The function receives an event handler callback, which will be invoked upon the
occurrence of a registered event.
</p>

<h5><a name="idp46958332988352"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD EventRegister(
    HANDLE *phEvent,
    HANDLE hWD,
    WD_EVENT *pEvent,
    EVENT_HANDLER pFunc,
    void *pData);
</pre>
<h5><a name="idp46958332989872"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div><div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">phEvent</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pEvent</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_EVENT*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hEvent</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwEventType</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_EVENT_TYPE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwAction</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwEventId</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hKernelPlugIn</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwOptions</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">u</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">union</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">Pci</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">struct</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">  &#8226; <span style="">cardId</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_PCI_ID</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">   * <span style="">dwVendorId</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">   * <span style="">dwDeviceId</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">  &#8226; <span style="">pciSlot</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_PCI_SLOT</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">   * <span style="">dwBus</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">   * <span style="">dwSlot</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">   * <span style="">dwFunction</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">Usb</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">struct</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">Ipc</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">struct</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwNumMatchTables</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">matchTables</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WDU_MATCH_TABLE[1]</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pFunc</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">
    typedef void (*EVENT_HANDLER)(<br>
    &#8195; WD_EVENT *pEvent,<br>
    &#8195; void *pData);
  </td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pData</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">void</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div><h5><a name="idp46958333049696"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div><div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">phEvent</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Pointer to the handle to be used in calls to <span style=""><span style=""><code class="japi">EventUnregister</code><span class="japi">()</span></span><a class="xref" href="#EventUnregister" title="4.4. EventUnregister()"><fo:inline> [4.4]</fo:inline></a></span>,
    or <code class="japi">NULL</code> if the event registration fails.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pEvent</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    The criteria set for registering to receive event notifications.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hEvent</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Optional handle to be used by the low&#65279;-&#65279;level
    <code class="jfunc">WD_EventUnregister</code><span class="jfunc">()</span> function; Zero when event registration
    fails.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwEventType</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Event type. Can be either <code class="japi">WD_EVENT_TYPE_PCI</code> &#8212; for a PCI 
    card, <code class="japi">WD_EVENT_TYPE_USB</code> &#8212; for a USB device or 
    <code class="japi">WD_EVENT_TYPE_IPC</code> for an IPC related event (see 
    <code class="japi">WD_EVENT_TYPE</code> enumeration values)
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwAction</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    A bit-mask indicating which events to register to:<br>
    <span class="b"><strong>Plug&#65279;-&#65279;and&#65279;-&#65279;Play events:</strong></span><br>
    &#8226; <strong class="japib"><code>WD_INSERT</code></strong> &#8212; Device was attached and configured
      by the operating system's Plug&#65279;-&#65279;and&#65279;-&#65279;Play Manager<br>
    &#8226; <strong class="japib"><code>WD_REMOVE</code></strong> &#8212; Device was unconfigured and
      detached by the operating system's Plug&#65279;-&#65279;and&#65279;-&#65279;Play Manager<br>
    <span class="b"><strong>Device power state:</strong></span><br>
    &#8226; <strong class="japib"><code>WD_POWER_CHANGED_D0</code></strong> &#8212; Full power<br>
    &#8226; <strong class="japib"><code>WD_POWER_CHANGED_D1</code></strong> &#8212; Low sleep<br>
    &#8226; <strong class="japib"><code>WD_POWER_CHANGED_D2</code></strong> &#8212; Medium sleep<br>
    &#8226; <strong class="japib"><code>WD_POWER_CHANGED_D3</code></strong> &#8212; Full sleep<br>
    &#8226; <strong class="japib"><code>WD_POWER_SYSTEM_WORKING</code></strong> &#8212; Fully on<br>
      <span class="b"><strong>Systems power state:</strong></span><br>
    &#8226; <strong class="japib"><code>WD_POWER_SYSTEM_SLEEPING1</code></strong> &#8212; Fully on but
      sleeping<br>
    &#8226; <strong class="japib"><code>WD_POWER_SYSTEM_SLEEPING2</code></strong> &#8212; CPU off, memory on,
      PCI on<br>
    &#8226; <strong class="japib"><code>WD_POWER_SYSTEM_SLEEPING3</code></strong> &#8212; CPU off, memory is
      in refresh, PCI on aux power<br>
    &#8226; <strong class="japib"><code>WD_POWER_SYSTEM_HIBERNATE</code></strong> &#8212; OS saves context
      before shutdown<br>
    &#8226; <strong class="japib"><code>WD_POWER_SYSTEM_SHUTDOWN</code></strong> &#8212; No context saved
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hKernelPlugIn</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Handle to Kernel PlugIn returned from <span style=""><span style=""><code class="japi">WD_KernelPlugInOpen</code><span class="japi">()</span></span><a class="xref" href="#WD_KernelPlugInOpen" title="6.1. WD_KernelPlugInOpen()"><fo:inline> [6.1]</fo:inline></a></span>
    (when using the Kernel PlugIn to handle the events)
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">dwOptions</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
     Can be either zero or:<br>
     &#8226; <strong class="japib"><code>WD_ACKNOWLEDGE</code></strong> &#8212; If set, the user can perform
       actions on the requested event before acknowledging it. The OS waits on
       the event until the user calls <code class="jfunc">WD_EventSend</code><span class="jfunc">()</span> If
       <span style=""><span style=""><code class="japi">EventRegister</code><span class="japi">()</span></span><a class="xref" href="#EventRegister" title="4.3. EventRegister()"><fo:inline> [4.3]</fo:inline></a></span> is called, <code class="jfunc">WD_EventSend</code><span class="jfunc">()</span> will
       be called automatically after the callback function exits.
   </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">u</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Device information union:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">Pci</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">PCI card information:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">  &#8226; <span style="">cardId</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Card information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">   * <span style="">dwVendorId</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    PCI vendor ID to register to. If zero, register to all PCI vendor IDs.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">   * <span style="">dwDeviceId</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    PCI card ID to register to. If zero, register to all PCI device IDs.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">  &#8226; <span style="">pciSlot</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">PCI slot information:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">   * <span style="">dwBus</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    PCI bus number to register to. If zero, register to all PCI buses.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">   * <span style="">dwSlot</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">PCI slot to register to. If zero, register to all slots.</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">   * <span style="">dwFunction</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    PCI function to register to. If zero, register to all functions.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">Usb</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">USB device information &#8212; relevant only for USB devices</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">Ipc</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">IPC message information - used internally by WinDriver</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwNumMatchTables</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Relevant only for USB devices</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">matchTables</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Relevant only for USB devices </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pFunc</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    The callback function to call upon receipt of event notification.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pData</td><td style="" align="left" valign="top">
    Pointer to the data to pass to the <strong class="japib"><code>pFunc</code></strong> callback (<code class="japi">NULL</code>
    if there is no data to pass).
  </td></tr></tbody></table></div>
  <h5><a name="idp46958333118800"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958333121152"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<p>
This function wraps the low&#65279;-&#65279;level <code class="jfunc">WD_EventRegister</code><span class="jfunc">()</span>,
<code class="jfunc">WD_EventPull</code><span class="jfunc">()</span>, <code class="jfunc">WD_EventSend</code><span class="jfunc">()</span> and
<span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">InterruptEnable</code><span class="japi">()</span></span><a class="xref" href="#InterruptEnable" title="2.17. InterruptEnable()"><fo:inline> [2.17]</fo:inline></a></span> functions.
</p>

<h5><a name="idp46958333126480"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen">HANDLE *event_handle;
WD_EVENT event;
DWORD dwStatus;
BZERO(event);
event.dwAction = WD_INSERT | WD_REMOVE;
event.dwEventType = WD_EVENT_TYPE_PCI;
dwStatus = EventRegister(&amp;event_handle, hWD, &amp;event,
    event_handler_func, NULL);
if (dwStatus!=WD_STATUS_SUCCESS)
{
    printf("Failed register\n");
    return;
}
</pre>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="EventUnregister"></a>4.4. EventUnregister()</h2></div></div></div>
<h5><a name="idp46958333130000"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Unregisters from receiving Plug&#65279;-&#65279;and&#65279;-&#65279;Play and power management event notifications.
</p>

<h5><a name="idp46958333131600"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD EventUnregister(HANDLE hEvent);</pre>

<h5><a name="idp46958333133232"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hEvent</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46958333141808"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hEvent</td><td style="" align="left" valign="top">Handle received from <span style=""><span style=""><code class="japi">EventRegister</code><span class="japi">()</span></span><a class="xref" href="#EventRegister" title="4.3. EventRegister()"><fo:inline> [4.3]</fo:inline></a></span></td></tr></tbody></table></div>

  <h5><a name="idp46958333150848"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958333153200"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<p>
This function wraps <code class="jfunc">WD_EventUnregister</code><span class="jfunc">()</span> and
<span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">InterruptDisable</code><span class="japi">()</span></span><a class="xref" href="#InterruptDisable" title="2.18. InterruptDisable()"><fo:inline> [2.18]</fo:inline></a></span>.
</p>

<h5><a name="idp46958333157664"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen">EventUnregister(event_handle);</pre>
</div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="wd_gen_funcs"></a>Chapter 5. General WD_xxx Functions</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Calling_Sequence_WD_General"></a>5.1. Calling Sequence WinDriver &#8212; General Use</h2></div></div></div><p>
The following is a typical calling sequence for the WinDriver API.

<span xmlns:fo="http://www.w3.org/1999/XSL/Format">
<div class="figure"><a name="wd_general_calling_sequence_pci"></a><p class="title"><b>Figure 5.1. WinDriver-API Calling Sequence</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/wd_general_calling_sequence_pci.png" height="" alt="WinDriver-API Calling Sequence"></div></div></div><br class="figure-break">
</span>
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    We recommend calling the WinDriver function <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_Version</code><span class="japi">()</span></span><a class="xref" href="#WD_Version" title="5.3. WD_Version()"><fo:inline> [5.3]</fo:inline></a></span> after
    calling <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_Open</code><span class="japi">()</span></span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></span> and before calling any other WinDriver function.
    Its purpose is to return the WinDriver kernel module version number, thus
    providing the means to verify that your application is version compatible
    with the WinDriver kernel module.
  </li><li class="listitem" style="list-style-type: disc"><span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_DebugAdd</code><span class="japi">()</span></span><a class="xref" href="#WD_DebugAdd" title="5.6. WD_DebugAdd()"><fo:inline> [5.6]</fo:inline></a></span> and <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_Sleep</code><span class="japi">()</span></span><a class="xref" href="#WD_Sleep" title="5.8. WD_Sleep()"><fo:inline> [5.8]</fo:inline></a></span> can be called anywhere
    after <code class="jfunc">WD_Open</code><span class="jfunc">()</span></li></ul></div></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_Open"></a>5.2. WD_Open()</h2></div></div></div>
<h5><a name="idp46958333181680"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Opens a handle to access the WinDriver kernel module.<br>
The handle is used by all WinDriver APIs, and therefore must be called before any
other WinDriver API is called.
</p>

<h5><a name="idp46958333183072"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">HANDLE WD_Open(void);</pre>

<h5><a name="idp46958333184320"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
<p>
The handle to the WinDriver kernel module.<br>
If device could not be opened, returns <code class="japi">INVALID_HANDLE_VALUE</code>.
</p>

<h5><a name="idp46958333186208"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<p>
If you are a registered user, please refer to the documentation of
<span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_License</code><span class="japi">()</span></span><a class="xref" href="#WD_License" title="5.9. WD_License()"><fo:inline> [5.9]</fo:inline></a></span> for an example of how to register your WinDriver license.
</p>

<h5><a name="idp46958333190064"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen"> HANDLE hWD;

hWD = WD_Open();
if (hWD == INVALID_HANDLE_VALUE)
{
    printf("Cannot open WinDriver device\n");
}
</pre>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_Version"></a>5.3. WD_Version()</h2></div></div></div>
<h5><a name="idp46958333193600"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Returns the version number of the WinDriver kernel module currently running.
</p>

<h5><a name="idp46958333195088"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_Version(
    HANDLE hWD,
    WD_VERSION *pVer);
</pre>

<h5><a name="idp46958333196800"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pVer</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_VERSION*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwVer</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">cVer</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">CHAR[128]</td><td style="" align="left" valign="top">Output</td></tr></tbody></table></div>

<h5><a name="idp46958333211328"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pVer</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Pointer to a WinDriver version information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwVer</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">The version number</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">cVer</span></td><td style="" align="left" valign="top">
   Version information string. <br>
   The version string's size is limited to 128 characters (including the NULL
   terminator character).
 </td></tr></tbody></table></div>

  <h5><a name="idp46958333224064"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958333226416"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>
<pre class="screen">WD_VERSION ver;

BZERO(ver);
WD_Version(hWD, &amp;ver);
printf("%s\n", ver.cVer);
if (ver.dwVer &lt; WD_VER)
{
    printf("Error - incorrect WinDriver version\n");
}
</pre>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_Close"></a>5.4. WD_Close()</h2></div></div></div>
<h5><a name="idp46958333229904"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Closes the access to the WinDriver kernel module.
</p>

<h5><a name="idp46958333231296"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">void WD_Close(HANDLE hWD);</pre>

<h5><a name="idp46958333232928"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46958333241504"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="" align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></td></tr></tbody></table></div>

  <h5><a name="idp46958333248928"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  None
  </p>
  
<h5><a name="idp46958333250320"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<p>
This function must be called when you finish using WinDriver kernel module.
</p>

<h5><a name="idp46958333252048"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>
<pre class="screen">WD_Close(hWD);</pre>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_Debug"></a>5.5. WD_Debug()</h2></div></div></div>
<h5><a name="idp46958333255200"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Sets debugging level for collecting debug messages.
</p>

<h5><a name="idp46958333256592"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_Debug(
    HANDLE hWD,
    WD_DEBUG *pDebug);
</pre>

<h5><a name="idp46958333258224"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pDebug</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_DEBUG*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwCmd</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwLevel</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwSection</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwLevelMessageBox</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwBufferSize</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46958333279936"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>

<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pDebug</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Pointer to a debug information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwCmd</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Debug command: Set filter, Clear buffer, etc. <br>
    For more details please refer to <code class="japi">DEBUG_COMMAND</code> in
    <span class="jprintfilename"><strong>windrvr.h</strong></span>.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwLevel</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Used for <code class="japi">dwCmd=DEBUG_SET_FILTER</code>. Sets the debugging level to
    collect: Error, Warning, Info, Trace.<br>
    For more details please refer to <code class="japi">DEBUG_LEVEL</code> in
    <span class="jprintfilename"><strong>windrvr.h</strong></span>.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwSection</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Used for <code class="japi">dwCmd=DEBUG_SET_FILTER</code>. Sets the sections to
    collect: I/&#65279;O, Memory, Interrupt, etc. Use <code class="japi">S_ALL</code> for all.
    <br>
    For more details please refer to <code class="japi">DEBUG_SECTION</code> in
    <span class="jprintfilename"><strong>windrvr.h</strong></span>.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwLevelMessageBox</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Used for <code class="japi">dwCmd=DEBUG_SET_FILTER</code>. Sets the debugging level to
    print in a message box. <br>
    For more details please refer to <code class="japi">DEBUG_LEVEL</code> in
    <span class="jprintfilename"><strong>windrvr.h</strong></span>.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwBufferSize</span></td><td style="" align="left" valign="top">
    Used for <code class="japi">dwCmd=DEBUG_SET_BUFFER</code>. The size of buffer in the
    kernel.
  </td></tr></tbody></table></div>

  <h5><a name="idp46958333304528"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958333306880"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen">WD_DEBUG dbg;

BZERO(dbg);
dbg.dwCmd = DEBUG_SET_FILTER;
dbg.dwLevel = D_ERROR;
dbg.dwSection = S_ALL;
dbg.dwLevelMessageBox = D_ERROR;

WD_Debug(hWD, &amp;dbg);
</pre>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_DebugAdd"></a>5.6. WD_DebugAdd()</h2></div></div></div>
<h5><a name="idp46958333310352"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Sends debug messages to the debug log. Used by the driver code.
</p>

<h5><a name="idp46958333311824"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_DebugAdd(
    HANDLE hWD,
    WD_DEBUG_ADD *pData);
</pre>

<h5><a name="idp46958333313536"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pData</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_DEBUG_ADD*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwLevel</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwSection</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pcBuffer</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">CHAR[256]</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46958333330336"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>

<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pData</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
     Pointer to an additional debug information structure:
   </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwLevel</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
     Assigns the level in the Debug Monitor, in which the data will be
     declared. <br>
     If <code class="japi">dwLevel</code> is zero, <code class="japi">D_ERROR</code> will be declared.
     <br>
     For more details please refer to <code class="japi">DEBUG_LEVEL</code> in
     <span class="jprintfilename"><strong>windrvr.h</strong></span>.
   </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwSection</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
     Assigns the section in the Debug Monitor, in which the data will be
     declared. <br>
     If <code class="japi">dwSection</code> is zero, <code class="japi">S_MISC</code> section will be
     declared. <br>
     For more details please refer to <code class="japi">DEBUG_SECTION</code> in
     <span class="jprintfilename"><strong>windrvr.h</strong></span>.
   </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pcBuffer</span></td><td style="" align="left" valign="top">
    The string to copy into the message log.
  </td></tr></tbody></table></div>

  <h5><a name="idp46958333348960"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958333351312"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen">WD_DEBUG_ADD add;

BZERO(add);
add.dwLevel = D_WARN;
add.dwSection = S_MISC;
sprintf(add.pcBuffer, "This message will be displayed in "
    "the Debug Monitor\n");
WD_DebugAdd(hWD, &amp;add);
</pre>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_DebugDump"></a>5.7. WD_DebugDump()</h2></div></div></div>
<h5><a name="idp46958333354848"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Retrieves debug messages buffer.
</p>

<h5><a name="idp46958333356240"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_DebugDump(
    HANDLE hWD,
    WD_DEBUG_DUMP *pDebugDump);
</pre>

<h5><a name="idp46958333357952"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pDebug</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_DEBUG_DUMP*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pcBuffer</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">PCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input/Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwSize</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46958333372608"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pDebugDump</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Pointer to a debug dump information structure:
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pcBuffer</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Buffer to receive debug messages
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">dwSize</td><td style="" align="left" valign="top">
    Size of buffer in bytes
  </td></tr></tbody></table></div>

  <h5><a name="idp46958333384224"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958333386576"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen">char buffer[1024];
WD_DEBUG_DUMP dump;
dump.pcBuffer=buffer;
dump.dwSize = sizeof(buffer);
WD_DebugDump(hWD, &amp;dump);
</pre>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_Sleep"></a>5.8. WD_Sleep()</h2></div></div></div>
<h5><a name="idp46958333389968"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Delays execution for a specific duration of time.
</p>

<h5><a name="idp46958333391360"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_Sleep(
    HANDLE hWD,
    WD_SLEEP *pSleep);
</pre>

<h5><a name="idp46958333392992"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pSleep</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_SLEEP*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwMicroSeconds</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46958333407520"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pSleep</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Pointer to a sleep information structure</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwMicroSeconds</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Sleep time in microseconds &#8212; 1/1,000,000 of a second
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwOptions</span></td><td style="" align="left" valign="top">
    A bit-mask, which can be set to either of the following values:
    <div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><strong class="japib"><code>Zero (0)</code></strong> &#8212; Delay execution by consuming CPU
        cycles <span style="white-space:nowrap">(busy sleep)</span>; this is the default.
      </li><li class="listitem" style="list-style-type: disc"><strong class="japib"><code>SLEEP_NON_BUSY</code></strong> &#8212; Delay execution without
        consuming CPU resources <span style="white-space:nowrap">(non-busy sleep)</span>.<br>
        
    Note: The accuracy of non-busy sleep is
    <span style="white-space:nowrap">machine-dependent</span> and cannot be guaranteed for short
    sleep intervals <span style="white-space:nowrap">(&lt; 1 millisecond)</span>.
      </li></ul></div>
  </td></tr></tbody></table></div>

  <h5><a name="idp46958333424736"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958333427088"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<p>
Example usage: to access slow response hardware.
</p>

<h5><a name="idp46958333428480"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>
<pre class="screen">WD_Sleep slp;

BZERO(slp);
slp.dwMicroSeconds = 200;
WD_Sleep(hWD, &amp;slp);
</pre>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_License"></a>5.9. WD_License()</h2></div></div></div>
<h5><a name="idp46958333431792"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Transfers the license string to the WinDriver kernel module.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="scripts/images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top">
When using the high&#65279;-&#65279;level <code class="japi">WDC</code> library APIs, described in the
<span class="jprintfilename"><strong>WinDriver PCI Manual</strong></span>, the license registration is done via the
<code class="jfunc">WDC_DriverOpen</code><span class="jfunc">()</span> function, so you do not need to call
<code class="jfunc">WD_License</code><span class="jfunc">()</span> directly.
</td></tr></table></div>
<h5><a name="idp46958333435504"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_License(
    HANDLE hWD,
    WD_LICENSE *pLicense);
</pre>

<h5><a name="idp46958333437216"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pLicense</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_LICENSE*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">cLicense</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">CHAR[]</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46958333449472"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver's kernel-mode driver as
  received from <code class="jfunc">WD_Open</code><span class="jfunc">()</span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pLicense</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Pointer to a WinDriver license information structure:
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">cLicense</span></td><td style="" align="left" valign="top">
    A buffer to contain the license string that is to be transferred to the
    WinDriver kernel module. 
  </td></tr></tbody></table></div>

  <h5><a name="idp46958333460144"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958333462496"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<p>
When using a registered version, this function must be called before any other
WinDriver API call, apart from <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_Open</code><span class="japi">()</span></span><a class="xref" href="#WD_Open" title="5.2. WD_Open()"><fo:inline> [5.2]</fo:inline></a></span>, in order to register the
license from the code.
</p>

<h5><a name="idp46958333466704"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>
<p>
Example usage: Add registration routine to your application:

</p><pre class="screen">/* Use the returned handle when calling WinDriver API functions */
HANDLE WinDriverOpenAndRegister(void)
{
    HANDLE hWD;
    WD_LICENSE lic;
    DWORD dwStatus;

    hWD = WD_Open();
    if (hWD!=INVALID_HANDLE_VALUE)
    {
        BZERO(lic);
        /* Replace the following string with your license string: */
        strcpy(lic.cLicense, "12345abcde12345.CompanyName");
        dwStatus = WD_License(hWD, &amp;lic);
        if (dwStatus != WD_STATUS_SUCCESS)
        {
             WD_Close(hWD);
             hWD = INVALID_HANDLE_VALUE;
        }
    }
    
    return hWD;
}
</pre><p>
</p>
</div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="KPUSERFUNC"></a>Chapter 6. Kernel PlugIn User-Mode Functions</h1></div></div></div><p>
This chapter describes the user-mode functions that initiate the Kernel PlugIn
operations and activate its callbacks. For a description of the high&#65279;-&#65279;level
<span class="b"><strong>WDC</strong></span> user-mode Kernel PlugIn APIs, which can be used instead of the
low&#65279;-&#65279;level APIs described in this chapter, and for a description of the
Kernel PlugIn structures and kernel-mode APIs, refer to the <span class="jprintfilename"><strong>WinDriver PCI Manual</strong></span>.
</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_KernelPlugInOpen"></a>6.1. WD_KernelPlugInOpen()</h2></div></div></div>
<h5><a name="idp46958333475616"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Obtain a valid handle to the Kernel PlugIn.
</p>

<h5><a name="idp46958333477008"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_KernelPlugInOpen(
    HANDLE hWD,
    WD_KERNEL_PLUGIN *pKernelPlugIn);
</pre>

<h5><a name="idp46958333478736"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pKernelPlugIn</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_KERNEL_PLUGIN*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hKernelPlugIn</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pcDriverName</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">PCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pcDriverPath</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">PCHAR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pOpenData</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">PVOID</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46958333497808"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Handle to WinDriver</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pKernelPlugIn</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Pointer to Kernel PlugIn information structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hKernelPlugIn</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Returns the handle to the Kernel PlugIn</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pcDriverName</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Name of Kernel PlugIn to load, up to 8 characters</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pcDriverPath</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    This field should be set to <code class="japi">NULL</code>. WinDriver will search for the driver in
    the operating system's drivers/modules directory.
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pOpenData</span></td><td style="" align="left" valign="top">
    Pointer to data that will be passed to the <code class="japi">KP_Open</code> callback
    in the Kernel PlugIn
  </td></tr></tbody></table></div>

  <h5><a name="idp46958333514112"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958333516464"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen">WD_KERNEL_PLUGIN kernelPlugIn;
BZERO(kernelPlugIn);

/* Tells WinDriver which driver to open */
kernelPlugIn.pcDriverName = "KPDriver";

HANDLE hWD = WD_Open(); /* Validate handle here */

dwStatus = WD_KernelPlugInOpen(hWD, &amp;kernelPlugIn);
if (dwStatus)
{
    printf ("Failed opening a handle to the Kernel PlugIn. Error: 0x%x (%s)\n",
            dwStatus, Stat2Str(dwStatus));
}
else
{
   printf("Opened a handle to the Kernel PlugIn (0x%x)\n",
           kernelPlugIn.hKernelPlugIn);
}
</pre>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_KernelPlugInClose"></a>6.2. WD_KernelPlugInClose()</h2></div></div></div>
<h5><a name="idp46958333521200"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Closes the WinDriver Kernel PlugIn handle obtained from
<span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_KernelPlugInOpen</code><span class="japi">()</span></span><a class="xref" href="#WD_KernelPlugInOpen" title="6.1. WD_KernelPlugInOpen()"><fo:inline> [6.1]</fo:inline></a></span>.
</p>

<h5><a name="idp46958333524864"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_KernelPlugInClose(
    HANDLE hWD,
    WD_KERNEL_PLUGIN *pKernelPlugIn);
</pre>

<h5><a name="idp46958333526304"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">pKernelPlugIn</td><td style="border-right: 0.5pt solid ; " align="left" valign="top">WD_KERNEL_PLUGIN*</td><td style="" align="left" valign="top">Input</td></tr></tbody></table></div>

<h5><a name="idp46958333536640"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Handle to WinDriver
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">
    pKernelPlugIn
  </td><td style="" align="left" valign="top">
    Pointer to Kernel PlugIn information structure, which was previously passed
    to <span style=""><span style=""><code class="japi">WD_KernelPlugInOpen</code><span class="japi">()</span></span><a class="xref" href="#WD_KernelPlugInOpen" title="6.1. WD_KernelPlugInOpen()"><fo:inline> [6.1]</fo:inline></a></span>
  </td></tr></tbody></table></div>


  
  <h5><a name="idp46958333547360"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  

<h5><a name="idp46958333549648"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen">WD_KernelPlugInClose(hWD, &amp;kernelPlugIn);</pre>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_KernelPlugInCall"></a>6.3. WD_KernelPlugInCall()</h2></div></div></div>
<h5><a name="idp46958333553232"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Calls a routine in the Kernel PlugIn to be executed.
</p>

<h5><a name="idp46958333554688"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_KernelPlugInCall(
    HANDLE hWD,
    WD_KERNEL_PLUGIN_CALL *pKernelPlugInCall);
</pre>

<h5><a name="idp46958333556528"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE </td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pKernelPlugInCall</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_KERNEL_PLUGIN_CALL*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hKernelPlugIn</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwMessage</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pData</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">PVOID</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input/Output</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwResult</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">Output</td></tr></tbody></table></div>

<h5><a name="idp46958333576816"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Handle to WinDriver
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pKernelPlugInCall</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Pointer to a Kernel PlugIn message structure:</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">hKernelPlugIn</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Handle to the Kernel PlugIn
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwMessage</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Message ID to pass to the <code class="japi">KP_Call</code> callback
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">pData</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Pointer to data to pass between the Kernel PlugIn driver and the
    user-mode application, via the <code class="japi">KP_Call</code> callback
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">dwResult</span></td><td style="" align="left" valign="top">
    Value set by <code class="japi">KP_Call</code> callback
  </td></tr></tbody></table></div>

  <h5><a name="idp46958333594560"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958333597104"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<p>
Calling the <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style=""><span style=""><code class="japi">WD_KernelPlugInCall</code><span class="japi">()</span></span><span> function</span><a class="xref" href="#WD_KernelPlugInCall" title="6.3. WD_KernelPlugInCall()"><fo:inline> [6.3]</fo:inline></a></span> in the user mode
will call your <code class="japi">KP_Call</code> callback function in the kernel.
The <code class="japi">KP_Call</code> Kernel PlugIn function will determine what routine
to execute according to the message passed to it in the
<code class="japi">WD_KERNEL_PLUGIN_CALL</code> structure.
</p>

<h5><a name="idp46958333603376"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen">WD_KERNEL_PLUGIN_CALL kpCall;

BZERO (kpCall);
/* Prepare the kpCall structure from WD_KernelPlugInOpen(): */
kpCall.hKernelPlugIn = hKernelPlugIn;
/* Set the message to pass to KP_Call. This will determine
   the action performed in the kernel: */
kpCall.dwMessage = MY_DRV_MSG;

kpCall.pData = &amp;mydrv; /* The data to pass to the Kernel PlugIn */
dwStatus = WD_KernelPlugInCall(hWD, &amp;kpCall);
if (dwStatus == WD_STATUS_SUCCESS)
{
    printf("Result = 0x%x\n", kpCall.dwResult);
}
else
{
    printf("WD_KernelPlugInCall() failed. Error: 0x%x (%s)\n",
            dwStatus, Stat2Str(dwStatus));
}
</pre>
</div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="WD_IntEnable_KP"></a>6.4. WD_IntEnable()</h2></div></div></div>
<h5><a name="idp46958333608512"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Purpose</span></div>
<p>
Enables interrupt handling in the Kernel PlugIn.
</p>

<h5><a name="idp46958333610032"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Prototype</span></div>
<pre class="screen">DWORD WD_IntEnable(HANDLE hWD, WD_INTERRUPT *pInterrupt);</pre>

<h5><a name="idp46958333611840"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Parameters</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"><col align="left" class="col3"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Type</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Input/Output</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pInterrupt</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_INTERRUPT*</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">kpCall</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_KERNEL_PLUGIN_CALL</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"> </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">hKernelPlugIn</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwMessage</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">N/&#65279;A</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">pData</span></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">PVOID</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Input</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top"> * <span style="">dwResult</span></td><td style="border-right: 0.5pt solid ; " align="left" valign="top">DWORD</td><td style="" align="left" valign="top">N/&#65279;A</td></tr></tbody></table></div>

<h5><a name="idp46958333634240"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Description</span></div>
<div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Name</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">hWD</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
   Handle to WinDriver
 </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">pInterrupt</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Pointer to an interrupt information structure:
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">&#8226; <span style="">kpCall</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Kernel PlugIn message structure:
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"> * <span style="">hKernelPlugIn</span></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">
    Handle to the Kernel PlugIn. If zero, no Kernel PlugIn interrupt handler
    is installed
  </td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top"> * <span style="">pData</span></td><td style="" align="left" valign="top">
    Pointer to data to pass to the <code class="japi">KP_IntEnable</code> callback in
    the Kernel PlugIn
  </td></tr></tbody></table></div>

  <h5><a name="idp46958333649792"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Return Value</span></div>
  <p>
  Returns <code class="japi">WD_STATUS_SUCCESS</code> (0) on success, or an appropriate
  error code otherwise<a class="xref" href="#Status_Strings" title="Appendix A. WinDriver Status Codes"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format"> [A]</fo:inline></a>.
  </p>
  
<h5><a name="idp46958333652256"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Remarks</span></div>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    If a valid handle to a Kernel PlugIn is passed to this function, the
    interrupts will be handled in the Kernel PlugIn. In such a case, the
    <code class="japi">KP_IntEnable</code> callback will execute as a result of the call
    to <code class="jfunc">WD_IntEnable</code><span class="jfunc">()</span>, and upon receiving the interrupt your
    kernel-mode high-IRQL interrupt handler function &#8212;
    <code class="japi">KP_IntAtIrql</code>
    (legacy interrupts) or <code class="japi">KP_IntAtIrqlMSI</code>
    (MSI/MSI-&#65279;X) &#8212; will execute. If this
    function returns a value greater than zero, your Deferred Procedure Call (DPC) handler
    &#8212; <code class="japi">KP_IntAtDpc</code>
    (legacy interrupts) or <code class="japi">KP_IntAtDpcMSI</code>
    (MSI/MSI-&#65279;X) &#8212; will be called.
  </li><li class="listitem" style="list-style-type: disc">
    For information regarding the additional <code class="japi">pInterrupt</code> fields,
    refer to the description of the <code class="japi">pInterrupt</code> parameter of the
    <code class="jfunc">WD_IntEnable</code><span class="jfunc">()</span> function in <a class="xref" href="#WD_IntEnable" title="3.2. WD_IntEnable()"><fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format">Section 3.2</fo:inline></a>.
  </li></ul></div>

<h5><a name="idp46958333660464"></a></h5><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.33em"><span class="bridgehead">Example</span></div>

<pre class="screen">WD_INTERRUPT Intrp;
BZERO(Intrp);
Intrp.hInterrupt = hInterrupt; /* From WD_CardRegister() */
/* From WD_KernelPlugInOpen(): */
Intrp.kpCall.hKernelPlugIn = hKernelPlugIn;

WD_IntEnable(hWD, &amp;Intrp);

if (!Intrp.fEnableOk)
    printf ("failed enabling interrupt\n");
</pre>
</div></div><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a name="Status_Strings"></a>Appendix A. WinDriver Status Codes</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="wd_status_codes_intro"></a>A.1. Introduction</h2></div></div></div><p>
Most of the WinDriver functions return a status code, where zero
(<code class="japi">WD_STATUS_SUCCESS</code>) means success and a non-zero value means
failure.<br>
The <code class="jfunc">Stat2Str</code><span class="jfunc">()</span> functions can be used to retrieve the status
description string for a given status code. The status codes and their
descriptive strings are listed below.
</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="wd_status_codes"></a>A.2. Status Codes Returned by WinDriver</h2></div></div></div><div class="informaltable"><table cellpadding="6px" style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col align="left" class="col1"><col align="left" class="col2"></colgroup><thead><tr xmlns:fo="http://www.w3.org/1999/XSL/Format" bgcolor="#EEEEEE"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Status Code</strong></span></th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top"><span class="b"><strong>Description</strong></span></th></tr></thead><tbody><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_STATUS_SUCCESS</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Success</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_STATUS_INVALID_WD_HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Invalid WinDriver handle</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_WINDRIVER_STATUS_ERROR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Error</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_INVALID_HANDLE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Invalid handle</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_INVALID_PIPE_NUMBER</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Invalid pipe number</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_READ_WRITE_CONFLICT</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Conflict between read and write operations</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_ZERO_PACKET_SIZE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Packet size is zero</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_INSUFFICIENT_RESOURCES</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Insufficient resources</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_UNKNOWN_PIPE_TYPE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Unknown pipe type</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_SYSTEM_INTERNAL_ERROR</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Internal system error</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_DATA_MISMATCH</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Data mismatch</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_NO_LICENSE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">No valid license</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_NOT_IMPLEMENTED</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Function not implemented</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_KERPLUG_FAILURE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Kernel PlugIn failure</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_FAILED_ENABLING_INTERRUPT</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Failed enabling interrupt</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_INTERRUPT_NOT_ENABLED</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Interrupt not enabled</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_RESOURCE_OVERLAP</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Resource overlap</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_DEVICE_NOT_FOUND</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Device not found</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_WRONG_UNIQUE_ID</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Wrong unique ID</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_OPERATION_ALREADY_DONE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Operation already done</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_SET_CONFIGURATION_FAILED</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Set configuration operation failed</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_CANT_OBTAIN_PDO</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Cannot obtain PDO</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_TIME_OUT_EXPIRED</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Timeout expired</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_IRP_CANCELED</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">IRP operation canceled</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_FAILED_USER_MAPPING</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Failed to map in user space</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_FAILED_KERNEL_MAPPING</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Failed to map in kernel space</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_NO_RESOURCES_ON_DEVICE</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">No resources on the device</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_NO_EVENTS</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">No events</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_INVALID_PARAMETER</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Invalid parameter</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_INCORRECT_VERSION</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Incorrect WinDriver version installed</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_TRY_AGAIN</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Try again</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_INVALID_IOCTL</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Received an invalid IOCTL</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_OPERATION_FAILED</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Operation failed</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_INVALID_32BIT_APP</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">Received an invalid 32-&#65279;bit IOCTL</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">WD_TOO_MANY_HANDLES</td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top">No room to add handle</td></tr><tr xmlns:fo="http://www.w3.org/1999/XSL/Format"><td style="border-right: 0.5pt solid ; " align="left" valign="top">WD_NO_DEVICE_OBJECT</td><td style="" align="left" valign="top">Driver not installed</td></tr></tbody></table></div></div></div><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a name="troubleshooting_n_support"></a>Appendix B. Troubleshooting and Support</h1></div></div></div><p>
Please refer to the online WinDriver support page &#8212; <a class="ulink" href="https://www.jungo.com/st/support/windriver/" target="_top">https://www.jungo.com/st/support/windriver/</a> &#8212;
for additional resources for developers, including

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc">
    Technical documents
  </li><li class="listitem" style="list-style-type: disc">
    FAQs
  </li><li class="listitem" style="list-style-type: disc">
    Samples
  </li><li class="listitem" style="list-style-type: disc">
    Quick start guides
  </li></ul></div><p>
</p></div><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a name="purchasing_wd"></a>Appendix C. Purchasing WinDriver</h1></div></div></div><p>
Visit the WinDriver order page on our web site &#8212; <a class="ulink" href="https://www.jungo.com/st/order_wd/" target="_top">https://www.jungo.com/st/order_wd/</a> &#8212;
to select your WinDriver product(s) and receive a quote. Then fill in the WinDriver
order form &#8212; available for download from the order page &#8212; and send
it to Jungo by email or fax (see details in the order form and in the
online order page). If you have installed the evaluation version of WinDriver, you
can also find the order form in the
<span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jdirectory"><strong>WinDriver/docs</strong></span></span> directory, or
access it via
<span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><span class="jmenupath"><strong>Start | WinDriver | Order Form</strong></span></span> on
Windows.
</p><p>
The WinDriver license string will be emailed to you immediately.<br>
Your WinDriver package will be sent to you via courier or registered mail.
</p><p>
Feel free to contact us with any question you may have. For full contact
information, visit our contact web page: <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><a class="ulink" href="https://www.jungo.com/st/company/contact-us/" target="_top">https://www.jungo.com/st/company/contact-us/</a></span>.
</p></div><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a name="additional_doc"></a>Appendix D. Additional Documentation</h1></div></div></div><h4><a name="idp46958333736336"></a></h4><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.5em"><span class="bridgehead">Updated Manuals</span></div><p>
The most updated WinDriver user manuals can be found on Jungo's site at
<span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><a class="ulink" href="https://www.jungo.com/st/support/windriver/" target="_top">https://www.jungo.com/st/support/windriver/</a></span>.
</p><h4><a name="idp46958333738192"></a></h4><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.5em"><span class="bridgehead">Version History</span></div><p>
If you wish to view WinDriver version history, refer to the WinDriver release notes,
available online at <span xmlns:fo="http://www.w3.org/1999/XSL/Format" style="white-space:nowrap"><a class="ulink" href="https://www.jungo.com/st/support/windriver/wdver/" target="_top">https://www.jungo.com/st/support/windriver/wdver/</a></span>. The release notes include a list of the
new features, enhancements and fixes that have been added in each WinDriver
version.
</p><h4><a name="idp46958333740224"></a></h4><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="font-size: 1.5em"><span class="bridgehead">Technical Documents</span></div><p>
For additional information, refer to the WinDriver Technical Documents
database:<br>
<a class="ulink" href="https://www.jungo.com/st/support/tech_docs_indexes/main_index.html" target="_top">https://www.jungo.com/st/support/tech_docs_indexes/main_index.html</a>.<br>
This database includes detailed descriptions of WinDriver's features,
utilities and APIs and their correct usage, troubleshooting of common
problems, useful tips and answers to frequently asked questions.
</p></div></div><HR><table class="footer" width="100%"><tr><td width="33.33%" align="left"><span xmlns:fo="http://www.w3.org/1999/XSL/Format" class="j_footer_copyright">
  © 2018 Jungo Connectivity Ltd.
</span></td><td width="33.33%" align="right">CONFIDENTIAL</td></tr></table></body></html>
